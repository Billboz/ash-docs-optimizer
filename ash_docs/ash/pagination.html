<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="ash v3.4.8">


    <title>Pagination — ash v3.4.8</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-370365CE.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>
<style>
  .livebook-badge-container + pre {
    display: none;
  }
</style>
<script>
  if (location.hostname === "hexdocs.pm") {
    var script = document.createElement("script");
    script.src = "https://plausible.io/js/script.js";
    script.setAttribute("defer", "defer")
    script.setAttribute("data-domain", "ashhexdocs")
    document.head.appendChild(script);
  }
</script>
<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>mermaid.initialize({startOnLoad: true})</script>

  </head>
  <body data-type="extras" class="page-livemd">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="https://github.com/ash-project/ash" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="ash" />
        </a>

      <div>
        <a href="https://github.com/ash-project/ash" class="sidebar-projectName" translate="no">
ash
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v3.4.8
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
GUIDES
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


        <li>
          <button id="tasks-list-tab-button" role="tab" data-type="tasks" aria-controls="tasks-tab-panel" aria-selected="false" tabindex="-1">
            <span translate="no">Mix</span> Tasks
          </button>
        </li>

    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


    <div id="tasks-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="tasks-list-tab-button" hidden>
      <ul id="tasks-full-list" class="full-list"></ul>
    </div>

</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ash</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/ash-project/ash/blob/v3.4.8/documentation/topics/advanced/pagination.livemd#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>


    <span>Pagination</span>
  </h1>

    <div class="livebook-badge-container">
      <a href="#" class="livebook-badge">
        <img src="https://livebook.dev/badge/v1/blue.svg" alt="Run in Livebook" width="150" />
      </a>
    </div>

<pre><code class="makeup elixir" translate="no"><span class="nc">Mix</span><span class="o">.</span><span class="n">install</span><span class="p" data-group-id="4155755457-1">(</span><span class="p" data-group-id="4155755457-2">[</span><span class="p" data-group-id="4155755457-3">{</span><span class="ss">:ash</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 3.0&quot;</span><span class="p" data-group-id="4155755457-3">}</span><span class="p" data-group-id="4155755457-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">consolidate_protocols</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="4155755457-1">)</span><span class="w">
</span><span class="nc">Logger</span><span class="o">.</span><span class="n">configure</span><span class="p" data-group-id="4155755457-4">(</span><span class="ss">level</span><span class="p">:</span><span class="w"> </span><span class="ss">:warning</span><span class="p" data-group-id="4155755457-4">)</span></code></pre><h2 id="pagination-in-ash" class="section-heading">
  <a href="#pagination-in-ash" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Pagination in Ash</span>
</h2>
<p>Ash has built-in support for two kinds of pagination: <code class="inline">offset</code> and <code class="inline">keyset</code>. You can perform pagination by passing the <code class="inline">:page</code> option to read actions, or using <a href="Ash.Query.html#page/2"><code class="inline">Ash.Query.page/2</code></a> on the query. The page options vary depending on which kind of pagination you want to perform.</p><p>Pagination support is configured on a per-action basis. A single action can support both kinds of pagination if desired, but typically you would use one or the other. Read actions generated with <code class="inline">defaults [:read]</code> support both offset and keyset pagination, for other <code class="inline">read</code> actions you have to configure the <a href="https://hexdocs.pm/ash/dsl-ash-resource.html#actions-read-pagination"><code class="inline">pagination</code> section</a>.</p><blockquote><h3 id="check-the-updated-query-return-type" class="section-heading">
  <a href="#check-the-updated-query-return-type" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Check the updated query return type!</span>
</h3>
<p>Pagination will modify the return type of calling the query action.</p><p>Without pagination, Ash will return a list of records.</p><p>But <em>with</em> pagination, Ash will return an <a href="Ash.Page.Offset.html"><code class="inline">Ash.Page.Offset</code></a> struct (for offset pagination) or <a href="Ash.Page.Keyset.html"><code class="inline">Ash.Page.Keyset</code></a> struct (for keyset pagination). Both structs contain the list of records in the <code class="inline">results</code> key of the struct.</p></blockquote><h2 id="offset-pagination" class="section-heading">
  <a href="#offset-pagination" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Offset Pagination</span>
</h2>
<p>Offset pagination is done via providing a <code class="inline">limit</code> and an <code class="inline">offset</code> when making queries.</p><ul><li>The <code class="inline">limit</code> determines how many records should be returned in the query.</li><li>The <code class="inline">offset</code> describes how many records from the beginning should be skipped.</li></ul><h3 id="pros-of-offset-pagination" class="section-heading">
  <a href="#pros-of-offset-pagination" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Pros of offset pagination</span>
</h3>
<ul><li>Simple to think about</li><li>Possible to skip to a page by number. E.g the 5th page of 10 records is <code class="inline">offset: 40</code></li><li>Easy to reason about what page you are currently on (if the total number of records is requested)</li><li>Can go to the last page (though data may have changed between calculating the last page details, and requesting it)</li></ul><h3 id="cons-of-offset-pagination" class="section-heading">
  <a href="#cons-of-offset-pagination" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Cons of offset pagination</span>
</h3>
<ul><li>Does not perform well on large datasets (if you have to ask if your dataset is &quot;large&quot;, it probably isn't)</li><li>When moving between pages, if data was created or deleted, individual records may be missing or appear on multiple pages</li></ul><h2 id="keyset-pagination" class="section-heading">
  <a href="#keyset-pagination" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Keyset Pagination</span>
</h2>
<p>Keyset pagination is done via providing an <code class="inline">after</code> or <code class="inline">before</code> option, as well as a <code class="inline">limit</code>.</p><ul><li>The <code class="inline">limit</code> determines how many records should be returned in the query.</li><li>The <code class="inline">after</code> or <code class="inline">before</code> value should be a <code class="inline">keyset</code> value that has been returned from a previous request. Keyset values are returned whenever there is any read action on a resource that supports keyset pagination, and they are stored in the <code class="inline">__metadata__</code> key of each record.</li></ul><blockquote><h3 id="keysets-are-directly-tied-to-the-sorting-applied-to-the-query" class="section-heading">
  <a href="#keysets-are-directly-tied-to-the-sorting-applied-to-the-query" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Keysets are directly tied to the sorting applied to the query</span>
</h3>
<p>You can't change the sort applied to a request being paginated, and use the same keyset. If you want to change the sort, but <em>keep</em> the record who's keyset you are using in the <code class="inline">before</code> or <code class="inline">after</code> option, you must first request the individual record, with the new sort applied. Then, you can use the new keyset.</p></blockquote><h3 id="pros-of-keyset-pagination" class="section-heading">
  <a href="#pros-of-keyset-pagination" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Pros of keyset pagination</span>
</h3>
<ul><li>Performs very well on large datasets (assuming indices exist on the columns being sorted on)</li><li>Behaves well as data changes. The record specified will always be the first or last item in the page</li></ul><h3 id="cons-of-keyset-paginations" class="section-heading">
  <a href="#cons-of-keyset-paginations" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Cons of keyset paginations</span>
</h3>
<ul><li>A bit more complex to use</li><li>Can't go to a specific page number</li></ul><h2 id="counting-records" class="section-heading">
  <a href="#counting-records" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Counting records</span>
</h2>
<p>When calling an action that uses pagination, the full count of records can be requested by adding the option <code class="inline">count: true</code> to the page options.
Note that this will perform a second query to fetch the count, which can be expensive on large data sets.</p><h2 id="relationship-pagination" class="section-heading">
  <a href="#relationship-pagination" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Relationship pagination</span>
</h2>
<p>In addition to paginating root data, Ash is also capable of paginating relationships when you load them. To do this, pass a custom query in the load and call <a href="Ash.Query.html#page/2"><code class="inline">Ash.Query.page/2</code></a> on it.</p><p>This can be leveraged by extensions to provide arbitrarily nested pagination, or it can be used directly in code to split data processing when dealing with relationship with a high cardinality.</p><h2 id="pagination-example" class="section-heading">
  <a href="#pagination-example" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Pagination example</span>
</h2>
<p>Modify the setup block and configure the log level to <code class="inline">:debug</code> to see logs from the ETS data layer.</p><!-- livebook:{"force_markdown":true} --><pre><code class="makeup elixir" translate="no"><span class="nc">Logger</span><span class="o">.</span><span class="n">configure</span><span class="p" data-group-id="6279808087-1">(</span><span class="ss">level</span><span class="p">:</span><span class="w"> </span><span class="ss">:debug</span><span class="p" data-group-id="6279808087-1">)</span></code></pre><h3 id="define-some-resources-for-our-purpose" class="section-heading">
  <a href="#define-some-resources-for-our-purpose" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Define some resources for our purpose</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Post</span><span class="w"> </span><span class="k" data-group-id="9723205005-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">domain</span><span class="p">:</span><span class="w"> </span><span class="nc">Domain</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="nc">Ash.DataLayer.Ets</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="9723205005-2">do</span><span class="w">
    </span><span class="n">uuid_primary_key</span><span class="p" data-group-id="9723205005-3">(</span><span class="ss">:id</span><span class="p" data-group-id="9723205005-3">)</span><span class="w">
    </span><span class="n">attribute</span><span class="p" data-group-id="9723205005-4">(</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9723205005-4">)</span><span class="w">
    </span><span class="n">attribute</span><span class="p" data-group-id="9723205005-5">(</span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9723205005-5">)</span><span class="w">
  </span><span class="k" data-group-id="9723205005-2">end</span><span class="w">

  </span><span class="n">actions</span><span class="w"> </span><span class="k" data-group-id="9723205005-6">do</span><span class="w">
    </span><span class="n">defaults</span><span class="p" data-group-id="9723205005-7">(</span><span class="ss">create</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9723205005-8">[</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="9723205005-8">]</span><span class="p" data-group-id="9723205005-7">)</span><span class="w">

    </span><span class="n">read</span><span class="w"> </span><span class="ss">:read</span><span class="w"> </span><span class="k" data-group-id="9723205005-9">do</span><span class="w">
      </span><span class="n">primary?</span><span class="p" data-group-id="9723205005-10">(</span><span class="no">true</span><span class="p" data-group-id="9723205005-10">)</span><span class="w">
      </span><span class="n">prepare</span><span class="p" data-group-id="9723205005-11">(</span><span class="n">build</span><span class="p" data-group-id="9723205005-12">(</span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="ss">:title</span><span class="p" data-group-id="9723205005-12">)</span><span class="p" data-group-id="9723205005-11">)</span><span class="w">

      </span><span class="n">pagination</span><span class="w"> </span><span class="k" data-group-id="9723205005-13">do</span><span class="w">
        </span><span class="n">required?</span><span class="p" data-group-id="9723205005-14">(</span><span class="no">false</span><span class="p" data-group-id="9723205005-14">)</span><span class="w">
        </span><span class="n">offset?</span><span class="p" data-group-id="9723205005-15">(</span><span class="no">true</span><span class="p" data-group-id="9723205005-15">)</span><span class="w">
        </span><span class="n">keyset?</span><span class="p" data-group-id="9723205005-16">(</span><span class="no">true</span><span class="p" data-group-id="9723205005-16">)</span><span class="w">
        </span><span class="n">countable</span><span class="p" data-group-id="9723205005-17">(</span><span class="no">true</span><span class="p" data-group-id="9723205005-17">)</span><span class="w">
      </span><span class="k" data-group-id="9723205005-13">end</span><span class="w">
    </span><span class="k" data-group-id="9723205005-9">end</span><span class="w">

    </span><span class="n">read</span><span class="w"> </span><span class="ss">:keyset</span><span class="w"> </span><span class="k" data-group-id="9723205005-18">do</span><span class="w">
      </span><span class="n">prepare</span><span class="p" data-group-id="9723205005-19">(</span><span class="n">build</span><span class="p" data-group-id="9723205005-20">(</span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="ss">:title</span><span class="p" data-group-id="9723205005-20">)</span><span class="p" data-group-id="9723205005-19">)</span><span class="w">
      </span><span class="n">pagination</span><span class="p" data-group-id="9723205005-21">(</span><span class="ss">keyset?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="9723205005-21">)</span><span class="w">
    </span><span class="k" data-group-id="9723205005-18">end</span><span class="w">

    </span><span class="n">update</span><span class="w"> </span><span class="ss">:add_comment</span><span class="w"> </span><span class="k" data-group-id="9723205005-22">do</span><span class="w">
      </span><span class="n">require_atomic?</span><span class="p" data-group-id="9723205005-23">(</span><span class="no">false</span><span class="p" data-group-id="9723205005-23">)</span><span class="w">
      </span><span class="n">argument</span><span class="p" data-group-id="9723205005-24">(</span><span class="ss">:comment</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9723205005-24">)</span><span class="w">
      </span><span class="n">change</span><span class="p" data-group-id="9723205005-25">(</span><span class="n">manage_relationship</span><span class="p" data-group-id="9723205005-26">(</span><span class="ss">:comment</span><span class="p">,</span><span class="w"> </span><span class="ss">:comments</span><span class="p">,</span><span class="w"> </span><span class="ss">value_is_key</span><span class="p">:</span><span class="w"> </span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">type</span><span class="p">:</span><span class="w"> </span><span class="ss">:create</span><span class="p" data-group-id="9723205005-26">)</span><span class="p" data-group-id="9723205005-25">)</span><span class="w">
    </span><span class="k" data-group-id="9723205005-22">end</span><span class="w">
  </span><span class="k" data-group-id="9723205005-6">end</span><span class="w">

  </span><span class="n">relationships</span><span class="w"> </span><span class="k" data-group-id="9723205005-27">do</span><span class="w">
    </span><span class="n">has_many</span><span class="p" data-group-id="9723205005-28">(</span><span class="ss">:comments</span><span class="p">,</span><span class="w"> </span><span class="nc">Comment</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9723205005-29">[</span><span class="ss">:created_at</span><span class="p" data-group-id="9723205005-29">]</span><span class="p" data-group-id="9723205005-28">)</span><span class="w">
  </span><span class="k" data-group-id="9723205005-27">end</span><span class="w">
</span><span class="k" data-group-id="9723205005-1">end</span><span class="w">

</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Comment</span><span class="w"> </span><span class="k" data-group-id="9723205005-30">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Resource</span><span class="p">,</span><span class="w">
    </span><span class="ss">domain</span><span class="p">:</span><span class="w"> </span><span class="nc">Domain</span><span class="p">,</span><span class="w">
    </span><span class="ss">data_layer</span><span class="p">:</span><span class="w"> </span><span class="nc">Ash.DataLayer.Ets</span><span class="w">

  </span><span class="n">attributes</span><span class="w"> </span><span class="k" data-group-id="9723205005-31">do</span><span class="w">
    </span><span class="n">uuid_primary_key</span><span class="p" data-group-id="9723205005-32">(</span><span class="ss">:id</span><span class="p" data-group-id="9723205005-32">)</span><span class="w">
    </span><span class="n">attribute</span><span class="p" data-group-id="9723205005-33">(</span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:string</span><span class="p">,</span><span class="w"> </span><span class="ss">allow_nil?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9723205005-33">)</span><span class="w">
    </span><span class="n">create_timestamp</span><span class="p" data-group-id="9723205005-34">(</span><span class="ss">:created_at</span><span class="p" data-group-id="9723205005-34">)</span><span class="w">
  </span><span class="k" data-group-id="9723205005-31">end</span><span class="w">

  </span><span class="n">actions</span><span class="w"> </span><span class="k" data-group-id="9723205005-35">do</span><span class="w">
    </span><span class="n">defaults</span><span class="p" data-group-id="9723205005-36">(</span><span class="p" data-group-id="9723205005-37">[</span><span class="ss">:read</span><span class="p">,</span><span class="w"> </span><span class="ss">create</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9723205005-38">[</span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:post_id</span><span class="p" data-group-id="9723205005-38">]</span><span class="p">,</span><span class="w"> </span><span class="ss">update</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9723205005-39">[</span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:post_id</span><span class="p" data-group-id="9723205005-39">]</span><span class="p" data-group-id="9723205005-37">]</span><span class="p" data-group-id="9723205005-36">)</span><span class="w">
  </span><span class="k" data-group-id="9723205005-35">end</span><span class="w">

  </span><span class="n">relationships</span><span class="w"> </span><span class="k" data-group-id="9723205005-40">do</span><span class="w">
    </span><span class="n">belongs_to</span><span class="p" data-group-id="9723205005-41">(</span><span class="ss">:post</span><span class="p">,</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9723205005-42">[</span><span class="ss">:created_at</span><span class="p" data-group-id="9723205005-42">]</span><span class="p" data-group-id="9723205005-41">)</span><span class="w">
  </span><span class="k" data-group-id="9723205005-40">end</span><span class="w">
</span><span class="k" data-group-id="9723205005-30">end</span><span class="w">

</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Domain</span><span class="w"> </span><span class="k" data-group-id="9723205005-43">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">Ash.Domain</span><span class="p">,</span><span class="w">
    </span><span class="ss">validate_config_inclusion?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">

  </span><span class="n">resources</span><span class="w"> </span><span class="k" data-group-id="9723205005-44">do</span><span class="w">
    </span><span class="n">resource</span><span class="w"> </span><span class="nc">Post</span><span class="w"> </span><span class="k" data-group-id="9723205005-45">do</span><span class="w">
      </span><span class="n">define</span><span class="p" data-group-id="9723205005-46">(</span><span class="ss">:list_posts</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:read</span><span class="p" data-group-id="9723205005-46">)</span><span class="w">
      </span><span class="n">define</span><span class="p" data-group-id="9723205005-47">(</span><span class="ss">:list_posts_with_keyset</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:keyset</span><span class="p" data-group-id="9723205005-47">)</span><span class="w">
      </span><span class="n">define</span><span class="p" data-group-id="9723205005-48">(</span><span class="ss">:create_post</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:create</span><span class="p">,</span><span class="w"> </span><span class="ss">args</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9723205005-49">[</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="9723205005-49">]</span><span class="p" data-group-id="9723205005-48">)</span><span class="w">
      </span><span class="n">define</span><span class="p" data-group-id="9723205005-50">(</span><span class="ss">:add_comment_to_post</span><span class="p">,</span><span class="w"> </span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:add_comment</span><span class="p">,</span><span class="w"> </span><span class="ss">args</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9723205005-51">[</span><span class="ss">:comment</span><span class="p" data-group-id="9723205005-51">]</span><span class="p" data-group-id="9723205005-50">)</span><span class="w">
    </span><span class="k" data-group-id="9723205005-45">end</span><span class="w">

    </span><span class="n">resource</span><span class="p" data-group-id="9723205005-52">(</span><span class="nc">Comment</span><span class="p" data-group-id="9723205005-52">)</span><span class="w">
  </span><span class="k" data-group-id="9723205005-44">end</span><span class="w">
</span><span class="k" data-group-id="9723205005-43">end</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="5419429348-1">{</span><span class="ss">:module</span><span class="p">,</span><span class="w"> </span><span class="nc">Domain</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5419429348-2">&lt;&lt;</span><span class="mi">70</span><span class="p">,</span><span class="w"> </span><span class="mi">79</span><span class="p">,</span><span class="w"> </span><span class="mi">82</span><span class="p">,</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">31</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="5419429348-2">&gt;&gt;</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="5419429348-3">[</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl.Resources.Resource</span><span class="p">,</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl.Resources.Options</span><span class="p">,</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl</span><span class="p">,</span><span class="w">
   </span><span class="p" data-group-id="5419429348-4">%{</span><span class="ss">opts</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5419429348-5">[</span><span class="p" data-group-id="5419429348-5">]</span><span class="p">,</span><span class="w"> </span><span class="ss">entities</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5419429348-6">[</span><span class="n">...</span><span class="p" data-group-id="5419429348-6">]</span><span class="p" data-group-id="5419429348-4">}</span><span class="p">,</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl</span><span class="p">,</span><span class="w">
   </span><span class="nc">Ash.Domain.Dsl.Resources.Options</span><span class="p">,</span><span class="w">
   </span><span class="n">...</span><span class="w">
 </span><span class="p" data-group-id="5419429348-3">]</span><span class="p" data-group-id="5419429348-1">}</span></code></pre><h3 id="create-5-posts-with-5-comments-each" class="section-heading">
  <a href="#create-5-posts-with-5-comments-each" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Create 5 posts with 5 comments each</span>
</h3>
<pre><code class="makeup elixir" translate="no"><span class="k">for</span><span class="w"> </span><span class="n">post_idx</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="w"> </span><span class="k" data-group-id="5900818721-1">do</span><span class="w">
  </span><span class="n">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">create_post!</span><span class="p" data-group-id="5900818721-2">(</span><span class="s">&quot;post </span><span class="si" data-group-id="5900818721-3">#{</span><span class="n">post_idx</span><span class="si" data-group-id="5900818721-3">}</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;text </span><span class="si" data-group-id="5900818721-4">#{</span><span class="n">post_idx</span><span class="si" data-group-id="5900818721-4">}</span><span class="s">&quot;</span><span class="p" data-group-id="5900818721-2">)</span><span class="w">

  </span><span class="k">for</span><span class="w"> </span><span class="n">comment_idx</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">5</span><span class="w"> </span><span class="k" data-group-id="5900818721-5">do</span><span class="w">
    </span><span class="nc">Domain</span><span class="o">.</span><span class="n">add_comment_to_post!</span><span class="p" data-group-id="5900818721-6">(</span><span class="n">post</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;comment </span><span class="si" data-group-id="5900818721-7">#{</span><span class="n">comment_idx</span><span class="si" data-group-id="5900818721-7">}</span><span class="s">&quot;</span><span class="p" data-group-id="5900818721-6">)</span><span class="w">
  </span><span class="k" data-group-id="5900818721-5">end</span><span class="w">
</span><span class="k" data-group-id="5900818721-1">end</span><span class="w">

</span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="5900818721-8">(</span><span class="ss">load</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="5900818721-8">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="4790688949-1">[</span><span class="w">
  </span><span class="p" data-group-id="4790688949-2">#</span><span class="nc" data-group-id="4790688949-2">Post</span><span class="p" data-group-id="4790688949-2">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-3">[</span><span class="w">
      </span><span class="p" data-group-id="4790688949-4">#</span><span class="nc" data-group-id="4790688949-4">Comment</span><span class="p" data-group-id="4790688949-4">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-5">#</span><span class="nc" data-group-id="4790688949-5">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-5">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-5">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-6">#</span><span class="nc" data-group-id="4790688949-6">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-6">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-6">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6cdea87b-cb69-4dc5-9ff3-54fb46bd70b0&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.013913Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-7">%{</span><span class="p" data-group-id="4790688949-7">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-8">%{</span><span class="p" data-group-id="4790688949-8">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-9">#</span><span class="nc" data-group-id="4790688949-9">Comment</span><span class="p" data-group-id="4790688949-9">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-10">#</span><span class="nc" data-group-id="4790688949-10">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-10">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-10">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-11">#</span><span class="nc" data-group-id="4790688949-11">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-11">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-11">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;c653e92c-fe2f-4011-84c8-ace28ebbb207&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.021204Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-12">%{</span><span class="p" data-group-id="4790688949-12">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-13">%{</span><span class="p" data-group-id="4790688949-13">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-14">#</span><span class="nc" data-group-id="4790688949-14">Comment</span><span class="p" data-group-id="4790688949-14">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-15">#</span><span class="nc" data-group-id="4790688949-15">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-15">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-15">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-16">#</span><span class="nc" data-group-id="4790688949-16">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-16">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-16">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aa207735-0a02-4b51-b5f6-69564a2a6365&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.022890Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-17">%{</span><span class="p" data-group-id="4790688949-17">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-18">%{</span><span class="p" data-group-id="4790688949-18">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-14">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-19">#</span><span class="nc" data-group-id="4790688949-19">Comment</span><span class="p" data-group-id="4790688949-19">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-20">#</span><span class="nc" data-group-id="4790688949-20">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-20">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-20">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-21">#</span><span class="nc" data-group-id="4790688949-21">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-21">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-21">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;09f9cdfe-5a88-4f6a-a8d9-2f8aa312efb8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.024526Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-22">%{</span><span class="p" data-group-id="4790688949-22">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-23">%{</span><span class="p" data-group-id="4790688949-23">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-19">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-24">#</span><span class="nc" data-group-id="4790688949-24">Comment</span><span class="p" data-group-id="4790688949-24">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-25">#</span><span class="nc" data-group-id="4790688949-25">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-25">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-25">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-26">#</span><span class="nc" data-group-id="4790688949-26">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-26">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-26">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9b92edf4-e79e-4870-9dd0-9130863a9715&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.026132Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-27">%{</span><span class="p" data-group-id="4790688949-27">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-28">%{</span><span class="p" data-group-id="4790688949-28">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-24">&gt;</span><span class="w">
    </span><span class="p" data-group-id="4790688949-3">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-29">#</span><span class="nc" data-group-id="4790688949-29">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-29">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-29">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-30">%{</span><span class="p" data-group-id="4790688949-30">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-31">%{</span><span class="p" data-group-id="4790688949-31">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="4790688949-2">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4790688949-32">#</span><span class="nc" data-group-id="4790688949-32">Post</span><span class="p" data-group-id="4790688949-32">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-33">[</span><span class="w">
      </span><span class="p" data-group-id="4790688949-34">#</span><span class="nc" data-group-id="4790688949-34">Comment</span><span class="p" data-group-id="4790688949-34">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-35">#</span><span class="nc" data-group-id="4790688949-35">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-35">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-35">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-36">#</span><span class="nc" data-group-id="4790688949-36">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-36">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-36">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9a87a3a0-6930-4920-9345-8227b861c2ed&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.028515Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-37">%{</span><span class="p" data-group-id="4790688949-37">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-38">%{</span><span class="p" data-group-id="4790688949-38">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-34">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-39">#</span><span class="nc" data-group-id="4790688949-39">Comment</span><span class="p" data-group-id="4790688949-39">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-40">#</span><span class="nc" data-group-id="4790688949-40">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-40">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-40">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-41">#</span><span class="nc" data-group-id="4790688949-41">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-41">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-41">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a5107151-5519-4925-ab73-aef75274cd4a&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.030176Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-42">%{</span><span class="p" data-group-id="4790688949-42">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-43">%{</span><span class="p" data-group-id="4790688949-43">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-39">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-44">#</span><span class="nc" data-group-id="4790688949-44">Comment</span><span class="p" data-group-id="4790688949-44">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-45">#</span><span class="nc" data-group-id="4790688949-45">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-45">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-45">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-46">#</span><span class="nc" data-group-id="4790688949-46">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-46">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-46">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0d7e9835-25a0-4df9-bb41-06aa964dc677&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.031780Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-47">%{</span><span class="p" data-group-id="4790688949-47">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-48">%{</span><span class="p" data-group-id="4790688949-48">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-44">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-49">#</span><span class="nc" data-group-id="4790688949-49">Comment</span><span class="p" data-group-id="4790688949-49">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-50">#</span><span class="nc" data-group-id="4790688949-50">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-50">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-50">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-51">#</span><span class="nc" data-group-id="4790688949-51">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-51">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-51">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7c6663a8-6a36-4c9a-a947-a70436add8be&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.033389Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-52">%{</span><span class="p" data-group-id="4790688949-52">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-53">%{</span><span class="p" data-group-id="4790688949-53">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-49">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-54">#</span><span class="nc" data-group-id="4790688949-54">Comment</span><span class="p" data-group-id="4790688949-54">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-55">#</span><span class="nc" data-group-id="4790688949-55">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-55">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-55">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-56">#</span><span class="nc" data-group-id="4790688949-56">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-56">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-56">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;4a54ee7f-18fe-401b-9a86-7c768bc52a1d&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.034976Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-57">%{</span><span class="p" data-group-id="4790688949-57">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-58">%{</span><span class="p" data-group-id="4790688949-58">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-54">&gt;</span><span class="w">
    </span><span class="p" data-group-id="4790688949-33">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-59">#</span><span class="nc" data-group-id="4790688949-59">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-59">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-59">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-60">%{</span><span class="p" data-group-id="4790688949-60">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-61">%{</span><span class="p" data-group-id="4790688949-61">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="4790688949-32">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4790688949-62">#</span><span class="nc" data-group-id="4790688949-62">Post</span><span class="p" data-group-id="4790688949-62">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-63">[</span><span class="w">
      </span><span class="p" data-group-id="4790688949-64">#</span><span class="nc" data-group-id="4790688949-64">Comment</span><span class="p" data-group-id="4790688949-64">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-65">#</span><span class="nc" data-group-id="4790688949-65">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-65">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-65">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-66">#</span><span class="nc" data-group-id="4790688949-66">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-66">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-66">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;9d01f179-4220-4796-bb7d-63527385e36b&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.037470Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-67">%{</span><span class="p" data-group-id="4790688949-67">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-68">%{</span><span class="p" data-group-id="4790688949-68">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-64">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-69">#</span><span class="nc" data-group-id="4790688949-69">Comment</span><span class="p" data-group-id="4790688949-69">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-70">#</span><span class="nc" data-group-id="4790688949-70">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-70">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-70">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-71">#</span><span class="nc" data-group-id="4790688949-71">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-71">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-71">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;49b7a671-bc6f-4772-b8f8-73b2a4c75b34&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.039117Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-72">%{</span><span class="p" data-group-id="4790688949-72">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-73">%{</span><span class="p" data-group-id="4790688949-73">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-69">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-74">#</span><span class="nc" data-group-id="4790688949-74">Comment</span><span class="p" data-group-id="4790688949-74">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-75">#</span><span class="nc" data-group-id="4790688949-75">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-75">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-75">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-76">#</span><span class="nc" data-group-id="4790688949-76">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-76">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-76">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7d2ee81c-696f-4190-8d1a-45702bfaaef2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.040795Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-77">%{</span><span class="p" data-group-id="4790688949-77">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-78">%{</span><span class="p" data-group-id="4790688949-78">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-74">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-79">#</span><span class="nc" data-group-id="4790688949-79">Comment</span><span class="p" data-group-id="4790688949-79">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-80">#</span><span class="nc" data-group-id="4790688949-80">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-80">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-80">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-81">#</span><span class="nc" data-group-id="4790688949-81">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-81">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-81">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;98d80b57-b911-44f5-9a63-5db90c1a0d57&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.042457Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-82">%{</span><span class="p" data-group-id="4790688949-82">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-83">%{</span><span class="p" data-group-id="4790688949-83">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-79">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-84">#</span><span class="nc" data-group-id="4790688949-84">Comment</span><span class="p" data-group-id="4790688949-84">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-85">#</span><span class="nc" data-group-id="4790688949-85">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-85">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-85">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-86">#</span><span class="nc" data-group-id="4790688949-86">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-86">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-86">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a0f08863-ec7f-4eba-b9f5-f9d7764dc934&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.044061Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-87">%{</span><span class="p" data-group-id="4790688949-87">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-88">%{</span><span class="p" data-group-id="4790688949-88">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-84">&gt;</span><span class="w">
    </span><span class="p" data-group-id="4790688949-63">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-89">#</span><span class="nc" data-group-id="4790688949-89">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-89">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-89">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 3&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 3&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-90">%{</span><span class="p" data-group-id="4790688949-90">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-91">%{</span><span class="p" data-group-id="4790688949-91">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="4790688949-62">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4790688949-92">#</span><span class="nc" data-group-id="4790688949-92">Post</span><span class="p" data-group-id="4790688949-92">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-93">[</span><span class="w">
      </span><span class="p" data-group-id="4790688949-94">#</span><span class="nc" data-group-id="4790688949-94">Comment</span><span class="p" data-group-id="4790688949-94">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-95">#</span><span class="nc" data-group-id="4790688949-95">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-95">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-95">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-96">#</span><span class="nc" data-group-id="4790688949-96">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-96">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-96">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2a57aa5f-0431-4d7b-a054-3bf0fc6cb2e8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.046395Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-97">%{</span><span class="p" data-group-id="4790688949-97">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-98">%{</span><span class="p" data-group-id="4790688949-98">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-94">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-99">#</span><span class="nc" data-group-id="4790688949-99">Comment</span><span class="p" data-group-id="4790688949-99">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-100">#</span><span class="nc" data-group-id="4790688949-100">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-100">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-100">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-101">#</span><span class="nc" data-group-id="4790688949-101">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-101">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-101">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1604094f-864e-4df3-9365-a16a77ace0ba&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.048111Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-102">%{</span><span class="p" data-group-id="4790688949-102">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-103">%{</span><span class="p" data-group-id="4790688949-103">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-99">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-104">#</span><span class="nc" data-group-id="4790688949-104">Comment</span><span class="p" data-group-id="4790688949-104">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-105">#</span><span class="nc" data-group-id="4790688949-105">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-105">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-105">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-106">#</span><span class="nc" data-group-id="4790688949-106">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-106">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-106">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6153ecb4-4668-4afb-94c8-b1e57ed1a187&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.049749Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-107">%{</span><span class="p" data-group-id="4790688949-107">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-108">%{</span><span class="p" data-group-id="4790688949-108">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-104">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-109">#</span><span class="nc" data-group-id="4790688949-109">Comment</span><span class="p" data-group-id="4790688949-109">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-110">#</span><span class="nc" data-group-id="4790688949-110">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-110">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-110">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-111">#</span><span class="nc" data-group-id="4790688949-111">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-111">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-111">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;0844db43-39f7-41c3-aa74-41238b0882c9&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.051385Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-112">%{</span><span class="p" data-group-id="4790688949-112">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-113">%{</span><span class="p" data-group-id="4790688949-113">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-109">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-114">#</span><span class="nc" data-group-id="4790688949-114">Comment</span><span class="p" data-group-id="4790688949-114">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-115">#</span><span class="nc" data-group-id="4790688949-115">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-115">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-115">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-116">#</span><span class="nc" data-group-id="4790688949-116">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-116">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-116">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b22db803-cad0-4d90-ada1-944f0abdd304&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.053563Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-117">%{</span><span class="p" data-group-id="4790688949-117">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-118">%{</span><span class="p" data-group-id="4790688949-118">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-114">&gt;</span><span class="w">
    </span><span class="p" data-group-id="4790688949-93">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-119">#</span><span class="nc" data-group-id="4790688949-119">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-119">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-119">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 4&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 4&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-120">%{</span><span class="p" data-group-id="4790688949-120">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-121">%{</span><span class="p" data-group-id="4790688949-121">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="4790688949-92">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4790688949-122">#</span><span class="nc" data-group-id="4790688949-122">Post</span><span class="p" data-group-id="4790688949-122">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-123">[</span><span class="w">
      </span><span class="p" data-group-id="4790688949-124">#</span><span class="nc" data-group-id="4790688949-124">Comment</span><span class="p" data-group-id="4790688949-124">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-125">#</span><span class="nc" data-group-id="4790688949-125">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-125">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-125">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-126">#</span><span class="nc" data-group-id="4790688949-126">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-126">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-126">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;7b5fc51b-8e68-441e-bcd0-e52a0158e779&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.056055Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-127">%{</span><span class="p" data-group-id="4790688949-127">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-128">%{</span><span class="p" data-group-id="4790688949-128">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-124">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-129">#</span><span class="nc" data-group-id="4790688949-129">Comment</span><span class="p" data-group-id="4790688949-129">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-130">#</span><span class="nc" data-group-id="4790688949-130">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-130">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-130">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-131">#</span><span class="nc" data-group-id="4790688949-131">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-131">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-131">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;e3f01413-c79c-44ef-abd9-6cb27a3b31fc&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.057708Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-132">%{</span><span class="p" data-group-id="4790688949-132">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-133">%{</span><span class="p" data-group-id="4790688949-133">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-129">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-134">#</span><span class="nc" data-group-id="4790688949-134">Comment</span><span class="p" data-group-id="4790688949-134">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-135">#</span><span class="nc" data-group-id="4790688949-135">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-135">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-135">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-136">#</span><span class="nc" data-group-id="4790688949-136">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-136">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-136">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a461c559-5036-4113-93be-3f531af4d2f3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.059418Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-137">%{</span><span class="p" data-group-id="4790688949-137">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-138">%{</span><span class="p" data-group-id="4790688949-138">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-134">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-139">#</span><span class="nc" data-group-id="4790688949-139">Comment</span><span class="p" data-group-id="4790688949-139">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-140">#</span><span class="nc" data-group-id="4790688949-140">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-140">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-140">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-141">#</span><span class="nc" data-group-id="4790688949-141">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-141">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-141">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;a704a781-3ff2-479c-b428-d8a414223f00&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.061034Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-142">%{</span><span class="p" data-group-id="4790688949-142">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-143">%{</span><span class="p" data-group-id="4790688949-143">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-139">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="4790688949-144">#</span><span class="nc" data-group-id="4790688949-144">Comment</span><span class="p" data-group-id="4790688949-144">&lt;</span><span class="w">
        </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-145">#</span><span class="nc" data-group-id="4790688949-145">Ash.NotLoaded</span><span class="p" data-group-id="4790688949-145">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="4790688949-145">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-146">#</span><span class="nc" data-group-id="4790688949-146">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-146">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-146">&gt;</span><span class="p">,</span><span class="w">
        </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;2d9e9279-ef21-4dd4-bdc6-adc3597fefb2&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 5&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.062631Z]</span><span class="p">,</span><span class="w">
        </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
        </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-147">%{</span><span class="p" data-group-id="4790688949-147">}</span><span class="p">,</span><span class="w">
        </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-148">%{</span><span class="p" data-group-id="4790688949-148">}</span><span class="p">,</span><span class="w">
        </span><span class="n">...</span><span class="w">
      </span><span class="p" data-group-id="4790688949-144">&gt;</span><span class="w">
    </span><span class="p" data-group-id="4790688949-123">]</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-149">#</span><span class="nc" data-group-id="4790688949-149">Ecto.Schema.Metadata</span><span class="p" data-group-id="4790688949-149">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4790688949-149">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 5&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 5&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-150">%{</span><span class="p" data-group-id="4790688949-150">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4790688949-151">%{</span><span class="p" data-group-id="4790688949-151">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="4790688949-122">&gt;</span><span class="w">
</span><span class="p" data-group-id="4790688949-1">]</span></code></pre><h2 id="offset-pagination-1" class="section-heading">
  <a href="#offset-pagination-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Offset pagination</span>
</h2>
<p>When using offset pagination, a <code class="inline">%Ash.Page.Offset{}</code> struct is returned from read actions.</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="2011022314-1">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2011022314-2">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="2011022314-2">]</span><span class="p" data-group-id="2011022314-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="5137756673-1">%</span><span class="nc" data-group-id="5137756673-1">Ash.Page.Offset</span><span class="p" data-group-id="5137756673-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-2">[</span><span class="w">
    </span><span class="p" data-group-id="5137756673-3">#</span><span class="nc" data-group-id="5137756673-3">Post</span><span class="p" data-group-id="5137756673-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-4">#</span><span class="nc" data-group-id="5137756673-4">Ash.NotLoaded</span><span class="p" data-group-id="5137756673-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="5137756673-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-5">#</span><span class="nc" data-group-id="5137756673-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="5137756673-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5137756673-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-6">%{</span><span class="p" data-group-id="5137756673-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-7">%{</span><span class="p" data-group-id="5137756673-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="5137756673-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="5137756673-8">#</span><span class="nc" data-group-id="5137756673-8">Post</span><span class="p" data-group-id="5137756673-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-9">#</span><span class="nc" data-group-id="5137756673-9">Ash.NotLoaded</span><span class="p" data-group-id="5137756673-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="5137756673-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-10">#</span><span class="nc" data-group-id="5137756673-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="5137756673-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="5137756673-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-11">%{</span><span class="p" data-group-id="5137756673-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-12">%{</span><span class="p" data-group-id="5137756673-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="5137756673-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="5137756673-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-13">{</span><span class="p" data-group-id="5137756673-14">#</span><span class="nc" data-group-id="5137756673-14">Ash.Query</span><span class="p" data-group-id="5137756673-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="5137756673-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="5137756673-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5137756673-17">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="5137756673-17">]</span><span class="w">
   </span><span class="p" data-group-id="5137756673-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5137756673-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="5137756673-18">]</span><span class="p" data-group-id="5137756673-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="5137756673-1">}</span></code></pre><p>You can find the results in the <code class="inline">results</code> field of the page</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="o">.</span><span class="n">results</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="0627281346-1">[</span><span class="w">
  </span><span class="p" data-group-id="0627281346-2">#</span><span class="nc" data-group-id="0627281346-2">Post</span><span class="p" data-group-id="0627281346-2">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0627281346-3">#</span><span class="nc" data-group-id="0627281346-3">Ash.NotLoaded</span><span class="p" data-group-id="0627281346-3">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="0627281346-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0627281346-4">#</span><span class="nc" data-group-id="0627281346-4">Ecto.Schema.Metadata</span><span class="p" data-group-id="0627281346-4">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="0627281346-4">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0627281346-5">%{</span><span class="p" data-group-id="0627281346-5">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0627281346-6">%{</span><span class="p" data-group-id="0627281346-6">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="0627281346-2">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="0627281346-7">#</span><span class="nc" data-group-id="0627281346-7">Post</span><span class="p" data-group-id="0627281346-7">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0627281346-8">#</span><span class="nc" data-group-id="0627281346-8">Ash.NotLoaded</span><span class="p" data-group-id="0627281346-8">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="0627281346-8">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0627281346-9">#</span><span class="nc" data-group-id="0627281346-9">Ecto.Schema.Metadata</span><span class="p" data-group-id="0627281346-9">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="0627281346-9">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0627281346-10">%{</span><span class="p" data-group-id="0627281346-10">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="0627281346-11">%{</span><span class="p" data-group-id="0627281346-11">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="0627281346-7">&gt;</span><span class="w">
</span><span class="p" data-group-id="0627281346-1">]</span></code></pre><p>The <code class="inline">more?</code> field contains a boolean indicating if there are more pages available</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="o">.</span><span class="n">more?</span></code></pre><pre><code class="makeup output" translate="no"><span class="no">true</span></code></pre><h3 id="retrieving-the-next-page" class="section-heading">
  <a href="#retrieving-the-next-page" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Retrieving the next page</span>
</h3>
<p>You can calculate the next offset with the information available in the page and pass it in the page options to retrieve the following page</p><pre><code class="makeup elixir" translate="no"><span class="n">next_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">page</span><span class="o">.</span><span class="n">offset</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">page</span><span class="o">.</span><span class="n">limit</span><span class="w">
</span><span class="n">second_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="2034522241-1">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2034522241-2">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="n">next_offset</span><span class="p" data-group-id="2034522241-2">]</span><span class="p" data-group-id="2034522241-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="9770045662-1">%</span><span class="nc" data-group-id="9770045662-1">Ash.Page.Offset</span><span class="p" data-group-id="9770045662-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-2">[</span><span class="w">
    </span><span class="p" data-group-id="9770045662-3">#</span><span class="nc" data-group-id="9770045662-3">Post</span><span class="p" data-group-id="9770045662-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-4">#</span><span class="nc" data-group-id="9770045662-4">Ash.NotLoaded</span><span class="p" data-group-id="9770045662-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="9770045662-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-5">#</span><span class="nc" data-group-id="9770045662-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="9770045662-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="9770045662-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-6">%{</span><span class="p" data-group-id="9770045662-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-7">%{</span><span class="p" data-group-id="9770045662-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="9770045662-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="9770045662-8">#</span><span class="nc" data-group-id="9770045662-8">Post</span><span class="p" data-group-id="9770045662-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-9">#</span><span class="nc" data-group-id="9770045662-9">Ash.NotLoaded</span><span class="p" data-group-id="9770045662-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="9770045662-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-10">#</span><span class="nc" data-group-id="9770045662-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="9770045662-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="9770045662-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-11">%{</span><span class="p" data-group-id="9770045662-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-12">%{</span><span class="p" data-group-id="9770045662-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="9770045662-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="9770045662-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-13">{</span><span class="p" data-group-id="9770045662-14">#</span><span class="nc" data-group-id="9770045662-14">Ash.Query</span><span class="p" data-group-id="9770045662-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="9770045662-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="9770045662-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9770045662-17">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="9770045662-17">]</span><span class="w">
   </span><span class="p" data-group-id="9770045662-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9770045662-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9770045662-18">]</span><span class="p" data-group-id="9770045662-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="9770045662-1">}</span></code></pre><p>If you have the current page in memory, you can also use <a href="Ash.html#page!/2"><code class="inline">Ash.page!/2</code></a> to navigate between pages.</p><pre><code class="makeup elixir" translate="no"><span class="n">last_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash</span><span class="o">.</span><span class="n">page!</span><span class="p" data-group-id="3035327137-1">(</span><span class="n">second_page</span><span class="p">,</span><span class="w"> </span><span class="ss">:next</span><span class="p" data-group-id="3035327137-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="8360187636-1">%</span><span class="nc" data-group-id="8360187636-1">Ash.Page.Offset</span><span class="p" data-group-id="8360187636-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8360187636-2">[</span><span class="w">
    </span><span class="p" data-group-id="8360187636-3">#</span><span class="nc" data-group-id="8360187636-3">Post</span><span class="p" data-group-id="8360187636-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8360187636-4">#</span><span class="nc" data-group-id="8360187636-4">Ash.NotLoaded</span><span class="p" data-group-id="8360187636-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="8360187636-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8360187636-5">#</span><span class="nc" data-group-id="8360187636-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="8360187636-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="8360187636-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;b0b20225-17f0-4bd1-8bd1-681e63ee26a8&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 5&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 5&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8360187636-6">%{</span><span class="p" data-group-id="8360187636-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8360187636-7">%{</span><span class="p" data-group-id="8360187636-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="8360187636-3">&gt;</span><span class="w">
  </span><span class="p" data-group-id="8360187636-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8360187636-8">{</span><span class="p" data-group-id="8360187636-9">#</span><span class="nc" data-group-id="8360187636-9">Ash.Query</span><span class="p" data-group-id="8360187636-9">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8360187636-10">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="8360187636-10">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8360187636-11">[</span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="8360187636-11">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8360187636-12">[</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8360187636-12">]</span><span class="w">
   </span><span class="p" data-group-id="8360187636-9">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8360187636-13">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="8360187636-13">]</span><span class="p" data-group-id="8360187636-8">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
</span><span class="p" data-group-id="8360187636-1">}</span></code></pre><p>And since we had 5 posts, this should be the last page:</p><pre><code class="makeup elixir" translate="no"><span class="n">last_page</span><span class="o">.</span><span class="n">more?</span></code></pre><pre><code class="makeup output" translate="no"><span class="no">false</span></code></pre><h3 id="keyset-pagination-1" class="section-heading">
  <a href="#keyset-pagination-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Keyset pagination</span>
</h3>
<p>When using keyset pagination, a <code class="inline">%Ash.Page.Keyset{}</code> struct is returned from read actions.</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts_with_keyset!</span><span class="p" data-group-id="8621908754-1">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8621908754-2">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8621908754-2">]</span><span class="p" data-group-id="8621908754-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="1892139810-1">%</span><span class="nc" data-group-id="1892139810-1">Ash.Page.Keyset</span><span class="p" data-group-id="1892139810-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-2">[</span><span class="w">
    </span><span class="p" data-group-id="1892139810-3">#</span><span class="nc" data-group-id="1892139810-3">Post</span><span class="p" data-group-id="1892139810-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-4">#</span><span class="nc" data-group-id="1892139810-4">Ash.NotLoaded</span><span class="p" data-group-id="1892139810-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="1892139810-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-5">#</span><span class="nc" data-group-id="1892139810-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="1892139810-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1892139810-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-6">%{</span><span class="p" data-group-id="1892139810-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-7">%{</span><span class="p" data-group-id="1892139810-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1892139810-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="1892139810-8">#</span><span class="nc" data-group-id="1892139810-8">Post</span><span class="p" data-group-id="1892139810-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-9">#</span><span class="nc" data-group-id="1892139810-9">Ash.NotLoaded</span><span class="p" data-group-id="1892139810-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="1892139810-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-10">#</span><span class="nc" data-group-id="1892139810-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="1892139810-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1892139810-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-11">%{</span><span class="p" data-group-id="1892139810-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-12">%{</span><span class="p" data-group-id="1892139810-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1892139810-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="1892139810-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">before</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-13">{</span><span class="p" data-group-id="1892139810-14">#</span><span class="nc" data-group-id="1892139810-14">Ash.Query</span><span class="p" data-group-id="1892139810-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="1892139810-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="1892139810-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1892139810-17">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1892139810-17">]</span><span class="w">
   </span><span class="p" data-group-id="1892139810-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1892139810-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1892139810-18">]</span><span class="p" data-group-id="1892139810-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="1892139810-1">}</span></code></pre><p><code class="inline">results</code> and <code class="inline">more?</code> work in the same way as offset pagination</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="o">.</span><span class="n">results</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="4348849673-1">[</span><span class="w">
  </span><span class="p" data-group-id="4348849673-2">#</span><span class="nc" data-group-id="4348849673-2">Post</span><span class="p" data-group-id="4348849673-2">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4348849673-3">#</span><span class="nc" data-group-id="4348849673-3">Ash.NotLoaded</span><span class="p" data-group-id="4348849673-3">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="4348849673-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4348849673-4">#</span><span class="nc" data-group-id="4348849673-4">Ecto.Schema.Metadata</span><span class="p" data-group-id="4348849673-4">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4348849673-4">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4348849673-5">%{</span><span class="p" data-group-id="4348849673-5">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4348849673-6">%{</span><span class="p" data-group-id="4348849673-6">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="4348849673-2">&gt;</span><span class="p">,</span><span class="w">
  </span><span class="p" data-group-id="4348849673-7">#</span><span class="nc" data-group-id="4348849673-7">Post</span><span class="p" data-group-id="4348849673-7">&lt;</span><span class="w">
    </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4348849673-8">#</span><span class="nc" data-group-id="4348849673-8">Ash.NotLoaded</span><span class="p" data-group-id="4348849673-8">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="4348849673-8">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4348849673-9">#</span><span class="nc" data-group-id="4348849673-9">Ecto.Schema.Metadata</span><span class="p" data-group-id="4348849673-9">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4348849673-9">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;78cd10f0-a509-4602-861f-24652c68d54b&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 2&quot;</span><span class="p">,</span><span class="w">
    </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4348849673-10">%{</span><span class="p" data-group-id="4348849673-10">}</span><span class="p">,</span><span class="w">
    </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4348849673-11">%{</span><span class="p" data-group-id="4348849673-11">}</span><span class="p">,</span><span class="w">
    </span><span class="n">...</span><span class="w">
  </span><span class="p" data-group-id="4348849673-7">&gt;</span><span class="w">
</span><span class="p" data-group-id="4348849673-1">]</span></code></pre><h3 id="retrieving-the-next-page-1" class="section-heading">
  <a href="#retrieving-the-next-page-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Retrieving the next page</span>
</h3>
<p>To retrieve the next page, you have to pass the keyset of the last record in the current page. The keyset is stored in <code class="inline">record.__metadata__.keyset</code>.</p><pre><code class="makeup elixir" translate="no"><span class="n">last_keyset</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="n">page</span><span class="o">.</span><span class="n">results</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">last</span><span class="p" data-group-id="3835523855-1">(</span><span class="p" data-group-id="3835523855-1">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="3835523855-2">(</span><span class="ss">:__metadata__</span><span class="p" data-group-id="3835523855-2">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">get</span><span class="p" data-group-id="3835523855-3">(</span><span class="ss">:keyset</span><span class="p" data-group-id="3835523855-3">)</span><span class="w">

</span><span class="n">second_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts_with_keyset!</span><span class="p" data-group-id="3835523855-4">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3835523855-5">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="n">last_keyset</span><span class="p" data-group-id="3835523855-5">]</span><span class="p" data-group-id="3835523855-4">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="1551524920-1">%</span><span class="nc" data-group-id="1551524920-1">Ash.Page.Keyset</span><span class="p" data-group-id="1551524920-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-2">[</span><span class="w">
    </span><span class="p" data-group-id="1551524920-3">#</span><span class="nc" data-group-id="1551524920-3">Post</span><span class="p" data-group-id="1551524920-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-4">#</span><span class="nc" data-group-id="1551524920-4">Ash.NotLoaded</span><span class="p" data-group-id="1551524920-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="1551524920-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-5">#</span><span class="nc" data-group-id="1551524920-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="1551524920-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1551524920-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-6">%{</span><span class="p" data-group-id="1551524920-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-7">%{</span><span class="p" data-group-id="1551524920-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1551524920-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="1551524920-8">#</span><span class="nc" data-group-id="1551524920-8">Post</span><span class="p" data-group-id="1551524920-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-9">#</span><span class="nc" data-group-id="1551524920-9">Ash.NotLoaded</span><span class="p" data-group-id="1551524920-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="1551524920-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-10">#</span><span class="nc" data-group-id="1551524920-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="1551524920-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="1551524920-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-11">%{</span><span class="p" data-group-id="1551524920-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-12">%{</span><span class="p" data-group-id="1551524920-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="1551524920-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="1551524920-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">before</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g2wAAAACbQAAAAZwb3N0IDJtAAAAJDc4Y2QxMGYwLWE1MDktNDYwMi04NjFmLTI0NjUyYzY4ZDU0Ymo=&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-13">{</span><span class="p" data-group-id="1551524920-14">#</span><span class="nc" data-group-id="1551524920-14">Ash.Query</span><span class="p" data-group-id="1551524920-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="1551524920-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="1551524920-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1551524920-17">[</span><span class="w">
       </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
       </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g2wAAAACbQAAAAZwb3N0IDJtAAAAJDc4Y2QxMGYwLWE1MDktNDYwMi04NjFmLTI0NjUyYzY4ZDU0Ymo=&quot;</span><span class="w">
     </span><span class="p" data-group-id="1551524920-17">]</span><span class="w">
   </span><span class="p" data-group-id="1551524920-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1551524920-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1551524920-18">]</span><span class="p" data-group-id="1551524920-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="1551524920-1">}</span></code></pre><p><a href="Ash.html#page!/2"><code class="inline">Ash.page!/2</code></a> works with keyset pagination too</p><pre><code class="makeup elixir" translate="no"><span class="n">last_page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash</span><span class="o">.</span><span class="n">page!</span><span class="p" data-group-id="4503865792-1">(</span><span class="n">second_page</span><span class="p">,</span><span class="w"> </span><span class="ss">:next</span><span class="p" data-group-id="4503865792-1">)</span><span class="w">

</span><span class="n">last_page</span><span class="o">.</span><span class="n">more?</span></code></pre><pre><code class="makeup output" translate="no"><span class="no">false</span></code></pre><h3 id="actions-supporting-both-offset-and-keyset-pagination" class="section-heading">
  <a href="#actions-supporting-both-offset-and-keyset-pagination" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Actions supporting both offset and keyset pagination</span>
</h3>
<p>If an action supports both offset and keyset pagination (e.g. default read actions), offset pagination is used by default when page options only contain <code class="inline">limit</code>. However, the records will have the keyset in the metadata, so keyset pagination can be performed on next pages.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="6860805502-1">%</span><span class="nc" data-group-id="6860805502-1">Ash.Page.Offset</span><span class="p" data-group-id="6860805502-1">{</span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6860805502-2">[</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">last</span><span class="p" data-group-id="6860805502-2">]</span><span class="p" data-group-id="6860805502-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="6860805502-3">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6860805502-4">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="6860805502-4">]</span><span class="p" data-group-id="6860805502-3">)</span><span class="w">

</span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="6860805502-5">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6860805502-6">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="n">last</span><span class="o">.</span><span class="c">__metadata__</span><span class="o">.</span><span class="n">keyset</span><span class="p" data-group-id="6860805502-6">]</span><span class="p" data-group-id="6860805502-5">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="4781120284-1">%</span><span class="nc" data-group-id="4781120284-1">Ash.Page.Keyset</span><span class="p" data-group-id="4781120284-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-2">[</span><span class="w">
    </span><span class="p" data-group-id="4781120284-3">#</span><span class="nc" data-group-id="4781120284-3">Post</span><span class="p" data-group-id="4781120284-3">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-4">#</span><span class="nc" data-group-id="4781120284-4">Ash.NotLoaded</span><span class="p" data-group-id="4781120284-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="4781120284-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-5">#</span><span class="nc" data-group-id="4781120284-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="4781120284-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4781120284-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;ab8e9909-2a6c-42d7-bae9-09fad4356ea4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-6">%{</span><span class="p" data-group-id="4781120284-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-7">%{</span><span class="p" data-group-id="4781120284-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="4781120284-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="4781120284-8">#</span><span class="nc" data-group-id="4781120284-8">Post</span><span class="p" data-group-id="4781120284-8">&lt;</span><span class="w">
      </span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-9">#</span><span class="nc" data-group-id="4781120284-9">Ash.NotLoaded</span><span class="p" data-group-id="4781120284-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:comments</span><span class="p" data-group-id="4781120284-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-10">#</span><span class="nc" data-group-id="4781120284-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="4781120284-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="4781120284-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;91d639c2-4a2c-4931-b446-543e118644f1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;post 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;text 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-11">%{</span><span class="p" data-group-id="4781120284-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-12">%{</span><span class="p" data-group-id="4781120284-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="4781120284-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="4781120284-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">before</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g2wAAAACbQAAAAZwb3N0IDJtAAAAJDc4Y2QxMGYwLWE1MDktNDYwMi04NjFmLTI0NjUyYzY4ZDU0Ymo=&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-13">{</span><span class="p" data-group-id="4781120284-14">#</span><span class="nc" data-group-id="4781120284-14">Ash.Query</span><span class="p" data-group-id="4781120284-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-15">[</span><span class="ss">title</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="4781120284-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:title</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p" data-group-id="4781120284-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4781120284-17">[</span><span class="w">
       </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
       </span><span class="ss">after</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;g2wAAAACbQAAAAZwb3N0IDJtAAAAJDc4Y2QxMGYwLWE1MDktNDYwMi04NjFmLTI0NjUyYzY4ZDU0Ymo=&quot;</span><span class="w">
     </span><span class="p" data-group-id="4781120284-17">]</span><span class="w">
   </span><span class="p" data-group-id="4781120284-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4781120284-18">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="4781120284-18">]</span><span class="p" data-group-id="4781120284-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="4781120284-1">}</span></code></pre><h3 id="retrieving-count" class="section-heading">
  <a href="#retrieving-count" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Retrieving count</span>
</h3>
<p>Both <code class="inline">%Ash.Page.Offset{}</code> and <code class="inline">%Ash.Page.Keyset{}</code> have a <code class="inline">count</code> field that contains the total count of the items that are being paginated when <code class="inline">count: true</code> is passed in the page options.</p><pre><code class="makeup elixir" translate="no"><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="8208354349-1">(</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8208354349-2">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="8208354349-2">]</span><span class="p" data-group-id="8208354349-1">)</span><span class="w">

</span><span class="n">page</span><span class="o">.</span><span class="n">count</span></code></pre><pre><code class="makeup output" translate="no"><span class="mi">5</span></code></pre><h3 id="relationship-pagination-1" class="section-heading">
  <a href="#relationship-pagination-1" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Relationship pagination</span>
</h3>
<p>To paginate a relationship, pass a query customized with the page options to the load statement. This works both on paginated and unpaginated root data, and relationships can load arbitrarily nested paginated relationships.</p><pre><code class="makeup elixir" translate="no"><span class="n">paginated_comments</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">Comment</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">page</span><span class="p" data-group-id="1691777671-1">(</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1691777671-1">)</span><span class="w">

</span><span class="n">first_post</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="nc">Domain</span><span class="o">.</span><span class="n">list_posts!</span><span class="p" data-group-id="1691777671-2">(</span><span class="ss">load</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1691777671-3">[</span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="n">paginated_comments</span><span class="p" data-group-id="1691777671-3">]</span><span class="p" data-group-id="1691777671-2">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">first</span><span class="p" data-group-id="1691777671-4">(</span><span class="p" data-group-id="1691777671-4">)</span><span class="w">

</span><span class="n">first_post</span><span class="o">.</span><span class="n">comments</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="3991304701-1">%</span><span class="nc" data-group-id="3991304701-1">Ash.Page.Offset</span><span class="p" data-group-id="3991304701-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-2">[</span><span class="w">
    </span><span class="p" data-group-id="3991304701-3">#</span><span class="nc" data-group-id="3991304701-3">Comment</span><span class="p" data-group-id="3991304701-3">&lt;</span><span class="w">
      </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-4">#</span><span class="nc" data-group-id="3991304701-4">Ash.NotLoaded</span><span class="p" data-group-id="3991304701-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="3991304701-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-5">#</span><span class="nc" data-group-id="3991304701-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="3991304701-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="3991304701-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6cdea87b-cb69-4dc5-9ff3-54fb46bd70b0&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 1&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.013913Z]</span><span class="p">,</span><span class="w">
      </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-6">%{</span><span class="p" data-group-id="3991304701-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-7">%{</span><span class="p" data-group-id="3991304701-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="3991304701-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="3991304701-8">#</span><span class="nc" data-group-id="3991304701-8">Comment</span><span class="p" data-group-id="3991304701-8">&lt;</span><span class="w">
      </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-9">#</span><span class="nc" data-group-id="3991304701-9">Ash.NotLoaded</span><span class="p" data-group-id="3991304701-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="3991304701-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-10">#</span><span class="nc" data-group-id="3991304701-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="3991304701-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="3991304701-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;c653e92c-fe2f-4011-84c8-ace28ebbb207&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 2&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.021204Z]</span><span class="p">,</span><span class="w">
      </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-11">%{</span><span class="p" data-group-id="3991304701-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-12">%{</span><span class="p" data-group-id="3991304701-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="3991304701-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="3991304701-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-13">{</span><span class="p" data-group-id="3991304701-14">#</span><span class="nc" data-group-id="3991304701-14">Ash.Query</span><span class="p" data-group-id="3991304701-14">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Comment</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-15">[</span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="3991304701-15">]</span><span class="p">,</span><span class="w"> </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-16">[</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="3991304701-16">]</span><span class="p" data-group-id="3991304701-14">&gt;</span><span class="p">,</span><span class="w">
   </span><span class="p" data-group-id="3991304701-17">[</span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">actor</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">tracer</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3991304701-18">[</span><span class="p" data-group-id="3991304701-18">]</span><span class="p" data-group-id="3991304701-17">]</span><span class="p" data-group-id="3991304701-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="3991304701-1">}</span></code></pre><p>You can use all the methods describe above to navigate relationship pages and retrieve their count</p><pre><code class="makeup elixir" translate="no"><span class="n">second</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash</span><span class="o">.</span><span class="n">page!</span><span class="p" data-group-id="5278660872-1">(</span><span class="n">first_post</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span><span class="w"> </span><span class="ss">:next</span><span class="p" data-group-id="5278660872-1">)</span></code></pre><pre><code class="makeup output" translate="no"><span class="p" data-group-id="8764982583-1">%</span><span class="nc" data-group-id="8764982583-1">Ash.Page.Offset</span><span class="p" data-group-id="8764982583-1">{</span><span class="w">
  </span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-2">[</span><span class="w">
    </span><span class="p" data-group-id="8764982583-3">#</span><span class="nc" data-group-id="8764982583-3">Comment</span><span class="p" data-group-id="8764982583-3">&lt;</span><span class="w">
      </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-4">#</span><span class="nc" data-group-id="8764982583-4">Ash.NotLoaded</span><span class="p" data-group-id="8764982583-4">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="8764982583-4">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-5">#</span><span class="nc" data-group-id="8764982583-5">Ecto.Schema.Metadata</span><span class="p" data-group-id="8764982583-5">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="8764982583-5">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;aa207735-0a02-4b51-b5f6-69564a2a6365&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 3&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.022890Z]</span><span class="p">,</span><span class="w">
      </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-6">%{</span><span class="p" data-group-id="8764982583-6">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-7">%{</span><span class="p" data-group-id="8764982583-7">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="8764982583-3">&gt;</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="8764982583-8">#</span><span class="nc" data-group-id="8764982583-8">Comment</span><span class="p" data-group-id="8764982583-8">&lt;</span><span class="w">
      </span><span class="ss">post</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-9">#</span><span class="nc" data-group-id="8764982583-9">Ash.NotLoaded</span><span class="p" data-group-id="8764982583-9">&lt;</span><span class="ss">:relationship</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="ss">:post</span><span class="p" data-group-id="8764982583-9">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">__meta__</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-10">#</span><span class="nc" data-group-id="8764982583-10">Ecto.Schema.Metadata</span><span class="p" data-group-id="8764982583-10">&lt;</span><span class="ss">:loaded</span><span class="p" data-group-id="8764982583-10">&gt;</span><span class="p">,</span><span class="w">
      </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;09f9cdfe-5a88-4f6a-a8d9-2f8aa312efb8&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">text</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;comment 4&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ld">~U[2024-05-28 21:32:59.024526Z]</span><span class="p">,</span><span class="w">
      </span><span class="ss">post_id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;6eb22ea7-184c-4cae-9054-0d1a0474db61&quot;</span><span class="p">,</span><span class="w">
      </span><span class="ss">aggregates</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-11">%{</span><span class="p" data-group-id="8764982583-11">}</span><span class="p">,</span><span class="w">
      </span><span class="ss">calculations</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-12">%{</span><span class="p" data-group-id="8764982583-12">}</span><span class="p">,</span><span class="w">
      </span><span class="n">...</span><span class="w">
    </span><span class="p" data-group-id="8764982583-8">&gt;</span><span class="w">
  </span><span class="p" data-group-id="8764982583-2">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">rerun</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-13">{</span><span class="p" data-group-id="8764982583-14">#</span><span class="nc" data-group-id="8764982583-14">Ash.Query</span><span class="p" data-group-id="8764982583-14">&lt;</span><span class="w">
     </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Comment</span><span class="p">,</span><span class="w">
     </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-15">[</span><span class="ss">created_at</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="8764982583-15">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">select</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-16">[</span><span class="ss">:id</span><span class="p">,</span><span class="w"> </span><span class="ss">:text</span><span class="p">,</span><span class="w"> </span><span class="ss">:created_at</span><span class="p">,</span><span class="w"> </span><span class="ss">:post_id</span><span class="p" data-group-id="8764982583-16">]</span><span class="p">,</span><span class="w">
     </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-17">[</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="8764982583-17">]</span><span class="w">
   </span><span class="p" data-group-id="8764982583-14">&gt;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8764982583-18">[</span><span class="ss">reuse_values?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">return_query?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">authorize?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">actor</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">tracer</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8764982583-19">[</span><span class="p" data-group-id="8764982583-19">]</span><span class="p" data-group-id="8764982583-18">]</span><span class="p" data-group-id="8764982583-13">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">more?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="p" data-group-id="8764982583-1">}</span></code></pre>
</div>

<div class="bottom-actions" id="bottom-actions">
  <div class="bottom-actions-item">

      <a href="monitoring.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Monitoring
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="timeouts.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Timeouts
        </span>
      </a>

  </div>
</div>
    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/ash/3.4.8" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/ash/3.4.8">Hex Preview</a>

              (<a href="https://preview.hex.pm/preview/ash/3.4.8/show/documentation/topics/advanced/pagination.livemd">current file</a>)

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ash.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
