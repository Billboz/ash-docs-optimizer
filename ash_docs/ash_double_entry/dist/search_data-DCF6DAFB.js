searchData={"content_type":"text/markdown","items":[{"doc":"Whether or not balances must be manually destroyed. See the getting started guide for more.","ref":"dsl-ashdoubleentry-transfer.html#transfer-destroy_balances?","title":"AshDoubleEntry.Transfer.transfer.destroy_balances?","type":"DSL"},{"doc":"Additional attributes to accept when creating a transfer","ref":"dsl-ashdoubleentry-transfer.html#transfer-create_accept","title":"AshDoubleEntry.Transfer.transfer.create_accept","type":"DSL"},{"doc":"The resource being used for balances","ref":"dsl-ashdoubleentry-transfer.html#transfer-balance_resource","title":"AshDoubleEntry.Transfer.transfer.balance_resource","type":"DSL"},{"doc":"The resource to use for account balances","ref":"dsl-ashdoubleentry-transfer.html#transfer-account_resource","title":"AshDoubleEntry.Transfer.transfer.account_resource","type":"DSL"},{"doc":"A domain to use to precheck generated identities. Required by certain data layers.","ref":"dsl-ashdoubleentry-transfer.html#transfer-pre_check_identities_with","title":"AshDoubleEntry.Transfer.transfer.pre_check_identities_with","type":"DSL"},{"doc":"","ref":"dsl-ashdoubleentry-transfer.html#transfer","title":"AshDoubleEntry.Transfer.transfer","type":"DSL"},{"doc":"Whether or not the data layer supports adding money.","ref":"dsl-ashdoubleentry-balance.html#balance-data_layer_can_add_money?","title":"AshDoubleEntry.Balance.balance.data_layer_can_add_money?","type":"DSL"},{"doc":"Whether the balance is stored as a composite type.","ref":"dsl-ashdoubleentry-balance.html#balance-money_composite_type?","title":"AshDoubleEntry.Balance.balance.money_composite_type?","type":"DSL"},{"doc":"The resource used for accounts","ref":"dsl-ashdoubleentry-balance.html#balance-account_resource","title":"AshDoubleEntry.Balance.balance.account_resource","type":"DSL"},{"doc":"The resource used for transfers","ref":"dsl-ashdoubleentry-balance.html#balance-transfer_resource","title":"AshDoubleEntry.Balance.balance.transfer_resource","type":"DSL"},{"doc":"A domain to use to precheck generated identities. Required by certain data layers.","ref":"dsl-ashdoubleentry-balance.html#balance-pre_check_identities_with","title":"AshDoubleEntry.Balance.balance.pre_check_identities_with","type":"DSL"},{"doc":"","ref":"dsl-ashdoubleentry-balance.html#balance","title":"AshDoubleEntry.Balance.balance","type":"DSL"},{"doc":"The resource used for balances","ref":"dsl-ashdoubleentry-account.html#account-balance_resource","title":"AshDoubleEntry.Account.account.balance_resource","type":"DSL"},{"doc":"The resource used for transfers","ref":"dsl-ashdoubleentry-account.html#account-transfer_resource","title":"AshDoubleEntry.Account.account.transfer_resource","type":"DSL"},{"doc":"A domain to use to precheck generated identities. Required by certain data layers.","ref":"dsl-ashdoubleentry-account.html#account-pre_check_identities_with","title":"AshDoubleEntry.Account.account.pre_check_identities_with","type":"DSL"},{"doc":"A list of extra attributes to be accepted by the open action. The `identifier` and `currency` attributes are always accepted.\n","ref":"dsl-ashdoubleentry-account.html#account-open_action_accept","title":"AshDoubleEntry.Account.account.open_action_accept","type":"DSL"},{"doc":"","ref":"dsl-ashdoubleentry-account.html#account","title":"AshDoubleEntry.Account.account","type":"DSL"},{"doc":"Introspection helpers for `AshDoubleEntry.Account`","ref":"AshDoubleEntry.Account.Info.html","title":"AshDoubleEntry.Account.Info","type":"module"},{"doc":"The resource used for balances","ref":"AshDoubleEntry.Account.Info.html#account_balance_resource/1","title":"AshDoubleEntry.Account.Info.account_balance_resource/1","type":"function"},{"doc":"The resource used for balances","ref":"AshDoubleEntry.Account.Info.html#account_balance_resource!/1","title":"AshDoubleEntry.Account.Info.account_balance_resource!/1","type":"function"},{"doc":"A list of extra attributes to be accepted by the open action. The `identifier` and `currency` attributes are always accepted.","ref":"AshDoubleEntry.Account.Info.html#account_open_action_accept/1","title":"AshDoubleEntry.Account.Info.account_open_action_accept/1","type":"function"},{"doc":"A list of extra attributes to be accepted by the open action. The `identifier` and `currency` attributes are always accepted.","ref":"AshDoubleEntry.Account.Info.html#account_open_action_accept!/1","title":"AshDoubleEntry.Account.Info.account_open_action_accept!/1","type":"function"},{"doc":"account DSL options\n\nReturns a map containing the and any configured or default values.","ref":"AshDoubleEntry.Account.Info.html#account_options/1","title":"AshDoubleEntry.Account.Info.account_options/1","type":"function"},{"doc":"A domain to use to precheck generated identities. Required by certain data layers.","ref":"AshDoubleEntry.Account.Info.html#account_pre_check_identities_with/1","title":"AshDoubleEntry.Account.Info.account_pre_check_identities_with/1","type":"function"},{"doc":"A domain to use to precheck generated identities. Required by certain data layers.","ref":"AshDoubleEntry.Account.Info.html#account_pre_check_identities_with!/1","title":"AshDoubleEntry.Account.Info.account_pre_check_identities_with!/1","type":"function"},{"doc":"The resource used for transfers","ref":"AshDoubleEntry.Account.Info.html#account_transfer_resource/1","title":"AshDoubleEntry.Account.Info.account_transfer_resource/1","type":"function"},{"doc":"The resource used for transfers","ref":"AshDoubleEntry.Account.Info.html#account_transfer_resource!/1","title":"AshDoubleEntry.Account.Info.account_transfer_resource!/1","type":"function"},{"doc":"Introspection helpers for `AshDoubleEntry.Balance`","ref":"AshDoubleEntry.Balance.Info.html","title":"AshDoubleEntry.Balance.Info","type":"module"},{"doc":"The resource used for accounts","ref":"AshDoubleEntry.Balance.Info.html#balance_account_resource/1","title":"AshDoubleEntry.Balance.Info.balance_account_resource/1","type":"function"},{"doc":"The resource used for accounts","ref":"AshDoubleEntry.Balance.Info.html#balance_account_resource!/1","title":"AshDoubleEntry.Balance.Info.balance_account_resource!/1","type":"function"},{"doc":"Whether or not the data layer supports adding money.","ref":"AshDoubleEntry.Balance.Info.html#balance_data_layer_can_add_money?/1","title":"AshDoubleEntry.Balance.Info.balance_data_layer_can_add_money?/1","type":"function"},{"doc":"Whether the balance is stored as a composite type.","ref":"AshDoubleEntry.Balance.Info.html#balance_money_composite_type?/1","title":"AshDoubleEntry.Balance.Info.balance_money_composite_type?/1","type":"function"},{"doc":"balance DSL options\n\nReturns a map containing the and any configured or default values.","ref":"AshDoubleEntry.Balance.Info.html#balance_options/1","title":"AshDoubleEntry.Balance.Info.balance_options/1","type":"function"},{"doc":"A domain to use to precheck generated identities. Required by certain data layers.","ref":"AshDoubleEntry.Balance.Info.html#balance_pre_check_identities_with/1","title":"AshDoubleEntry.Balance.Info.balance_pre_check_identities_with/1","type":"function"},{"doc":"A domain to use to precheck generated identities. Required by certain data layers.","ref":"AshDoubleEntry.Balance.Info.html#balance_pre_check_identities_with!/1","title":"AshDoubleEntry.Balance.Info.balance_pre_check_identities_with!/1","type":"function"},{"doc":"The resource used for transfers","ref":"AshDoubleEntry.Balance.Info.html#balance_transfer_resource/1","title":"AshDoubleEntry.Balance.Info.balance_transfer_resource/1","type":"function"},{"doc":"The resource used for transfers","ref":"AshDoubleEntry.Balance.Info.html#balance_transfer_resource!/1","title":"AshDoubleEntry.Balance.Info.balance_transfer_resource!/1","type":"function"},{"doc":"Introspection helpers for `AshDoubleEntry.Transfer`","ref":"AshDoubleEntry.Transfer.Info.html","title":"AshDoubleEntry.Transfer.Info","type":"module"},{"doc":"The resource to use for account balances","ref":"AshDoubleEntry.Transfer.Info.html#transfer_account_resource/1","title":"AshDoubleEntry.Transfer.Info.transfer_account_resource/1","type":"function"},{"doc":"The resource to use for account balances","ref":"AshDoubleEntry.Transfer.Info.html#transfer_account_resource!/1","title":"AshDoubleEntry.Transfer.Info.transfer_account_resource!/1","type":"function"},{"doc":"The resource being used for balances","ref":"AshDoubleEntry.Transfer.Info.html#transfer_balance_resource/1","title":"AshDoubleEntry.Transfer.Info.transfer_balance_resource/1","type":"function"},{"doc":"The resource being used for balances","ref":"AshDoubleEntry.Transfer.Info.html#transfer_balance_resource!/1","title":"AshDoubleEntry.Transfer.Info.transfer_balance_resource!/1","type":"function"},{"doc":"Additional attributes to accept when creating a transfer","ref":"AshDoubleEntry.Transfer.Info.html#transfer_create_accept/1","title":"AshDoubleEntry.Transfer.Info.transfer_create_accept/1","type":"function"},{"doc":"Additional attributes to accept when creating a transfer","ref":"AshDoubleEntry.Transfer.Info.html#transfer_create_accept!/1","title":"AshDoubleEntry.Transfer.Info.transfer_create_accept!/1","type":"function"},{"doc":"Whether or not balances must be manually destroyed. See the getting started guide for more.","ref":"AshDoubleEntry.Transfer.Info.html#transfer_destroy_balances?/1","title":"AshDoubleEntry.Transfer.Info.transfer_destroy_balances?/1","type":"function"},{"doc":"transfer DSL options\n\nReturns a map containing the and any configured or default values.","ref":"AshDoubleEntry.Transfer.Info.html#transfer_options/1","title":"AshDoubleEntry.Transfer.Info.transfer_options/1","type":"function"},{"doc":"A domain to use to precheck generated identities. Required by certain data layers.","ref":"AshDoubleEntry.Transfer.Info.html#transfer_pre_check_identities_with/1","title":"AshDoubleEntry.Transfer.Info.transfer_pre_check_identities_with/1","type":"function"},{"doc":"A domain to use to precheck generated identities. Required by certain data layers.","ref":"AshDoubleEntry.Transfer.Info.html#transfer_pre_check_identities_with!/1","title":"AshDoubleEntry.Transfer.Info.transfer_pre_check_identities_with!/1","type":"function"},{"doc":"An extension for creating a double entry ledger account. See the getting started guide for more.","ref":"AshDoubleEntry.Account.html","title":"AshDoubleEntry.Account","type":"module"},{"doc":"An extension for creating a double entry ledger balance. See the getting started guide for more.","ref":"AshDoubleEntry.Balance.html","title":"AshDoubleEntry.Balance","type":"module"},{"doc":"An extension for creating a double entry ledger transfer. See the getting started guide for more.","ref":"AshDoubleEntry.Transfer.html","title":"AshDoubleEntry.Transfer","type":"module"},{"doc":"An Ash type for ULID strings.","ref":"AshDoubleEntry.ULID.html","title":"AshDoubleEntry.ULID","type":"module"},{"doc":"Generates a binary ULID.\n\nIf a value is provided for `timestamp`, the generated ULID will be for the provided timestamp.\nOtherwise, a ULID will be generated for the current time.\n\nArguments:\n\n* `timestamp`: A Unix timestamp with millisecond precision.","ref":"AshDoubleEntry.ULID.html#bingenerate/1","title":"AshDoubleEntry.ULID.bingenerate/1","type":"function"},{"doc":"Generates a binary ULID.\n\nDo not use this for storage, only for generating comparators, i.e \"balance as of a given ulid\".\n\nIf a value is provided for `timestamp`, the generated ULID will be for the provided timestamp.\nOtherwise, a ULID will be generated for the current time.\n\nArguments:\n\n* `timestamp`: A Unix timestamp with millisecond precision.","ref":"AshDoubleEntry.ULID.html#bingenerate_last/1","title":"AshDoubleEntry.ULID.bingenerate_last/1","type":"function"},{"doc":"Casts a string to ULID.","ref":"AshDoubleEntry.ULID.html#cast_input/2","title":"AshDoubleEntry.ULID.cast_input/2","type":"function"},{"doc":"Converts a binary ULID into a Crockford Base32 encoded string.","ref":"AshDoubleEntry.ULID.html#cast_stored/2","title":"AshDoubleEntry.ULID.cast_stored/2","type":"function"},{"doc":"Converts a Crockford Base32 encoded ULID into a binary.","ref":"AshDoubleEntry.ULID.html#dump_to_native/2","title":"AshDoubleEntry.ULID.dump_to_native/2","type":"function"},{"doc":"Generates a Crockford Base32 encoded ULID.\n\nIf a value is provided for `timestamp`, the generated ULID will be for the provided timestamp.\nOtherwise, a ULID will be generated for the current time.\n\nArguments:\n\n* `timestamp`: A Unix timestamp with millisecond precision.","ref":"AshDoubleEntry.ULID.html#generate/1","title":"AshDoubleEntry.ULID.generate/1","type":"function"},{"doc":"Generates a Crockford Base32 encoded ULID, guaranteed to sort equal to or after any other ULID generated for the same timestamp.\n\nDo not use this for storage, only for generating comparators, i.e \"balance as of a given ulid\".\n\nIf a value is provided for `timestamp`, the generated ULID will be for the provided timestamp.\nOtherwise, a ULID will be generated for the current time.\n\nArguments:\n\n* `timestamp`: A Unix timestamp with millisecond precision.","ref":"AshDoubleEntry.ULID.html#generate_last/1","title":"AshDoubleEntry.ULID.generate_last/1","type":"function"},{"doc":"The underlying schema type.","ref":"AshDoubleEntry.ULID.html#storage_type/0","title":"AshDoubleEntry.ULID.storage_type/0","type":"function"},{"doc":"A hex-encoded ULID string.","ref":"AshDoubleEntry.ULID.html#t:t/0","title":"AshDoubleEntry.ULID.t/0","type":"type"},{"doc":"![Logo](https://github.com/ash-project/ash/blob/main/logos/cropped-for-header-black-text.png?raw=true#gh-light-mode-only)\n![Logo](https://github.com/ash-project/ash/blob/main/logos/cropped-for-header-white-text.png?raw=true#gh-dark-mode-only)\n\n![Elixir CI](https://github.com/ash-project/ash_double_entry/workflows/CI/badge.svg)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![Hex version badge](https://img.shields.io/hexpm/v/ash_double_entry.svg)](https://hex.pm/packages/ash_double_entry)\n[![Hexdocs badge](https://img.shields.io/badge/docs-hexdocs-purple)](https://hexdocs.pm/ash_double_entry)\n\n# AshDoubleEntry\n\nWelcome! This is the extension for building a double entry accounting system in [Ash](https://hexdocs.pm/ash). This extension provides the basic building blocks for you to extend as necessary.","ref":"readme.html","title":"Home","type":"extras"},{"doc":"- [Getting Started with AshDoubleEntry](documentation/tutorials/getting-started-with-ash-double-entry.md)","ref":"readme.html#tutorials","title":"Tutorials - Home","type":"extras"},{"doc":"- [AshDoubleEntry.Account DSL](documentation/dsls/DSL:-AshDoubleEntry.Account.md)\n- [AshDoubleEntry.Transfer DSL](documentation/dsls/DSL:-AshDoubleEntry.Transfer.md)\n- [AshDoubleEntry.Balance DSL](documentation/dsls/DSL:-AshDoubleEntry.Balance.md)","ref":"readme.html#reference","title":"Reference - Home","type":"extras"},{"doc":"# Getting Started with Ash Double Entry\n\nAsh Double Entry is implemented as a set of Ash resource extensions. You build the resources yourself, and the extensions add the attributes, relationships, actions and validations required for them to constitute a double entry system.","ref":"getting-started-with-ash-double-entry.html","title":"Getting Started with Ash Double Entry","type":"extras"},{"doc":"1. Account balances are updated automatically as transfers are introduced.\n2. Arbitrary custom validations and behavior by virtue of modifying your own resources.\n3. Transactions can be entered in the past, and all future balances are updated (and therefore validated).","ref":"getting-started-with-ash-double-entry.html#what-makes-it-special","title":"What makes it special? - Getting Started with Ash Double Entry","type":"extras"},{"doc":"","ref":"getting-started-with-ash-double-entry.html#setup","title":"Setup - Getting Started with Ash Double Entry","type":"extras"},{"doc":"Follow the setup guide for `AshMoney`. If you are using with `AshPostgres`, be sure to include the `:ex_money_sql` dependency in your `mix.exs`.","ref":"getting-started-with-ash-double-entry.html#setup-ashmoney","title":"Setup AshMoney - Getting Started with Ash Double Entry","type":"extras"},{"doc":"```elixir\n{:ash_double_entry, \"~> 1.0.3\"}\n```","ref":"getting-started-with-ash-double-entry.html#add-the-dependency","title":"Add the dependency - Getting Started with Ash Double Entry","type":"extras"},{"doc":"#### Example\n\n```elixir\ndefmodule YourApp.Ledger.Account do\n  use Ash.Resource,\n    domain: YourApp.Ledger,\n    data_layer: AshPostgres.DataLayer,\n    extensions: [AshDoubleEntry.Account]\n\n  postgres do\n    table \"accounts\"\n    repo YourApp.Repo\n  end\n\n  account do\n    # configure the other resources it will interact with\n    transfer_resource YourApp.Ledger.Transfer\n    balance_resource YourApp.Ledger.Balance\n    # accept custom attributes in the autogenerated `open` create action\n    open_action_accept [:account_number]\n  end\n\n  attributes do\n    # Add custom attributes\n    attribute :account_number, :string do\n      allow_nil? false\n    end\n  end\nend\n```\n\n#### What does this extension do?\n\n- Adds the following attributes:\n  - `:id`, a `:uuid` primary key\n  - `:currency`, a `:string` representing the currency of the account.\n  - `:inserted_at`, a `:utc_datetime_usec` timestamp\n  - `:identifier`, a `:string` and a unique identifier for the account\n- Adds the following actions:\n  - A primary read called `:read`, unless a primary read action already exists.\n  - A create action called `open`, that accepts `identifier`, `currency`, and the attributes in `open_action_accept`\n  - A read action called `:lock_accounts` that can be used to lock a list of accounts while in a transaction(for data layers that support it)\n- Adds a `has_many` relationship called `balances`, referring to all related balances of an account\n- Adds an aggregate called `balance`, referring to the latest balance as a `decimal` for that account\n- Adds the following calculations:\n- A `balance_as_of_ulid` calculation that takes an argument called `ulid`, which corresponds to a transfer id and returns the balance.\n- A `balance_as_of` calculation that takes a `utc_datetime_usec` and returns the balance as of that datetime.\n- Adds an identity called `unique_identifier` that ensures `identifier` is unique.","ref":"getting-started-with-ash-double-entry.html#define-your-account-resource","title":"Define your account resource - Getting Started with Ash Double Entry","type":"extras"},{"doc":"#### Example\n\n```elixir\ndefmodule YourApp.Ledger.Transfer do\n  use Ash.Resource,\n    domain: YourApp.Ledger,\n    data_layer: AshPostgres.DataLayer,\n    extensions: [AshDoubleEntry.Transfer]\n\n  postgres do\n    table \"transfers\"\n    repo YourApp.Repo\n  end\n\n  transfer do\n    # configure the other resources it will interact with\n    account_resource YourApp.Ledger.Account\n    balance_resource YourApp.Ledger.Balance\n\n    # you only need this if you are using `postgres`\n    # and so cannot add the `references` block shown below\n\n    # destroy_balances? true\n  end\nend\n```\n\n#### What does this extension do?\n\n- Adds the following attributes\n  - `:id`, a `AshDoubleEntry.ULID` primary key which is sortable based on the `timestamp` of the transfer.\n  - `:amount`, a `AshMoney.Types.Money` representing the amount and currency of the transfer\n  - `:timestamp`, a `:utc_datetime_usec` representing when the transfer occurred\n  - `:inserted_at`, a `:utc_datetime_usec` timestamp\n- Adds the following relationships\n  - `:from_account`, a `belongs_to` relationship of the account the transfer is from\n  - `:to_account`, a `belongs_to` relationship of the account the transfer is to\n- Adds a `:read` action called `:read_transfers` with keyset pagination enabled. Required for streaming transfers, used for validating balances.\n- Adds a change that runs on all create and update actions that reifies the balances table. It inserts a balance for the transfer, and updates any affected future balances.","ref":"getting-started-with-ash-double-entry.html#define-your-transfer-resource","title":"Define your transfer resource - Getting Started with Ash Double Entry","type":"extras"},{"doc":"#### Example\n\n```elixir\ndefmodule YourApp.Ledger.Balance do\n  use Ash.Resource,\n    domain: YourApp.Ledger,\n    data_layer: AshPostgres.DataLayer,\n    extensions: [AshDoubleEntry.Balance]\n\n  postgres do\n    table \"balances\"\n    repo YourApp.Repo\n\n    references do\n      reference :transfer, on_delete: :delete\n    end\n  end\n\n  balance do\n    # configure the other resources it will interact with\n    transfer_resource YourApp.Ledger.Transfer\n    account_resource YourApp.Ledger.Account\n  end\n\n  actions do\n    read :read do\n      primary? true\n      # configure keyset pagination for streaming\n      pagination keyset?: true, required?: false\n    end\n  end\nend\n```\n\n>","ref":"getting-started-with-ash-double-entry.html#define-your-balance-resource","title":"Define your balance resource - Getting Started with Ash Double Entry","type":"extras"},{"doc":">\n> If you are not using a data layer capable of automatic cascade\n> deletion, you must add `destroy_balances? true` to the `transfer`\n> resource! We do this with the `references` block in `ash_postgres`\n> as shown above.\n\n#### What does this extension do?\n\n- Adds the following attributes:\n  - `:id`, a `:uuid` primary key\n  - `:balance`, the balance as a decimal of the account at the time of the related transfer\n- Adds the following relationships:\n  - `:transfer` a `:belongs_to` relationship, pointing to the transfer that this balance is as of.\n  - `:account` a `:belongs_to` relationship, pointing to the account the balance is for\n- Adds the following actions:\n  - a primary read action called `:read`, if a priamry read action doesn't\n    exist\n  - configure primary read action to have keyset pagination enabled\n  - a create action caleld `:upsert_balance`, which will create or update the relevant balance, by `transfer_id` and `account_id`\n- Adds an identity that ensures that `account_id` and `transfer_id` are unique","ref":"getting-started-with-ash-double-entry.html#cascading-destroys-warning","title":"cascading destroys {: .warning} - Getting Started with Ash Double Entry","type":"extras"},{"doc":"```elixir\ndefmodule YourApp.Ledger do\n  use Ash.Domain\n\n  resources do\n    resource YourApp.Ledger.Account\n    resource YourApp.Ledger.Balance\n    resource YourApp.Ledger.Transfer\n  end\nend\n```\n\nAnd add the domain to your config\n\n`config :your_app, ash_domains: [..., YourApp.Ledger]`","ref":"getting-started-with-ash-double-entry.html#define-an-ash-domain-to-use-them-through","title":"Define an Ash domain to use them through - Getting Started with Ash Double Entry","type":"extras"},{"doc":"`mix ash_postgres.generate_migrations --name add_double_entry_ledger`","ref":"getting-started-with-ash-double-entry.html#generate-migrations","title":"Generate Migrations - Getting Started with Ash Double Entry","type":"extras"},{"doc":"`mix ash_postgres.migrate`","ref":"getting-started-with-ash-double-entry.html#run-them","title":"Run them - Getting Started with Ash Double Entry","type":"extras"},{"doc":"#### Create an account\n\n```elixir\nYourApp.Ledger.Account\n|> Ash.Changeset.for_create(:open, %{identifier: \"account_one\"})\n|> YourApp.Ledger.create!()\n```\n\n#### Create transfers between accounts\n\n```elixir\nYourApp.Ledger.Transfer\n|> Ash.Changeset.for_create(:transfer, %{\n  amount: Money.new!(20, :USD),\n  from_account_id: account_one.id,\n  to_account_id: account_two.id\n})\n|> YourApp.Ledger.create!()\n```\n\n#### Check an account's balance\n\n```elixir\nYourApp.Ledger.Account\n|> YourApp.Ledger.get!(account_id, load: :balance_as_of)\n|> Map.get(:balance_as_of)\n# => Money.new!(20, :USD)\n```","ref":"getting-started-with-ash-double-entry.html#use-them","title":"Use them - Getting Started with Ash Double Entry","type":"extras"},{"doc":"There are tons of things you can do with your resources. You can add code interfaces to give yourself a nice functional api. You can add custom attributes, aggregates, calculations, relationships, validations, changes, all the great things built into `Ash.Resource`! See the docs for more: [AshHq](https://ash-hq.org).","ref":"getting-started-with-ash-double-entry.html#what-else-can-you-do","title":"What else can you do? - Getting Started with Ash Double Entry","type":"extras"},{"doc":"<!--\nThis file was generated by Spark. Do not edit it by hand.\n-->\n# DSL: AshDoubleEntry.Account\n\nAn extension for creating a double entry ledger account. See the getting started guide for more.","ref":"dsl-ashdoubleentry-account.html","title":"DSL: AshDoubleEntry.Account","type":"extras"},{"doc":"","ref":"dsl-ashdoubleentry-account.html#account","title":"account - DSL: AshDoubleEntry.Account","type":"extras"},{"doc":"| Name | Type | Default | Docs |\n|------|------|---------|------|\n| [`transfer_resource`](#account-transfer_resource){: #account-transfer_resource .spark-required} | `module` |  | The resource used for transfers |\n| [`balance_resource`](#account-balance_resource){: #account-balance_resource .spark-required} | `module` |  | The resource used for balances |\n| [`open_action_accept`](#account-open_action_accept){: #account-open_action_accept } | `list(atom)` | `[]` | A list of extra attributes to be accepted by the open action. The `identifier` and `currency` attributes are always accepted. |\n| [`pre_check_identities_with`](#account-pre_check_identities_with){: #account-pre_check_identities_with } | `module` |  | A domain to use to precheck generated identities. Required by certain data layers. |\n\n\n\n\n\n\n\n .spark-required::after { content: \"*\"; color: red !important; }","ref":"dsl-ashdoubleentry-account.html#options","title":"Options - DSL: AshDoubleEntry.Account","type":"extras"},{"doc":"<!--\nThis file was generated by Spark. Do not edit it by hand.\n-->\n# DSL: AshDoubleEntry.Balance\n\nAn extension for creating a double entry ledger balance. See the getting started guide for more.","ref":"dsl-ashdoubleentry-balance.html","title":"DSL: AshDoubleEntry.Balance","type":"extras"},{"doc":"","ref":"dsl-ashdoubleentry-balance.html#balance","title":"balance - DSL: AshDoubleEntry.Balance","type":"extras"},{"doc":"| Name | Type | Default | Docs |\n|------|------|---------|------|\n| [`transfer_resource`](#balance-transfer_resource){: #balance-transfer_resource .spark-required} | `module` |  | The resource used for transfers |\n| [`account_resource`](#balance-account_resource){: #balance-account_resource .spark-required} | `module` |  | The resource used for accounts |\n| [`pre_check_identities_with`](#balance-pre_check_identities_with){: #balance-pre_check_identities_with } | `module` |  | A domain to use to precheck generated identities. Required by certain data layers. |\n| [`money_composite_type?`](#balance-money_composite_type?){: #balance-money_composite_type? } | `boolean` | `true` | Whether the balance is stored as a composite type. |\n| [`data_layer_can_add_money?`](#balance-data_layer_can_add_money?){: #balance-data_layer_can_add_money? } | `boolean` | `true` | Whether or not the data layer supports adding money. |\n\n\n\n\n\n\n\n .spark-required::after { content: \"*\"; color: red !important; }","ref":"dsl-ashdoubleentry-balance.html#options","title":"Options - DSL: AshDoubleEntry.Balance","type":"extras"},{"doc":"<!--\nThis file was generated by Spark. Do not edit it by hand.\n-->\n# DSL: AshDoubleEntry.Transfer\n\nAn extension for creating a double entry ledger transfer. See the getting started guide for more.","ref":"dsl-ashdoubleentry-transfer.html","title":"DSL: AshDoubleEntry.Transfer","type":"extras"},{"doc":"","ref":"dsl-ashdoubleentry-transfer.html#transfer","title":"transfer - DSL: AshDoubleEntry.Transfer","type":"extras"},{"doc":"| Name | Type | Default | Docs |\n|------|------|---------|------|\n| [`account_resource`](#transfer-account_resource){: #transfer-account_resource .spark-required} | `module` |  | The resource to use for account balances |\n| [`pre_check_identities_with`](#transfer-pre_check_identities_with){: #transfer-pre_check_identities_with } | `module` |  | A domain to use to precheck generated identities. Required by certain data layers. |\n| [`balance_resource`](#transfer-balance_resource){: #transfer-balance_resource } | `module` |  | The resource being used for balances |\n| [`create_accept`](#transfer-create_accept){: #transfer-create_accept } | `atom \\| list(atom)` | `[]` | Additional attributes to accept when creating a transfer |\n| [`destroy_balances?`](#transfer-destroy_balances?){: #transfer-destroy_balances? } | `boolean` | `false` | Whether or not balances must be manually destroyed. See the getting started guide for more. |\n\n\n\n\n\n\n\n .spark-required::after { content: \"*\"; color: red !important; }","ref":"dsl-ashdoubleentry-transfer.html#options","title":"Options - DSL: AshDoubleEntry.Transfer","type":"extras"},{"doc":"# Change Log\n\nAll notable changes to this project will be documented in this file.\nSee [Conventional Commits](Https://conventionalcommits.org) for commit guidelines.\n\n<!-- changelog -->\n\n## [v1.0.6](https://github.com/ash-project/ash_double_entry/compare/v1.0.5...v1.0.6) (2024-08-03)","ref":"changelog.html","title":"Change Log","type":"extras"},{"doc":"* properly set authorize option when updating transfers\n\n## [v1.0.5](https://github.com/ash-project/ash_double_entry/compare/v1.0.4...v1.0.5) (2024-08-03)","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"* set `authorize?` properly when creating balances\n\n## [v1.0.4](https://github.com/ash-project/ash_double_entry/compare/v1.0.3...v1.0.4) (2024-07-03)","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"* better validations around atomics","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"* allow skipping balance updates on request\n\n* don't destroy balances by default\n\n## [v1.0.3](https://github.com/ash-project/ash_double_entry/compare/v1.0.2...v1.0.3) (2024-06-23)","ref":"changelog.html#improvements","title":"Improvements: - Change Log","type":"extras"},{"doc":"* set a default for `create_accept`","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"* use a guaranteed-last ulid for `balance_as_of` calculation\n\n* accept attributes on transfer create\n\n* don't use raising variations of resource calls\n\n## [v1.0.2](https://github.com/ash-project/ash_double_entry/compare/v1.0.1...v1.0.2) (2024-06-18)","ref":"changelog.html#improvements","title":"Improvements: - Change Log","type":"extras"},{"doc":"- set context indicating that `ash_double_entry?` is performing an action\n\n## [v1.0.1](https://github.com/ash-project/ash_double_entry/compare/v1.0.0...v1.0.1) (2024-05-11)","ref":"changelog.html#improvements","title":"Improvements: - Change Log","type":"extras"},{"doc":"- [AshDoubleEntry.Balance] use `a + -b`, instead of `a - b` (which is not supported by our AshPostgresExtension)\n\n## [v1.0.0](https://github.com/ash-project/ash_double_entry/compare/v1.0.0-rc.1...v1.0.0) (2024-05-10)\n\n## [v1.0.0-rc.1](https://github.com/ash-project/ash_double_entry/compare/v1.0.0-rc.0...v1.0.0-rc.1) (2024-04-29)","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"- update to support new atomics & bulk actions\n\n## [v1.0.0-rc.0](https://github.com/ash-project/ash_double_entry/compare/v0.2.4...v1.0.0-rc.0) (2024-04-01)","ref":"changelog.html#improvements","title":"Improvements: - Change Log","type":"extras"},{"doc":"- update to Ash 3.0","ref":"changelog.html#breaking-changes","title":"Breaking Changes: - Change Log","type":"extras"},{"doc":"- correct amount_delta calculation from destorying (#13)\n\n## [v0.2.4](https://github.com/ash-project/ash_double_entry/compare/v0.2.3...v0.2.4) (2024-02-14)","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"- properly update future balances from destroys\n\n- incorrect balance when adding transfer later (#12)\n\n## [v0.2.3](https://github.com/ash-project/ash_double_entry/compare/v0.2.2...v0.2.3) (2023-12-23)","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"- make expression pure","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"- support updating transfer's amount (#8)\n\n## [v0.2.2](https://github.com/ash-project/ash_double_entry/compare/v0.2.1...v0.2.2) (2023-12-10)","ref":"changelog.html#improvements","title":"Improvements: - Change Log","type":"extras"},{"doc":"- support updating transfers, but not important fields\n\n## [v0.2.1](https://github.com/ash-project/ash_double_entry/compare/v0.2.0...v0.2.1) (2023-12-10)","ref":"changelog.html#improvements","title":"Improvements: - Change Log","type":"extras"},{"doc":"- use Money..add! For correct return\n\n- properly set context on account read in balance verification","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"- support destroying transfers\n\n- set `context_to_opts` when constructing the query\n\n## [v0.2.0](https://github.com/ash-project/ash_double_entry/compare/v0.1.2...v0.2.0) (2023-12-06)","ref":"changelog.html#improvements","title":"Improvements: - Change Log","type":"extras"},{"doc":"- use AshMoney","ref":"changelog.html#features","title":"Features: - Change Log","type":"extras"},{"doc":"- ensure transformers run before `BelongsToAttribute`\n\n- update ash for fix","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"- migrate to AshMoney\n\n- update ash\n\n## [v0.1.2](https://github.com/ash-project/ash_double_entry/compare/v0.1.1...v0.1.2) (2023-08-19)\n\n- Documentation updates & AshHq indexing fixes\n\n## [v0.1.1](https://github.com/ash-project/ash_double_entry/compare/v0.1.0...v0.1.1) (2023-08-19)","ref":"changelog.html#improvements","title":"Improvements: - Change Log","type":"extras"},{"doc":"- properly calculate balance_as_of_ulid when transfer is to or from account\n\n## [v0.1.0](https://github.com/ash-project/ash_double_entry/compare/v0.1.0...v0.1.0) (2023-08-19)","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"- create balances after transfer is created\n\n- don't require pagination","ref":"changelog.html#bug-fixes","title":"Bug Fixes: - Change Log","type":"extras"},{"doc":"- add CI & check commands\n\n- wrap up initial implementaiton, add guides\n\n- initial test suite & functionality","ref":"changelog.html#improvements","title":"Improvements: - Change Log","type":"extras"}],"producer":{"name":"ex_doc","version":[48,46,51,50,46,49]}}