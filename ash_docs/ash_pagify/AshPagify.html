<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.34.2">
    <meta name="project" content="ash_pagify v1.0.2">


    <title>AshPagify â€” ash_pagify v1.0.2</title>
    <link rel="stylesheet" href="dist/html-elixir-F2VRIOKR.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-K7URE6B4.js"></script>
    <script src="dist/sidebar_items-6F6CB061.js"></script>
    <script src="docs_config.js"></script>
    <script async src="dist/html-YIPIRHGU.js"></script>

  </head>
  <body data-type="modules" class="page-module">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="body-wrapper">

<button id="sidebar-menu" class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

      <div>
        <a href="https://hexdocs.pm/ash_pagify" class="sidebar-projectName" translate="no">
ash_pagify
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.0.2
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>

  <div id="content" class="content-inner">
    <div class="top-search">
      <div class="search-settings">
        <form class="search-bar" action="search.html">
          <label class="search-label">
            <span class="sr-only">Search documentation of ash_pagify</span>
            <input name="q" type="text" class="search-input" placeholder="Press / to search" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
          </label>
          <button type="submit" class="search-button" aria-label="Submit Search">
            <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
          </button>
          <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
            <i class="ri-close-line ri-lg" title="Cancel search"></i>
          </button>
        </form>
        <div class="autocomplete">
        </div>
        <button class="icon-settings display-settings">
          <i class="ri-settings-3-line"></i>
          <span class="sr-only">Settings</span>
        </button>
      </div>
    </div>

<div id="top-content">
  <h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1" title="View Source" class="icon-action" rel="help">
        <i class="ri-code-s-slash-line" aria-hidden="true"></i>
        <span class="sr-only">View Source</span>
      </a>

    <span translate="no">AshPagify</span> 
    <small class="app-vsn" translate="no">(ash_pagify v1.0.2)</small>

  </h1>


    <section id="moduledoc">
<p>AshPagify is an Elixir library designed to easily add full-text search, scoping, filtering,
ordering, and pagination APIs for the <a href="https://hexdocs.pm/ash">Ash Framework</a>.</p><p>It takes concepts from <code class="inline">Flop</code>, <code class="inline">Flop.Phoenix</code>, <a href="https://hexdocs.pm/ash/3.3.3/Ash.html"><code class="inline">Ash</code></a> and <a href="https://hexdocs.pm/ash_phoenix/2.1.1/AshPhoenix.FilterForm.html"><code class="inline">AshPhoenix.FilterForm</code></a> and
combines them into a single library.</p><p>It's main purpose is to provide functions to convert user input for full-text search, scoping,
filtering, ordering, and pagination into the following data structures:</p><ol><li><a href="AshPagify.Meta.html"><code class="inline">AshPagify.Meta</code></a> a struct holding information of a db query result.</li><li>query parameters for url building and to restore the query parameters from the url.</li><li>a basic map syntax which for example can be stored in a session or database (and restore
the information from it).</li></ol><p>Further, it provides headless components to build sortable tables and pagination links in your
Phoenix LiveView with the <a href="AshPagify.Components.html"><code class="inline">AshPagify.Components</code></a> module. Finally, it provides a simple way to build
filter forms for your LiveView with the <a href="AshPagify.FilterForm.html"><code class="inline">AshPagify.FilterForm</code></a> struct.</p><h2 id="module-examples" class="section-heading">
  <a href="#module-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7378278647-1">%</span><span class="nc" data-group-id="7378278647-1">AshPagify</span><span class="p" data-group-id="7378278647-1">{</span><span class="w">
  </span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7378278647-2">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="7378278647-2">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7378278647-3">%{</span><span class="s">&quot;comments_count&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7378278647-4">%{</span><span class="s">&quot;gt&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="7378278647-4">}</span><span class="p" data-group-id="7378278647-3">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7378278647-5">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="7378278647-5">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="ss">:name</span><span class="p">,</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="p" data-group-id="7378278647-1">}</span><span class="w">
</span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7378278647-6">[</span><span class="ss">full_text_search</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7378278647-7">[</span><span class="ss">tsvector</span><span class="p">:</span><span class="w"> </span><span class="ss">:custom_tsvector</span><span class="p" data-group-id="7378278647-7">]</span><span class="p" data-group-id="7378278647-6">]</span><span class="w">

</span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">query_to_filters_map</span><span class="p" data-group-id="7378278647-8">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="7378278647-8">)</span><span class="o">.</span><span class="n">filters</span><span class="w">
</span><span class="p" data-group-id="7378278647-9">%{</span><span class="w">
  </span><span class="s">&quot;__full_text_search&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7378278647-10">%{</span><span class="w">
    </span><span class="s">&quot;search&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;tsvector&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;custom_tsvector&quot;</span><span class="w">
  </span><span class="p" data-group-id="7378278647-10">}</span><span class="p">,</span><span class="w">
  </span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7378278647-11">[</span><span class="w">
    </span><span class="p" data-group-id="7378278647-12">%{</span><span class="s">&quot;comments_count&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7378278647-13">%{</span><span class="s">&quot;gt&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="7378278647-13">}</span><span class="p" data-group-id="7378278647-12">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="7378278647-14">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="7378278647-15">%{</span><span class="s">&quot;eq&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="7378278647-15">}</span><span class="p" data-group-id="7378278647-14">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="7378278647-16">%{</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="7378278647-16">}</span><span class="w">
  </span><span class="p" data-group-id="7378278647-11">]</span><span class="w">
</span><span class="p" data-group-id="7378278647-9">}</span><span class="w">

</span><span class="nc">AshPagify.Components</span><span class="o">.</span><span class="n">build_path</span><span class="p" data-group-id="7378278647-17">(</span><span class="s">&quot;/posts&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="7378278647-17">)</span><span class="w">
</span><span class="s">&quot;/posts?search=Post+1&amp;limit=10&amp;scopes[role]=admin&amp;filter_form[field]=name&amp;filter_form[operator]=eq&amp;filter_form[value]=Post+1&amp;order_by[]=name&quot;</span></code></pre><h2 id="module-features" class="section-heading">
  <a href="#module-features" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Features</span>
</h2>
<ul><li><strong>Full-text search</strong>: AshPagify supports full-text search using the <code class="inline">tsvector</code> column in PostgreSQL.</li><li><strong>Offset-based pagination</strong>: AshPagify uses <code class="inline">OFFSET</code> and <code class="inline">LIMIT</code> to paginate your queries.</li><li><strong>Scoping</strong>: Apply predefined filters to your queries using a simple map syntax.</li><li><strong>Filtering</strong>: Apply user-input filters to your queries using a simple map syntax. Allows complex data filtering using multiple conditions, operators, and fields. Also incooperates with <a href="https://hexdocs.pm/ash_phoenix/2.1.1/AshPhoenix.FilterForm.html"><code class="inline">AshPhoenix.FilterForm</code></a> to provide a simple way to build complex filter user interfaces.</li><li><strong>Sorting</strong>: Sort your queries by multiple fields and any directions.</li><li><strong>UI helpers and URL builders</strong>: AshPagify provides a <a href="AshPagify.Meta.html"><code class="inline">AshPagify.Meta</code></a> struct with information about the current page, total pages, and more. This information can be used to build pagination links in your UI. Further, <a href="AshPagify.html"><code class="inline">AshPagify</code></a> provides the <a href="AshPagify.Components.html"><code class="inline">AshPagify.Components</code></a> module with headless table and pagination components to easily build sortable tables and pagination links in your Phoenix LiveView. The <a href="AshPagify.FilterForm.html"><code class="inline">AshPagify.FilterForm</code></a> module provides a simple way to build filter forms for your LiveView.</li></ul><h2 id="module-overview" class="section-heading">
  <a href="#module-overview" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Overview</span>
</h2>
<ul><li><a href="#examples">Examples</a></li><li><a href="#features">Features</a></li><li><a href="#installation">Installation</a></li><li><a href="#global-configuration">Global configuration</a></li><li><a href="#resource-configuration">Resource configuration</a></li><li><a href="#liveview-configuration">LiveView configuration</a><ul><li><a href="#liveview-streams">LiveView streams</a></li><li><a href="#replace-invalid-params">Replace invalid params</a></li><li><a href="#custom-read-action">Custom read action</a></li></ul></li><li><a href="#full-text-search">Full-text search</a></li><li><a href="#sortable-tables-and-pagination">Sortable tables and pagination</a></li><li><a href="#parameter-format">Parameter format</a><ul><li><a href="#search-query">Search query</a></li><li><a href="#pagination">Pagination</a></li><li><a href="#scoping">Scoping</a></li><li><a href="#filter-forms">Filter forms</a></li><li><a href="#ordering">Ordering</a></li><li><a href="#internal-parameters">Internal parameters</a></li></ul></li><li><a href="#release-management">Release Management</a></li></ul><h2 id="module-installation" class="section-heading">
  <a href="#module-installation" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Installation</span>
</h2>
<p>AshPagify requires the following dependencies to be installed:</p><ul><li><a href="https://hexdocs.pm/ash/3.3.3/Ash.html"><code class="inline">Ash</code></a> - The main library for building queries.</li><li><code class="inline">ash_phoenix</code> - The Phoenix integration for Ash.</li><li><a href="https://hexdocs.pm/ash_postgres/2.1.17/AshPostgres.html"><code class="inline">AshPostgres</code></a> - The PostgreSQL integration for Ash.</li><li><code class="inline">AshUUID</code> - The UUID integration for Ash.</li><li><a href="https://hexdocs.pm/phoenix/1.7.14/Phoenix.html"><code class="inline">Phoenix</code></a> - The Phoenix web framework.</li></ul><p>Then simply add <code class="inline">ash_pagify</code> to your list of dependencies in <code class="inline">mix.exs</code> and run
<a href="https://hexdocs.pm/mix/Mix.Tasks.Deps.Get.html"><code class="inline">mix deps.get</code></a>:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">deps</span><span class="w"> </span><span class="k" data-group-id="1250061761-1">do</span><span class="w">
  </span><span class="p" data-group-id="1250061761-2">[</span><span class="w">
    </span><span class="p" data-group-id="1250061761-3">{</span><span class="ss">:ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;~&gt; 1.0.2&quot;</span><span class="p" data-group-id="1250061761-3">}</span><span class="w">
  </span><span class="p" data-group-id="1250061761-2">]</span><span class="w">
</span><span class="k" data-group-id="1250061761-1">end</span></code></pre><h2 id="module-global-configuration" class="section-heading">
  <a href="#module-global-configuration" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Global configuration</span>
</h2>
<p>You can set some global options like the default_limit via the application
environment. All global options can be overridden by passing them directly to
the functions.</p><pre><code class="makeup elixir" translate="no"><span class="n">config</span><span class="w"> </span><span class="ss">:ash_pagify</span><span class="p">,</span><span class="w">
  </span><span class="ss">default_limit</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="ss">max_limit</span><span class="p">:</span><span class="w"> </span><span class="mi">1000</span><span class="p">,</span><span class="w">
  </span><span class="ss">replace_invalid_params?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">ash_pagify_scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8141045249-1">%{</span><span class="w">
    </span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8141045249-2">[</span><span class="w">
      </span><span class="p" data-group-id="8141045249-3">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="8141045249-3">}</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="8141045249-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8141045249-5">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="8141045249-5">}</span><span class="p" data-group-id="8141045249-4">}</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="8141045249-6">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:user</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8141045249-7">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;user&quot;</span><span class="p" data-group-id="8141045249-7">}</span><span class="p" data-group-id="8141045249-6">}</span><span class="w">
    </span><span class="p" data-group-id="8141045249-2">]</span><span class="w">
  </span><span class="p" data-group-id="8141045249-1">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">reset_on_filter?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">full_text_search</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8141045249-8">[</span><span class="w">
    </span><span class="ss">negation</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
    </span><span class="ss">prefix</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
    </span><span class="ss">any_word</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
  </span><span class="p" data-group-id="8141045249-8">]</span></code></pre><p>See <a href="#t:option/0"><code class="inline">AshPagify.option/0</code></a> for a description of all available options.</p><h2 id="module-resource-configuration" class="section-heading">
  <a href="#module-resource-configuration" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Resource configuration</span>
</h2>
<p>You need to add the <code class="inline">pagination macro</code> call to the action of the resource that you
want to be paginated. The macro call is used to set the default limit, offset and
other options for the pagination.</p><p>Furthermore, you can define scopes in the resource module. Scopes are predefined
filters that can be applied to the query.</p><p>We allow full-text search using the <code class="inline">tsvector</code> column in PostgreSQL. To enable full-text search,
you need to either <code class="inline">use AshPagify.Tsearch</code> in your module or implement the <code class="inline">full_text_search</code>,
<code class="inline">full_text_search_rank</code>, <code class="inline">tsquery</code>, and <code class="inline">tsvector</code> calculations as described in <a href="AshPagify.Tsearch.html"><code class="inline">AshPagify.Tsearch</code></a>
(tsvector calculation  is always mandatory).</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">YourApp.Resource.Post</span><span class="w">
  </span><span class="c1"># only required if you want to implement full-text search</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">AshPagify.Tsearch</span><span class="w">
  </span><span class="kn">require</span><span class="w"> </span><span class="nc">Ash.Expr</span><span class="w">

  </span><span class="na">@default_limit</span><span class="w"> </span><span class="mi">15</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">default_limit</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="na">@default_limit</span><span class="w">

  </span><span class="na">@ash_pagify_scopes</span><span class="w"> </span><span class="p" data-group-id="6286226622-1">%{</span><span class="w">
    </span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6286226622-2">[</span><span class="w">
      </span><span class="p" data-group-id="6286226622-3">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="6286226622-3">}</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="6286226622-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6286226622-5">%{</span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="6286226622-5">}</span><span class="p" data-group-id="6286226622-4">}</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="6286226622-6">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:user</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6286226622-7">%{</span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Doe&quot;</span><span class="p" data-group-id="6286226622-7">}</span><span class="p" data-group-id="6286226622-6">}</span><span class="w">
    </span><span class="p" data-group-id="6286226622-2">]</span><span class="w">
  </span><span class="p" data-group-id="6286226622-1">}</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">ash_pagify_scopes</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="na">@ash_pagify_scopes</span><span class="w">

  </span><span class="n">actions</span><span class="w"> </span><span class="k" data-group-id="6286226622-8">do</span><span class="w">
    </span><span class="n">read</span><span class="w"> </span><span class="ss">:read</span><span class="w"> </span><span class="k" data-group-id="6286226622-9">do</span><span class="w">
      </span><span class="c1">#...</span><span class="w">
      </span><span class="n">pagination</span><span class="w"> </span><span class="ss">offset?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
                </span><span class="ss">default_limit</span><span class="p">:</span><span class="w"> </span><span class="na">@default_limit</span><span class="p">,</span><span class="w">
                </span><span class="ss">countable</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
                </span><span class="ss">required?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w">
    </span><span class="k" data-group-id="6286226622-9">end</span><span class="w">
  </span><span class="k" data-group-id="6286226622-8">end</span><span class="w">

  </span><span class="n">calculations</span><span class="w"> </span><span class="k" data-group-id="6286226622-10">do</span><span class="w">
    </span><span class="c1"># provide your default `tsvector` calculation for full-text search</span><span class="w">
    </span><span class="n">calculate</span><span class="w"> </span><span class="ss">:tsvector</span><span class="p">,</span><span class="w">
              </span><span class="nc">AshPostgres.Tsvector</span><span class="p">,</span><span class="w">
              </span><span class="n">expr</span><span class="p" data-group-id="6286226622-11">(</span><span class="w">
                </span><span class="n">fragment</span><span class="p" data-group-id="6286226622-12">(</span><span class="w">
                  </span><span class="s">&quot;to_tsvector(&#39;simple&#39;, coalesce(?, &#39;&#39;)) || to_tsvector(&#39;simple&#39;, coalesce(?, &#39;&#39;))&quot;</span><span class="p">,</span><span class="w">
                  </span><span class="n">name</span><span class="p">,</span><span class="w">
                  </span><span class="n">title</span><span class="w">
                </span><span class="p" data-group-id="6286226622-12">)</span><span class="w">
              </span><span class="p" data-group-id="6286226622-11">)</span><span class="p">,</span><span class="w">
              </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="k" data-group-id="6286226622-10">end</span><span class="w">
  </span><span class="c1">#...</span><span class="w">
</span><span class="k">end</span></code></pre><h2 id="module-liveview-configuration" class="section-heading">
  <a href="#module-liveview-configuration" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">LiveView configuration</span>
</h2>
<p>In your LiveView, fetch the data and assign it alongside the meta data to the socket.</p><pre><code class="makeup elixir" translate="no"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">YourAppWeb.PostLive.IndexLive</span><span class="w"> </span><span class="k" data-group-id="6314783276-1">do</span><span class="w">
  </span><span class="kn">use</span><span class="w"> </span><span class="nc">YourAppWeb</span><span class="p">,</span><span class="w"> </span><span class="ss">:live_view</span><span class="w">

  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">YourApp.Resource.Post</span><span class="w">

  </span><span class="na">@impl</span><span class="w"> </span><span class="no">true</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">handle_params</span><span class="p" data-group-id="6314783276-2">(</span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="6314783276-2">)</span><span class="w"> </span><span class="k" data-group-id="6314783276-3">do</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nc">Post</span><span class="o">.</span><span class="n">list_posts</span><span class="p" data-group-id="6314783276-4">(</span><span class="n">params</span><span class="p" data-group-id="6314783276-4">)</span><span class="w"> </span><span class="k" data-group-id="6314783276-5">do</span><span class="w">
      </span><span class="p" data-group-id="6314783276-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6314783276-7">{</span><span class="n">posts</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="6314783276-7">}</span><span class="p" data-group-id="6314783276-6">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
        </span><span class="p" data-group-id="6314783276-8">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">assign</span><span class="p" data-group-id="6314783276-9">(</span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6314783276-10">%{</span><span class="ss">posts</span><span class="p">:</span><span class="w"> </span><span class="n">posts</span><span class="p">,</span><span class="w"> </span><span class="ss">meta</span><span class="p">:</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="6314783276-10">}</span><span class="p" data-group-id="6314783276-9">)</span><span class="p" data-group-id="6314783276-8">}</span><span class="w">
      </span><span class="p" data-group-id="6314783276-11">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="c">_meta</span><span class="p" data-group-id="6314783276-11">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
        </span><span class="c1"># This will reset invalid parameters. Alternatively, you can assign</span><span class="w">
        </span><span class="c1"># only the meta and render the errors, or assign the validated params,</span><span class="w">
        </span><span class="c1"># or you can ignore the error case entirely.</span><span class="w">
        </span><span class="p" data-group-id="6314783276-12">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">push_navigate</span><span class="p" data-group-id="6314783276-13">(</span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="ss">to</span><span class="p">:</span><span class="w"> </span><span class="sx">~p&quot;/posts&quot;</span><span class="p" data-group-id="6314783276-13">)</span><span class="p" data-group-id="6314783276-12">}</span><span class="w">
    </span><span class="k" data-group-id="6314783276-5">end</span><span class="w">
  </span><span class="k" data-group-id="6314783276-3">end</span><span class="w">

  </span><span class="kd">defp</span><span class="w"> </span><span class="nf">list_posts</span><span class="p" data-group-id="6314783276-14">(</span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="w"> </span><span class="o">\\</span><span class="w"> </span><span class="p" data-group-id="6314783276-15">[</span><span class="p" data-group-id="6314783276-15">]</span><span class="p" data-group-id="6314783276-14">)</span><span class="w"> </span><span class="k" data-group-id="6314783276-16">do</span><span class="w">
    </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate_and_run</span><span class="p" data-group-id="6314783276-17">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="6314783276-17">)</span><span class="w">
  </span><span class="k" data-group-id="6314783276-16">end</span><span class="w">
</span><span class="k" data-group-id="6314783276-1">end</span></code></pre><h3 id="module-liveview-streams" class="section-heading">
  <a href="#module-liveview-streams" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">LiveView streams</span>
</h3>
<p>To use LiveView streams, you can change your <code class="inline">handle_params/3</code> function as follows:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">handle_params</span><span class="p" data-group-id="7120038813-1">(</span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="7120038813-1">)</span><span class="w"> </span><span class="k" data-group-id="7120038813-2">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">Post</span><span class="o">.</span><span class="n">list_posts</span><span class="p" data-group-id="7120038813-3">(</span><span class="n">params</span><span class="p" data-group-id="7120038813-3">)</span><span class="w"> </span><span class="k" data-group-id="7120038813-4">do</span><span class="w">
    </span><span class="p" data-group-id="7120038813-5">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w">
        </span><span class="n">socket</span><span class="w">
        </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">assign</span><span class="p" data-group-id="7120038813-6">(</span><span class="ss">:meta</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="7120038813-6">)</span><span class="w">
        </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">stream</span><span class="p" data-group-id="7120038813-7">(</span><span class="ss">:posts</span><span class="p">,</span><span class="w"> </span><span class="n">posts</span><span class="p">,</span><span class="w"> </span><span class="ss">reset</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="7120038813-7">)</span><span class="p" data-group-id="7120038813-5">}</span><span class="w">
  </span><span class="c1"># ...</span><span class="w">
  </span><span class="k" data-group-id="7120038813-4">end</span><span class="w">
</span><span class="k" data-group-id="7120038813-2">end</span></code></pre><h3 id="module-replace-invalid-params" class="section-heading">
  <a href="#module-replace-invalid-params" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Replace invalid params</span>
</h3>
<p>To replace invalid ash_pagify parameters with their default values, you can use the <code class="inline">replace_invalid_params?</code> option. You can change your <code class="inline">handle_params/3</code> function as follows:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">handle_params</span><span class="p" data-group-id="3732330086-1">(</span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">socket</span><span class="p" data-group-id="3732330086-1">)</span><span class="w"> </span><span class="k" data-group-id="3732330086-2">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">Post</span><span class="o">.</span><span class="n">list_posts</span><span class="p" data-group-id="3732330086-3">(</span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="ss">replace_invalid_params?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="3732330086-3">)</span><span class="w"> </span><span class="k" data-group-id="3732330086-4">do</span><span class="w">
      </span><span class="p" data-group-id="3732330086-5">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3732330086-6">{</span><span class="n">posts</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="3732330086-6">}</span><span class="p" data-group-id="3732330086-5">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
        </span><span class="p" data-group-id="3732330086-7">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">assign</span><span class="p" data-group-id="3732330086-8">(</span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3732330086-9">%{</span><span class="ss">posts</span><span class="p">:</span><span class="w"> </span><span class="n">posts</span><span class="p">,</span><span class="w"> </span><span class="ss">meta</span><span class="p">:</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="3732330086-9">}</span><span class="p" data-group-id="3732330086-8">)</span><span class="p" data-group-id="3732330086-7">}</span><span class="w">
      </span><span class="p" data-group-id="3732330086-10">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="3732330086-10">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
        </span><span class="n">valid_path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify.Components</span><span class="o">.</span><span class="n">build_path</span><span class="p" data-group-id="3732330086-11">(</span><span class="sx">~p&quot;/posts&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="o">.</span><span class="n">params</span><span class="p" data-group-id="3732330086-11">)</span><span class="w">
        </span><span class="p" data-group-id="3732330086-12">{</span><span class="ss">:noreply</span><span class="p">,</span><span class="w"> </span><span class="n">push_navigate</span><span class="p" data-group-id="3732330086-13">(</span><span class="n">socket</span><span class="p">,</span><span class="w"> </span><span class="ss">to</span><span class="p">:</span><span class="w"> </span><span class="n">valid_path</span><span class="p" data-group-id="3732330086-13">)</span><span class="p" data-group-id="3732330086-12">}</span><span class="w">
  </span><span class="c1"># ...</span><span class="w">
  </span><span class="k" data-group-id="3732330086-4">end</span><span class="w">
</span><span class="k" data-group-id="3732330086-2">end</span></code></pre><h3 id="module-custom-read-action" class="section-heading">
  <a href="#module-custom-read-action" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Custom read action</span>
</h3>
<p>If the <code class="inline">:action</code> option is set (to perform a custom read action), the fourth argument
<code class="inline">args</code> will be passed to the action as arguments.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="2172920784-1">%</span><span class="nc" data-group-id="2172920784-1">Ash.Page.Offset</span><span class="p" data-group-id="2172920784-1">{</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="n">count</span><span class="p" data-group-id="2172920784-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">all</span><span class="p" data-group-id="2172920784-2">(</span><span class="nc">Comment</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2172920784-3">%</span><span class="nc" data-group-id="2172920784-3">AshPagify</span><span class="p" data-group-id="2172920784-3">{</span><span class="p" data-group-id="2172920784-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2172920784-4">[</span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:by_post</span><span class="p" data-group-id="2172920784-4">]</span><span class="p">,</span><span class="w"> </span><span class="n">post</span><span class="o">.</span><span class="n">id</span><span class="p" data-group-id="2172920784-2">)</span></code></pre><h2 id="module-full-text-search" class="section-heading">
  <a href="#module-full-text-search" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Full-text search</span>
</h2>
<p>We allow full-text search using the <code class="inline">tsvector</code> column in PostgreSQL. To enable full-text search,
you need to either <code class="inline">use AshPagify.Tsearch</code> in your module or implement the <code class="inline">full_text_search</code>,
<code class="inline">full_text_search_rank</code>, <code class="inline">tsquery</code>, and <code class="inline">tsvector</code> calculations as described in <a href="AshPagify.Tsearch.html"><code class="inline">AshPagify.Tsearch</code></a>
(tsvector calculation  is always mandatory).</p><pre><code class="makeup elixir" translate="no"><span class="c1"># provide the default tsvector calculation for full-text search</span><span class="w">
</span><span class="n">calculate</span><span class="w"> </span><span class="ss">:tsvector</span><span class="p">,</span><span class="w">
          </span><span class="nc">AshPostgres.Tsvector</span><span class="p">,</span><span class="w">
          </span><span class="n">expr</span><span class="p" data-group-id="7265758958-1">(</span><span class="w">
            </span><span class="n">fragment</span><span class="p" data-group-id="7265758958-2">(</span><span class="w">
              </span><span class="s">&quot;to_tsvector(&#39;simple&#39;, coalesce(?, &#39;&#39;)) || to_tsvector(&#39;simple&#39;, coalesce(?, &#39;&#39;))&quot;</span><span class="p">,</span><span class="w">
              </span><span class="n">name</span><span class="p">,</span><span class="w">
              </span><span class="n">title</span><span class="w">
            </span><span class="p" data-group-id="7265758958-2">)</span><span class="w">
          </span><span class="p" data-group-id="7265758958-1">)</span><span class="p">,</span><span class="w">
          </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span></code></pre><p>Or if you want to use a generated tsvector column, you can replace the fields
part with the name of your generated tsvector column:</p><pre><code class="makeup elixir" translate="no"><span class="c1"># use a tsvector column from the database</span><span class="w">
</span><span class="n">calculate</span><span class="w"> </span><span class="ss">:tsvector</span><span class="p">,</span><span class="w"> </span><span class="nc">AshPostgres.Tsvector</span><span class="p">,</span><span class="w"> </span><span class="n">expr</span><span class="p" data-group-id="8320851117-1">(</span><span class="n">tsv</span><span class="p" data-group-id="8320851117-1">)</span><span class="p">,</span><span class="w"> </span><span class="ss">public?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span></code></pre><p>You can also configure <code class="inline">dynamic</code> tsvectors based on user input. Have a look at the
<a href="AshPagify.Tsearch.html"><code class="inline">AshPagify.Tsearch</code></a> module for more information.</p><p>Once configured, you can use the <code class="inline">search</code> parameter to apply full-text search.</p><h2 id="module-sortable-tables-and-pagination" class="section-heading">
  <a href="#module-sortable-tables-and-pagination" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Sortable tables and pagination</span>
</h2>
<p>To add a sortable table and pagination links, you can add the following to your template:</p><pre><code class="makeup elixir" translate="no"><span class="o">&lt;</span><span class="n">h1</span><span class="o">&gt;</span><span class="nc">Posts</span><span class="o">&lt;</span><span class="o">/</span><span class="n">h1</span><span class="o">&gt;</span><span class="w">

</span><span class="o">&lt;</span><span class="nc">AshPagify.Components</span><span class="o">.</span><span class="n">table</span><span class="w"> </span><span class="n">items</span><span class="o">=</span><span class="p" data-group-id="3652879105-1">{</span><span class="na">@posts</span><span class="p" data-group-id="3652879105-1">}</span><span class="w"> </span><span class="n">meta</span><span class="o">=</span><span class="p" data-group-id="3652879105-2">{</span><span class="na">@meta</span><span class="p" data-group-id="3652879105-2">}</span><span class="w"> </span><span class="n">path</span><span class="o">=</span><span class="p" data-group-id="3652879105-3">{</span><span class="sx">~p&quot;/posts&quot;</span><span class="p" data-group-id="3652879105-3">}</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="ss">:col</span><span class="w"> </span><span class="ss">:let</span><span class="o">=</span><span class="p" data-group-id="3652879105-4">{</span><span class="n">post</span><span class="p" data-group-id="3652879105-4">}</span><span class="w"> </span><span class="n">label</span><span class="o">=</span><span class="s">&quot;Name&quot;</span><span class="w"> </span><span class="n">field</span><span class="o">=</span><span class="p" data-group-id="3652879105-5">{</span><span class="ss">:name</span><span class="p" data-group-id="3652879105-5">}</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="p">%</span><span class="o">=</span><span class="w"> </span><span class="n">post</span><span class="o">.</span><span class="n">name</span><span class="w"> </span><span class="p">%</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="ss">:col</span><span class="o">&gt;</span><span class="w">
  </span><span class="o">&lt;</span><span class="ss">:col</span><span class="w"> </span><span class="ss">:let</span><span class="o">=</span><span class="p" data-group-id="3652879105-6">{</span><span class="n">post</span><span class="p" data-group-id="3652879105-6">}</span><span class="w"> </span><span class="n">label</span><span class="o">=</span><span class="s">&quot;Author&quot;</span><span class="w"> </span><span class="n">field</span><span class="o">=</span><span class="p" data-group-id="3652879105-7">{</span><span class="ss">:author</span><span class="p" data-group-id="3652879105-7">}</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="p">%</span><span class="o">=</span><span class="w"> </span><span class="n">post</span><span class="o">.</span><span class="n">author</span><span class="w"> </span><span class="p">%</span><span class="o">&gt;</span><span class="o">&lt;</span><span class="o">/</span><span class="ss">:col</span><span class="o">&gt;</span><span class="w">
</span><span class="o">&lt;</span><span class="o">/</span><span class="nc">AshPagify.Components</span><span class="o">.</span><span class="n">table</span><span class="o">&gt;</span><span class="w">

</span><span class="o">&lt;</span><span class="nc">AshPagify.Components</span><span class="o">.</span><span class="n">pagination</span><span class="w"> </span><span class="n">meta</span><span class="o">=</span><span class="p" data-group-id="3652879105-8">{</span><span class="na">@meta</span><span class="p" data-group-id="3652879105-8">}</span><span class="w"> </span><span class="n">path</span><span class="o">=</span><span class="p" data-group-id="3652879105-9">{</span><span class="sx">~p&quot;/posts&quot;</span><span class="p" data-group-id="3652879105-9">}</span><span class="w"> </span><span class="o">/</span><span class="o">&gt;</span></code></pre><p>In this context, path points to the current route, and AshPagify Components appends
full-text search, pagination, scoping, filtering, and sorting parameters to it.
You can use verified routes, route helpers, or custom path builder functions.
You'll find explanations for the different formats in the documentation for
<a href="AshPagify.Components.html#build_path/3"><code class="inline">AshPagify.Components.build_path/3</code></a>.</p><p>Note that the field attribute in the <code class="inline">:col</code> slot is optional. If set and the
corresponding field in the resource is defined as sortable, the table header for
that column will be interactive, allowing users to sort by that column. However,
if the field isn't defined as sortable, or if the field attribute is omitted, or
set to <code class="inline">nil</code> or <code class="inline">false</code>, the table header will not be clickable.</p><p>You also have the option to pass a <a href="https://hexdocs.pm/phoenix_live_view/0.20.17/Phoenix.LiveView.JS.html"><code class="inline">Phoenix.LiveView.JS</code></a> command instead of or
in addition to a path. For more details, please refer to the component
documentation.</p><h2 id="module-parameter-format" class="section-heading">
  <a href="#module-parameter-format" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Parameter format</span>
</h2>
<p>The AshPagify library requires parameters to be provided in a specific format as a map.
This map can be translated into a URL query parameter string, typically for use in a
web framework like Phoenix.</p><p>The following parameters are encoded as strings and handled by the library:</p><ul><li><code class="inline">search</code> - A string to search for in the full-text search column or in the searchable fields.</li><li><code class="inline">limit</code> - The number of records to return.</li><li><code class="inline">offset</code> - The number of records to skip.</li><li><code class="inline">scopes</code> - A map of predefined filters to apply to the query.</li><li><code class="inline">filter_form</code> - A map of filters provided by the <a href="AshPagify.FilterForm.html"><code class="inline">AshPagify.FilterForm</code></a> module.</li><li><code class="inline">order_by</code> - A list of fields to order by.</li></ul><h2 id="module-search-query" class="section-heading">
  <a href="#module-search-query" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Search query</span>
</h2>
<p>You can search for a string in a full-text search column.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="4794936989-1">%{</span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="4794936989-1">}</span></code></pre><p>This translates to the following query parameter string:</p><pre><code class="URL">?search=John</code></pre><p>You can use the <a href="#set_search/3"><code class="inline">AshPagify.set_search/3</code></a> function to set the search query in the
<a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p><pre><code class="makeup elixir" translate="no"><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">set_search</span><span class="p" data-group-id="3475659059-1">(</span><span class="p" data-group-id="3475659059-2">%</span><span class="nc" data-group-id="3475659059-2">AshPagify</span><span class="p" data-group-id="3475659059-2">{</span><span class="p" data-group-id="3475659059-2">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="3475659059-1">)</span></code></pre><h2 id="module-pagination" class="section-heading">
  <a href="#module-pagination" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Pagination</span>
</h2>
<p>You can specify an offset to start from and a limit to the number of results.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="8129316382-1">%{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="8129316382-1">}</span></code></pre><p>This translates to the following query parameter string:</p><pre><code class="URL">?offset=100&amp;limit=20</code></pre><p>You can use the <a href="#set_offset/2"><code class="inline">AshPagify.set_offset/2</code></a> and <a href="#set_limit/3"><code class="inline">AshPagify.set_limit/3</code></a> functions to set
the offset and limit in the <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p><pre><code class="makeup elixir" translate="no"><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">set_offset</span><span class="p" data-group-id="3445550637-1">(</span><span class="p" data-group-id="3445550637-2">%</span><span class="nc" data-group-id="3445550637-2">AshPagify</span><span class="p" data-group-id="3445550637-2">{</span><span class="p" data-group-id="3445550637-2">}</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p" data-group-id="3445550637-1">)</span><span class="w">
</span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">set_limit</span><span class="p" data-group-id="3445550637-3">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="3445550637-3">)</span></code></pre><h2 id="module-scoping" class="section-heading">
  <a href="#module-scoping" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Scoping</span>
</h2>
<p>To apply predefined filters to a query, you can set the <code class="inline">:scopes</code> parameter. <code class="inline">:scopes</code>
should be a map of predefined filters (maps) available in your resource. The filter name
is used to look up the predefined filter. If the filter is found, it is applied to
the query. If the filter is not found, an error is raised.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="4178152201-1">%{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4178152201-2">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="4178152201-2">}</span><span class="p" data-group-id="4178152201-1">}</span></code></pre><p>This translates to the following query parameter string:</p><pre><code class="URL">?scopes[role]=admin</code></pre><p>You can use the <a href="#set_scope/3"><code class="inline">AshPagify.set_scope/3</code></a> function to set the scopes in the <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p><pre><code class="makeup elixir" translate="no"><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">set_scope</span><span class="p" data-group-id="6839986110-1">(</span><span class="p" data-group-id="6839986110-2">%</span><span class="nc" data-group-id="6839986110-2">AshPagify</span><span class="p" data-group-id="6839986110-2">{</span><span class="p" data-group-id="6839986110-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6839986110-3">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="6839986110-3">}</span><span class="p" data-group-id="6839986110-1">)</span></code></pre><h2 id="module-filter-forms" class="section-heading">
  <a href="#module-filter-forms" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Filter forms</span>
</h2>
<p>Filter forms can be passed as a map of filter conditions. Usually, this map is generated
by a filter form component using the <a href="AshPagify.FilterForm.html"><code class="inline">AshPagify.FilterForm</code></a> module. <a href="AshPagify.FilterForm.html#params_for_query/2"><code class="inline">AshPagify.FilterForm.params_for_query/2</code></a>
can be used to convert the form filter map into a query map.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="7597666928-1">%{</span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7597666928-2">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="7597666928-2">}</span><span class="p" data-group-id="7597666928-1">}</span></code></pre><p>This translates to the following query parameter string:</p><pre><code class="URL">?filter_form[name][eq]=Post%201</code></pre><p>You can use the <a href="#set_filter_form/3"><code class="inline">AshPagify.set_filter_form/3</code></a> function to set the filter form in the <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p><pre><code class="makeup elixir" translate="no"><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">set_filter_form</span><span class="p" data-group-id="1531971478-1">(</span><span class="p" data-group-id="1531971478-2">%</span><span class="nc" data-group-id="1531971478-2">AshPagify</span><span class="p" data-group-id="1531971478-2">{</span><span class="p" data-group-id="1531971478-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1531971478-3">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="1531971478-3">}</span><span class="p" data-group-id="1531971478-1">)</span></code></pre><p>Check the <a href="https://hexdocs.pm/ash_phoenix/2.1.1/AshPhoenix.FilterForm.html"><code class="inline">AshPhoenix.FilterForm</code></a> documentation for more information.
See <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#filter/2"><code class="inline">Ash.Query.filter/2</code></a> for a list of all available filter operators.</p><h2 id="module-ordering" class="section-heading">
  <a href="#module-ordering" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Ordering</span>
</h2>
<p>To add an ordering clause to a query, you need to set the <code class="inline">:order_by</code>
parameter. <code class="inline">:order_by</code> should be a list of fields, aggregates, or calculations
available in your resource. The order direction can be set by adding
one of the following prefixes to the field name:</p><ul><li><code class="inline">&quot;&quot;</code> or <code class="inline">+</code> for ascending order</li><li><code class="inline">-</code> for descending order</li><li><code class="inline">++</code> for ascending order with nulls first</li><li><code class="inline">--</code> for descending order with nulls last</li></ul><p>If no order directions are given, <code class="inline">:asc</code> is used as default.</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="5834760198-1">%{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5834760198-2">[</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;--author&quot;</span><span class="p" data-group-id="5834760198-2">]</span><span class="p" data-group-id="5834760198-1">}</span></code></pre><p>This translates to the following query parameter string:</p><pre><code class="URL">?order_by=[]name&amp;oder_by[]=--author</code></pre><p>You can use the <a href="#push_order/3"><code class="inline">AshPagify.push_order/3</code></a> function to set the order by clause in the <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p><pre><code class="makeup elixir" translate="no"><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">push_order</span><span class="p" data-group-id="5178005205-1">(</span><span class="p" data-group-id="5178005205-2">%</span><span class="nc" data-group-id="5178005205-2">AshPagify</span><span class="p" data-group-id="5178005205-2">{</span><span class="p" data-group-id="5178005205-2">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="5178005205-1">)</span></code></pre><h2 id="module-internal-parameters" class="section-heading">
  <a href="#module-internal-parameters" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Internal parameters</span>
</h2>
<p>AshPagify is designed to manage parameters that come from the user side. While it is
possible to alter those parameters and append extra filters upon receiving them,
it is advisable to clearly differentiate parameters coming from outside and the
parameters that your application adds internally.</p><p>Consider the scenario where you need to scope a query based on the current user.
In this case, it is better to create a separate function that introduces the
necessary filter clauses:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">list_posts</span><span class="p" data-group-id="8274653361-1">(</span><span class="p" data-group-id="8274653361-2">%{</span><span class="p" data-group-id="8274653361-2">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8274653361-3">%</span><span class="nc" data-group-id="8274653361-3">User</span><span class="p" data-group-id="8274653361-3">{</span><span class="p" data-group-id="8274653361-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">current_user</span><span class="p" data-group-id="8274653361-1">)</span><span class="w"> </span><span class="k" data-group-id="8274653361-4">do</span><span class="w">
  </span><span class="nc">Post</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">scope</span><span class="p" data-group-id="8274653361-5">(</span><span class="n">current_user</span><span class="p" data-group-id="8274653361-5">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate_and_run</span><span class="p" data-group-id="8274653361-6">(</span><span class="n">params</span><span class="p" data-group-id="8274653361-6">)</span><span class="w">
</span><span class="k" data-group-id="8274653361-4">end</span><span class="w">

</span><span class="kd">defp</span><span class="w"> </span><span class="nf">scope</span><span class="p" data-group-id="8274653361-7">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8274653361-8">%</span><span class="nc" data-group-id="8274653361-8">User</span><span class="p" data-group-id="8274653361-8">{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="8274653361-8">}</span><span class="p" data-group-id="8274653361-7">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">query</span><span class="w">
</span><span class="kd">defp</span><span class="w"> </span><span class="nf">scope</span><span class="p" data-group-id="8274653361-9">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8274653361-10">%</span><span class="nc" data-group-id="8274653361-10">User</span><span class="p" data-group-id="8274653361-10">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">user_id</span><span class="p" data-group-id="8274653361-10">}</span><span class="p" data-group-id="8274653361-9">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">filter_input</span><span class="p" data-group-id="8274653361-11">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8274653361-12">%{</span><span class="ss">user_id</span><span class="p">:</span><span class="w"> </span><span class="o">^</span><span class="n">user_id</span><span class="p" data-group-id="8274653361-12">}</span><span class="p" data-group-id="8274653361-11">)</span></code></pre><p>If you need to add extra filters that are only used internally and aren't exposed to the user,
you can pass them as a separate argument. This same argument can be used to override certain
options depending on the context in which the function is called.</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">list_posts</span><span class="p" data-group-id="7678073143-1">(</span><span class="p" data-group-id="7678073143-2">%{</span><span class="p" data-group-id="7678073143-2">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="w"> </span><span class="o">\\</span><span class="o">\\</span><span class="w"> </span><span class="p" data-group-id="7678073143-3">[</span><span class="p" data-group-id="7678073143-3">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7678073143-4">%</span><span class="nc" data-group-id="7678073143-4">User</span><span class="p" data-group-id="7678073143-4">{</span><span class="p" data-group-id="7678073143-4">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">current_user</span><span class="p" data-group-id="7678073143-1">)</span><span class="w"> </span><span class="k" data-group-id="7678073143-5">do</span><span class="w">
  </span><span class="n">ash_pagify_opts</span><span class="w"> </span><span class="o">=</span><span class="w">
    </span><span class="n">opts</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Keyword</span><span class="o">.</span><span class="n">put</span><span class="p" data-group-id="7678073143-6">(</span><span class="ss">:max_limit</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="7678073143-6">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Keyword</span><span class="o">.</span><span class="n">put</span><span class="p" data-group-id="7678073143-7">(</span><span class="ss">:default_limit</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="7678073143-7">)</span><span class="w">
    </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Keyword</span><span class="o">.</span><span class="n">put</span><span class="p" data-group-id="7678073143-8">(</span><span class="ss">:replace_invalid_params?</span><span class="p">,</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="7678073143-8">)</span><span class="w">

  </span><span class="nc">Post</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">scope</span><span class="p" data-group-id="7678073143-9">(</span><span class="n">current_user</span><span class="p" data-group-id="7678073143-9">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="n">apply_filters</span><span class="p" data-group-id="7678073143-10">(</span><span class="n">opts</span><span class="p" data-group-id="7678073143-10">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate_and_run</span><span class="p" data-group-id="7678073143-11">(</span><span class="n">params</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify_opts</span><span class="p" data-group-id="7678073143-11">)</span><span class="w">
</span><span class="k" data-group-id="7678073143-5">end</span><span class="w">

</span><span class="kd">defp</span><span class="w"> </span><span class="nf">scope</span><span class="p" data-group-id="7678073143-12">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7678073143-13">%</span><span class="nc" data-group-id="7678073143-13">User</span><span class="p" data-group-id="7678073143-13">{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="7678073143-13">}</span><span class="p" data-group-id="7678073143-12">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">query</span><span class="w">
</span><span class="kd">defp</span><span class="w"> </span><span class="nf">scope</span><span class="p" data-group-id="7678073143-14">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7678073143-15">%</span><span class="nc" data-group-id="7678073143-15">User</span><span class="p" data-group-id="7678073143-15">{</span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="n">user_id</span><span class="p" data-group-id="7678073143-15">}</span><span class="p" data-group-id="7678073143-14">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">filter_input</span><span class="p" data-group-id="7678073143-16">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7678073143-17">%{</span><span class="ss">user_id</span><span class="p">:</span><span class="w"> </span><span class="o">^</span><span class="n">user_id</span><span class="p" data-group-id="7678073143-17">}</span><span class="p" data-group-id="7678073143-16">)</span><span class="w">

</span><span class="kd">defp</span><span class="w"> </span><span class="nf">apply_filters</span><span class="p" data-group-id="7678073143-18">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="7678073143-18">)</span><span class="w"> </span><span class="k" data-group-id="7678073143-19">do</span><span class="w">
  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">reduce</span><span class="p" data-group-id="7678073143-20">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="7678073143-21">fn</span><span class="w">
    </span><span class="p" data-group-id="7678073143-22">{</span><span class="ss">:updated_at</span><span class="p">,</span><span class="w"> </span><span class="n">dt</span><span class="p" data-group-id="7678073143-22">}</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">filter_input</span><span class="p" data-group-id="7678073143-23">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7678073143-24">%{</span><span class="ss">updated_at</span><span class="p">:</span><span class="w"> </span><span class="n">dt</span><span class="p" data-group-id="7678073143-24">}</span><span class="p" data-group-id="7678073143-23">)</span><span class="w">
    </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">query</span><span class="w">
  </span><span class="k" data-group-id="7678073143-21">end</span><span class="p" data-group-id="7678073143-20">)</span><span class="w">
</span><span class="k" data-group-id="7678073143-19">end</span></code></pre><p>With this approach, you maintain a clean separation between user-driven parameters and
system-driven parameters, leading to more maintainable and less error-prone code. Please be
aware that in most cases it is better to use <code class="inline">Ash.Policy</code> to manage access control. This
example is just to illustrate the concept.</p><p>Under the hood, the <a href="#validate_and_run/4"><code class="inline">AshPagify.validate_and_run/4</code></a> or <a href="#validate_and_run!/4"><code class="inline">AshPagify.validate_and_run!/4</code></a> functions
just call <a href="#validate/2"><code class="inline">AshPagify.validate/2</code></a> and <a href="#run/4"><code class="inline">AshPagify.run/4</code></a>, which in turn calls <a href="#all/4"><code class="inline">AshPagify.all/4</code></a> and
<a href="#meta/3"><code class="inline">AshPagify.meta/3</code></a>.</p><p>See <a href="AshPagify.Meta.html"><code class="inline">AshPagify.Meta</code></a> for descriptions of the meta fields.</p><p>Alternatively, you may separate parameter validation and data fetching into different
steps using the <a href="#validate/2"><code class="inline">AshPagify.validate/2</code></a>, <a href="#validate!/2"><code class="inline">AshPagify.validate!/2</code></a>, and <a href="#run/4"><code class="inline">AshPagify.run/4</code></a> functions.
This allows you to manipulate the validated parameters, to modify the query depending on
the parameters, or to move the parameter validation to a different layer of your application.</p><pre><code class="makeup elixir" translate="no"><span class="k">with</span><span class="w"> </span><span class="p" data-group-id="4318050084-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="4318050084-1">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="4318050084-2">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p" data-group-id="4318050084-2">)</span><span class="w"> </span><span class="k" data-group-id="4318050084-3">do</span><span class="w">
  </span><span class="p" data-group-id="4318050084-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4318050084-5">{</span><span class="n">results</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="4318050084-5">}</span><span class="p" data-group-id="4318050084-4">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">run</span><span class="p" data-group-id="4318050084-6">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="4318050084-6">)</span><span class="w">
</span><span class="k" data-group-id="4318050084-3">end</span></code></pre><p>The aforementioned functions internally call the lower-level functions <a href="#all/4"><code class="inline">AshPagify.all/4</code></a> and
<a href="#meta/3"><code class="inline">AshPagify.meta/3</code></a>. If you have advanced requirements, you might prefer to use these functions
directly. However, it's important to note that these lower-level functions do not validate
the parameters. If parameters are generated based on user input, they should always be
validated first using <a href="#validate/2"><code class="inline">AshPagify.validate/2</code></a> or <a href="#validate!/2"><code class="inline">AshPagify.validate!/2</code></a> to ensure safe execution.</p><h2 id="module-release-management" class="section-heading">
  <a href="#module-release-management" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Release Management</span>
</h2>
<p>We use <a href="https://hexdocs.pm/git_ops/readme.html">git_opts</a> to manage our releases. To create a new release, run:</p><pre><code class="makeup bash" translate="no"><span class="">mix git_ops.release
</span></code></pre><p>This will bump the version, create a new tag, and push the changes to the repository. The GitHub action will then build and publish the new version to Hex.</p>
    </section>

</div>

  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Summary</span>
    </h1>
<div class="summary-types summary">
  <h2>
    <a href="#types">Types</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:option/0" data-no-tooltip translate="no">option()</a>

      </div>

        <div class="summary-synopsis"><p>These options can be passed to most functions or configured via the
application environment.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:order_by/0" data-no-tooltip translate="no">order_by()</a>

      </div>

        <div class="summary-synopsis"><p>Valid order_by types for the <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:scope/0" data-no-tooltip translate="no">scope()</a>

      </div>

        <div class="summary-synopsis"><p>A scope is a predefined filter that is merged with the user-provided filters.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#t:t/0" data-no-tooltip translate="no">t()</a>

      </div>

        <div class="summary-synopsis"><p>Represents the query parameters for full-text search, scoping, filtering, ordering and pagination.</p></div>

    </div>

</div>
<div class="summary-functions summary">
  <h2>
    <a href="#functions">Functions</a>
  </h2>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#active_scope?/2" data-no-tooltip translate="no">active_scope?(ash_pagify, scope)</a>

      </div>

        <div class="summary-synopsis"><p>Helper function to check if a scope is active in a AshPagify struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#all/4" data-no-tooltip translate="no">all(query_or_resource, ash_pagify, opts \\ [], args \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Returns an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Page.Offset.html#t:t/0"><code class="inline">Ash.Page.Offset.t/0</code></a> struct from the given <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a> or <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0"><code class="inline">Ash.Resource.t/0</code></a>
with the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameters and <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0"><code class="inline">Keyword.t/0</code></a> options.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#coerce_order_by/1" data-no-tooltip translate="no">coerce_order_by(order_by)</a>

      </div>

        <div class="summary-synopsis"><p>Transforms the given <code class="inline">order_by</code> parameter into a list of tuples with
the field and the default :asc direction.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#concat_sort/2" data-no-tooltip translate="no">concat_sort(list, acc \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Transforms the given <code class="inline">order_by</code> parameter into a list of strings (user input domain).</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#count/3" data-no-tooltip translate="no">count(query_or_resource, ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Returns the total count of entries matching the full-text search, filters, filter_form,
and scopes conditions in the given <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a> or <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0"><code class="inline">Ash.Resource.t/0</code></a> with the
given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameters and <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0"><code class="inline">Keyword.t/0</code></a> options.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#current_order/2" data-no-tooltip translate="no">current_order(arg1, field)</a>

      </div>

        <div class="summary-synopsis"><p>Returns the current order direction for the given field.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#extract_full_text_search/1" data-no-tooltip translate="no">extract_full_text_search(filters_map)</a>

      </div>

        <div class="summary-synopsis"><p>Extracts the full-text search setting from the filters map and returns a tuple of the filters map
without the full-text search setting and the full-text search setting.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#filter/2" data-no-tooltip translate="no">filter(q, ash_pagify)</a>

      </div>

        <div class="summary-synopsis"><p>Applies the <code class="inline">filter</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#filter_form/2" data-no-tooltip translate="no">filter_form(q, ash_pagify)</a>

      </div>

        <div class="summary-synopsis"><p>Applies the <code class="inline">filter_form</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#filter_form_to_filter_map/2" data-no-tooltip translate="no">filter_form_to_filter_map(resource, filter_form)</a>

      </div>

        <div class="summary-synopsis"><p>Transforms the <code class="inline">filter_form</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> into a filter map.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_index/2" data-no-tooltip translate="no">get_index(order_by, field)</a>

      </div>

        <div class="summary-synopsis"><p>Finds the current index of a field in the <code class="inline">order_by</code> list.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_option/3" data-no-tooltip translate="no">get_option(key, opts \\ [], default \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Returns the option with the given key.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#get_order_direction/2" data-no-tooltip translate="no">get_order_direction(order_by, index)</a>

      </div>

        <div class="summary-synopsis"><p>Returns the current order direction for the given index and <code class="inline">AshPagify.order_by</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#merge_filters/2" data-no-tooltip translate="no">merge_filters(ash_pagify, filters)</a>

      </div>

        <div class="summary-synopsis"><p>Merges the given filters with the filters of a AshPagify struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#meta/3" data-no-tooltip translate="no">meta(page, ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Returns meta information for the given query and ash_pagify that can be used for
building the pagination links.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#order_by/2" data-no-tooltip translate="no">order_by(q, ash_pagify)</a>

      </div>

        <div class="summary-synopsis"><p>Applies the <code class="inline">order_by</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#page/2" data-no-tooltip translate="no">page(ash_pagify, page \\ [count: true])</a>

      </div>

        <div class="summary-synopsis"><p>Returns a keyword list with the <code class="inline">limit</code>, <code class="inline">offset</code> and <code class="inline">count</code> parameters
from the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameter.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#paginate/3" data-no-tooltip translate="no">paginate(query_or_resource, ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Adds clauses for pagination to the resulting keyword list from the given
<a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameter.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#parse/3" data-no-tooltip translate="no">parse(query_or_resource, ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Adds clauses for full-text search, scoping, filtering, ordering and pagination to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>
or <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0"><code class="inline">Ash.Resource.t/0</code></a> from the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameters and <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0"><code class="inline">Keyword.t/0</code></a> options.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#prefix_to_order/1" data-no-tooltip translate="no">prefix_to_order(arg1)</a>

      </div>

        <div class="summary-synopsis"><p>Transforms the given field with order prefix into an <code class="inline">t:Ash.Sort.sort_order/t</code>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#push_order/3" data-no-tooltip translate="no">push_order(ash_pagify, field, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Updates the <code class="inline">order_by</code> value of a <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query/3" data-no-tooltip translate="no">query(q, ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Adds clauses for full-text search, scoping, filtering and ordering to an
<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a> from the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameter.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query_for_filters_map/3" data-no-tooltip translate="no">query_for_filters_map(query_or_resource, filters_map, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Creates an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html"><code class="inline">Ash.Query</code></a> from a filter map. Ideally, the filter map was previously
compiled with <a href="#query_to_filters_map/2"><code class="inline">AshPagify.query_to_filters_map/2</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#query_to_filters_map/3" data-no-tooltip translate="no">query_to_filters_map(query_or_resource, ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Takes the AshPagify.scopes and AshPagify.form_filter and compiles them into a
map of filters. The filters are merged with the base filters of the AshPagify struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reset_filter_form/1" data-no-tooltip translate="no">reset_filter_form(ash_pagify)</a>

      </div>

        <div class="summary-synopsis"><p>Removes all filter_form from a AshPagify struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reset_filters/1" data-no-tooltip translate="no">reset_filters(ash_pagify)</a>

      </div>

        <div class="summary-synopsis"><p>Removes all filters from a AshPagify struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#reset_order/1" data-no-tooltip translate="no">reset_order(ash_pagify)</a>

      </div>

        <div class="summary-synopsis"><p>Resets the order of a AshPagify struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#run/4" data-no-tooltip translate="no">run(query_or_resource, ash_pagify, opts \\ [], args \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Applies the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to the given <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a> or <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0"><code class="inline">Ash.Resource.t/0</code></a>,
retrieves the data and the <a href="AshPagify.Meta.html#t:t/0"><code class="inline">AshPagify.Meta.t/0</code></a> data.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#scope/3" data-no-tooltip translate="no">scope(q, ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Applies the <code class="inline">scopes</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#search/3" data-no-tooltip translate="no">search(q, ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Applies the <code class="inline">search</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_filter_form/3" data-no-tooltip translate="no">set_filter_form(meta, filter_form, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Updates the filter form of a AshPagify.Meta struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_limit/3" data-no-tooltip translate="no">set_limit(ash_pagify, limit, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Sets the limit value of a <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_offset/2" data-no-tooltip translate="no">set_offset(ash_pagify, offset)</a>

      </div>

        <div class="summary-synopsis"><p>Sets the offset value of a <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_scope/3" data-no-tooltip translate="no">set_scope(ash_pagify, scope, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Sets the scope of a AshPagify struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_search/3" data-no-tooltip translate="no">set_search(ash_pagify, search, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Sets the search of a AshPagify struct.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#set_tsvector/2" data-no-tooltip translate="no">set_tsvector(tsvector, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Sets the tsvector value in the full_text_search clause of the <code class="inline">Keyword.t</code> opts parameter.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#to_next_offset/2" data-no-tooltip translate="no">to_next_offset(ash_pagify, total_count \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Sets the offset of a AshPagify struct to the next page depending on the limit.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#to_previous_offset/1" data-no-tooltip translate="no">to_previous_offset(ash_pagify)</a>

      </div>

        <div class="summary-synopsis"><p>Sets the offset of a AshPagify struct to the page depending on the limit.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validate/3" data-no-tooltip translate="no">validate(query_or_resource, map_or_ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Validates a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a>.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validate!/3" data-no-tooltip translate="no">validate!(query_or_resource, map_or_ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Same as <a href="#validate/2"><code class="inline">AshPagify.validate/2</code></a>, but raises a <a href="AshPagify.Error.Query.InvalidParamsError.html"><code class="inline">AshPagify.Error.Query.InvalidParamsError</code></a> if the
parameters are invalid.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validate_and_run/4" data-no-tooltip translate="no">validate_and_run(query_or_resource, map_or_ash_pagify, opts \\ [], args \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Validates the given ash_pagify parameters and retrieves the data and meta data on
success.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validate_and_run!/4" data-no-tooltip translate="no">validate_and_run!(query_or_resource, map_or_ash_pagify, opts \\ [], args \\ nil)</a>

      </div>

        <div class="summary-synopsis"><p>Same as <a href="#validate_and_run/4"><code class="inline">AshPagify.validate_and_run/4</code></a>, but raises on error.</p></div>

    </div>

    <div class="summary-row">
      <div class="summary-signature">
        <a href="#validated_query/3" data-no-tooltip translate="no">validated_query(query_or_resource, map_or_ash_pagify, opts \\ [])</a>

      </div>

        <div class="summary-synopsis"><p>Validates the given query or resource and ash_pagify parameters and returns a
validated query.</p></div>

    </div>

</div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Types</span>
    </h1>
    <div class="types-list">
<section class="detail" id="t:option/0">

  <div class="detail-header">
    <a href="#t:option/0" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">option()</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L76" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> option() ::
  {default_limit :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()}
  | {max_limit :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()}
  | {replace_invalid_params? :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()}
  | {ash_pagify_scopes :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()}
  | {reset_on_filter? :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()}
  | {full_text_search :: [<a href="AshPagify.Tsearch.html#t:tsearch_option/0">AshPagify.Tsearch.tsearch_option</a>()]}</pre>

      </div>

<p>These options can be passed to most functions or configured via the
application environment.</p><h2 id="t:option/0-options" class="section-heading">
  <a href="#t:option/0-options" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Options</span>
</h2>
<p>Default ash_pagify options in addition to the ones provided by the
<a href="https://hexdocs.pm/ash/3.3.3/Ash.html#read/2"><code class="inline">Ash.read/2</code></a> function. These options are used to configure the
pagination behavior.</p><ul><li><code class="inline">:default_limit</code> - The default number of records to return. Defaults to 25.
Can be overridden by the resource's <code class="inline">default_limit</code> function.</li><li><code class="inline">:max_limit</code> - The maximum number of records that can be returned. Defaults
to 100.</li><li><code class="inline">:replace_invalid_params?</code> - If set to <code class="inline">true</code>, invalid parameters will be
replaced with the default value. If set to <code class="inline">false</code>, invalid parameters
will result in an error. Defaults to <code class="inline">false</code>.</li><li><code class="inline">:ash_pagify_scopes</code> - A map of predefined filters to apply to the query. Each map
entry itself is a group (list) of <a href="#t:scope/0"><code class="inline">AshPagify.scope/0</code></a> entries.</li><li><code class="inline">:reset_on_filter?</code> - If set to <code class="inline">true</code>, the offset will be reset to 0 when
a filter is applied. Defaults to <code class="inline">true</code>.</li><li><code class="inline">:full_text_search</code> - A list of options for full-text search. See
<a href="AshPagify.Tsearch.html#t:tsearch_option/0"><code class="inline">AshPagify.Tsearch.tsearch_option/0</code></a>.</li></ul><h2 id="t:option/0-look-up-order" class="section-heading">
  <a href="#t:option/0-look-up-order" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Look-up order</span>
</h2>
<p>Options are looked up in the following order:</p><ol><li>Function arguments (highest priority)</li><li>Resource-level options (set in the resource module)</li><li>Global options in the application environment (set in config files)</li><li>Library defaults (lowest priority)</li></ol>
  </section>
</section>
<section class="detail" id="t:order_by/0">

  <div class="detail-header">
    <a href="#t:order_by/0" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">order_by()</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L108" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> order_by() ::
  [<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>() | <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | {<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), <a href="https://hexdocs.pm/ash/3.3.3/Ash.Sort.html#t:sort_order/0">Ash.Sort.sort_order</a>()} | [<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()]] | nil</pre>

      </div>

<p>Valid order_by types for the <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> struct.</p>
  </section>
</section>
<section class="detail" id="t:scope/0">

  <div class="detail-header">
    <a href="#t:scope/0" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">scope()</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L100" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> scope() ::
  {name :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()} | {filter :: <a href="https://hexdocs.pm/ash/3.3.3/Ash.Filter.html#t:t/0">Ash.Filter.t</a>()} | {default? :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()}</pre>

      </div>

<p>A scope is a predefined filter that is merged with the user-provided filters.</p><p>Scope definitions live in the resource provided <code class="inline">ash_pagify_scopes</code> function or in
the provided <a href="#t:option/0"><code class="inline">AshPagify.option/0</code></a>. Contrary to user-provided filters, scope filters
are not parsed as user input and are not validated as such. However, they are
validated in the <a href="#validate_and_run/4"><code class="inline">AshPagify.validate_and_run/4</code></a> context. User-provided parameters are
used to lookup the scope filter. If the scope filter is found, it is applied to the query.
If the scope filter is not found, an error is raised.</p><h2 id="t:scope/0-fields" class="section-heading">
  <a href="#t:scope/0-fields" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fields</span>
</h2>
<ul><li><code class="inline">:name</code> - The name of the filter for the scope.</li><li><code class="inline">:filter</code> - The filter to apply to the query.</li><li><code class="inline">:default?</code> - If set to <code class="inline">true</code>, the scope is applied by default.</li></ul>
  </section>
</section>
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" data-no-tooltip title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">t()</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L125" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: %AshPagify{
  filter_form: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | nil,
  filters: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | nil,
  limit: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pos_integer</a>() | nil,
  offset: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>() | nil,
  order_by: <a href="#t:order_by/0">order_by</a>(),
  scopes: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | nil,
  search: <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil
}</pre>

      </div>

<p>Represents the query parameters for full-text search, scoping, filtering, ordering and pagination.</p><h3 id="t:t/0-fields" class="section-heading">
  <a href="#t:t/0-fields" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Fields</span>
</h3>
<ul><li><code class="inline">limit</code>, <code class="inline">offset</code>: Used for offset-based pagination.</li><li><code class="inline">scopes</code>: A map of user provided scopes to apply to the query. Scopes are internally translated to
predefined filters and merged into the query enginge.</li><li><code class="inline">filter_form</code>: A map of filters provided by <a href="https://hexdocs.pm/ash_phoenix/2.1.1/AshPhoenix.FilterForm.html"><code class="inline">AshPhoenix.FilterForm</code></a> module. These filters are meant
to be used in user interfaces.</li><li><code class="inline">filters</code>: A map of manually provided filters to apply to the query. These filters must be provided in
the map syntax and are meant to be used in business logic context (see <a href="https://hexdocs.pm/ash/3.3.3/Ash.Filter.html"><code class="inline">Ash.Filter</code></a> for examples).</li><li><code class="inline">order_by</code>: A list of fields to order by (see <a href="https://hexdocs.pm/ash/3.3.3/Ash.Sort.html#parse_input/3"><code class="inline">Ash.Sort.parse_input/3</code></a> for all available orders).</li><li><code class="inline">search</code>: A string to search for in the full-text search column.</li></ul>
  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
      </a>
      <span class="text">Functions</span>
    </h1>
    <div class="functions-list">
<section class="detail" id="active_scope?/2">

  <div class="detail-header">
    <a href="#active_scope?/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">active_scope?(ash_pagify, scope)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1456" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> active_scope?(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">boolean</a>()</pre>

      </div>

<p>Helper function to check if a scope is active in a AshPagify struct.</p><h2 id="active_scope?/2-examples" class="section-heading">
  <a href="#active_scope?/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">active_scope?</span><span class="p" data-group-id="6074975078-1">(</span><span class="p" data-group-id="6074975078-2">%</span><span class="nc" data-group-id="6074975078-2">AshPagify</span><span class="p" data-group-id="6074975078-2">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6074975078-3">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="6074975078-3">}</span><span class="p" data-group-id="6074975078-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6074975078-4">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="6074975078-4">}</span><span class="p" data-group-id="6074975078-1">)</span><span class="w">
</span><span class="no">true</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">active_scope?</span><span class="p" data-group-id="6074975078-5">(</span><span class="p" data-group-id="6074975078-6">%</span><span class="nc" data-group-id="6074975078-6">AshPagify</span><span class="p" data-group-id="6074975078-6">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6074975078-7">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="6074975078-7">}</span><span class="p" data-group-id="6074975078-6">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6074975078-8">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:inactive</span><span class="p" data-group-id="6074975078-8">}</span><span class="p" data-group-id="6074975078-5">)</span><span class="w">
</span><span class="no">false</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">active_scope?</span><span class="p" data-group-id="6074975078-9">(</span><span class="p" data-group-id="6074975078-10">%</span><span class="nc" data-group-id="6074975078-10">AshPagify</span><span class="p" data-group-id="6074975078-10">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6074975078-11">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="6074975078-11">}</span><span class="p" data-group-id="6074975078-10">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6074975078-12">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="6074975078-12">}</span><span class="p" data-group-id="6074975078-9">)</span><span class="w">
</span><span class="no">false</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">active_scope?</span><span class="p" data-group-id="6074975078-13">(</span><span class="p" data-group-id="6074975078-14">%</span><span class="nc" data-group-id="6074975078-14">AshPagify</span><span class="p" data-group-id="6074975078-14">{</span><span class="p" data-group-id="6074975078-14">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6074975078-15">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="6074975078-15">}</span><span class="p" data-group-id="6074975078-13">)</span><span class="w">
</span><span class="no">false</span></code></pre>
  </section>
</section>
<section class="detail" id="all/4">

    <span id="all/2"></span>

    <span id="all/3"></span>

  <div class="detail-header">
    <a href="#all/4" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">all(query_or_resource, ash_pagify, opts \\ [], args \\ nil)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L296" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> all(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()) ::
  <a href="https://hexdocs.pm/ash/3.3.3/Ash.Page.Offset.html#t:t/0">Ash.Page.Offset.t</a>()</pre>

      </div>

<p>Returns an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Page.Offset.html#t:t/0"><code class="inline">Ash.Page.Offset.t/0</code></a> struct from the given <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a> or <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0"><code class="inline">Ash.Resource.t/0</code></a>
with the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameters and <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0"><code class="inline">Keyword.t/0</code></a> options.</p><p>The <code class="inline">opts</code> keyword list is used to pass additional options to the query engine.
It should conform to the list of valid options at <a href="https://hexdocs.pm/ash/3.3.3/Ash.html#read/2"><code class="inline">Ash.read/2</code></a>.</p><ul><li><code class="inline">AshPagify.search</code> is used to apply full-text search to the query.</li><li><code class="inline">Paigfy.scopes</code> are used to apply predefined filters to the query.</li><li><code class="inline">AshPagify.filter_form</code> is used to apply filters generated by the <a href="https://hexdocs.pm/ash_phoenix/2.1.1/AshPhoenix.FilterForm.html"><code class="inline">AshPhoenix.FilterForm</code></a> module.</li><li><code class="inline">AshPagify.filters</code> and <code class="inline">AshPagify.order_by</code> are used to filter and order the query.</li><li><code class="inline">AshPagify.limit</code> and <code class="inline">AshPagify.offset</code> are used to paginate the query.</li></ul><p>The user input parameters are represented by the <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> type. Any <code class="inline">nil</code> values
will be ignored.</p><p>If the <code class="inline">:action</code> option is set (to perform a custom read action), the fourth argument
<code class="inline">args</code> will be passed to the action as arguments.</p><h2 id="all/4-examples" class="section-heading">
  <a href="#all/4-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4631616746-1">%</span><span class="nc" data-group-id="4631616746-1">Ash.Page.Offset</span><span class="p" data-group-id="4631616746-1">{</span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="n">r</span><span class="p" data-group-id="4631616746-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">all</span><span class="p" data-group-id="4631616746-2">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4631616746-3">%</span><span class="nc" data-group-id="4631616746-3">AshPagify</span><span class="p" data-group-id="4631616746-3">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4631616746-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;inexistent&quot;</span><span class="p" data-group-id="4631616746-4">}</span><span class="p" data-group-id="4631616746-3">}</span><span class="p" data-group-id="4631616746-2">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">r</span><span class="w">
</span><span class="p" data-group-id="4631616746-5">[</span><span class="p" data-group-id="4631616746-5">]</span></code></pre><p>Or with an initial query:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">filter_input</span><span class="p" data-group-id="8074148925-1">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8074148925-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;inexistent&quot;</span><span class="p" data-group-id="8074148925-2">}</span><span class="p" data-group-id="8074148925-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8074148925-3">%</span><span class="nc" data-group-id="8074148925-3">Ash.Page.Offset</span><span class="p" data-group-id="8074148925-3">{</span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="n">r</span><span class="p" data-group-id="8074148925-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">all</span><span class="p" data-group-id="8074148925-4">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8074148925-5">%</span><span class="nc" data-group-id="8074148925-5">AshPagify</span><span class="p" data-group-id="8074148925-5">{</span><span class="p" data-group-id="8074148925-5">}</span><span class="p" data-group-id="8074148925-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">r</span><span class="w">
</span><span class="p" data-group-id="8074148925-6">[</span><span class="p" data-group-id="8074148925-6">]</span></code></pre><p>Or with a custom read action:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Comment</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Comment</span><span class="o">.</span><span class="n">read!</span><span class="p" data-group-id="2000518445-1">(</span><span class="p" data-group-id="2000518445-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="2000518445-2">(</span><span class="p" data-group-id="2000518445-2">)</span><span class="w">
</span><span class="mi">9</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2000518445-3">%</span><span class="nc" data-group-id="2000518445-3">AshPagify</span><span class="p" data-group-id="2000518445-3">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2000518445-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="2000518445-4">}</span><span class="p" data-group-id="2000518445-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="2000518445-5">%</span><span class="nc" data-group-id="2000518445-5">Ash.Page.Offset</span><span class="p" data-group-id="2000518445-5">{</span><span class="ss">results</span><span class="p">:</span><span class="w"> </span><span class="n">posts</span><span class="p" data-group-id="2000518445-5">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">all</span><span class="p" data-group-id="2000518445-6">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="2000518445-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hd</span><span class="p" data-group-id="2000518445-7">(</span><span class="n">posts</span><span class="p" data-group-id="2000518445-7">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="2000518445-8">%</span><span class="nc" data-group-id="2000518445-8">Ash.Page.Offset</span><span class="p" data-group-id="2000518445-8">{</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="n">count</span><span class="p" data-group-id="2000518445-8">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">all</span><span class="p" data-group-id="2000518445-9">(</span><span class="nc">Comment</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2000518445-10">%</span><span class="nc" data-group-id="2000518445-10">AshPagify</span><span class="p" data-group-id="2000518445-10">{</span><span class="p" data-group-id="2000518445-10">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2000518445-11">[</span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:by_post</span><span class="p" data-group-id="2000518445-11">]</span><span class="p">,</span><span class="w"> </span><span class="n">post</span><span class="o">.</span><span class="n">id</span><span class="p" data-group-id="2000518445-9">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">count</span><span class="w">
</span><span class="mi">2</span></code></pre><p>Or with scopes:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2560988073-1">%</span><span class="nc" data-group-id="2560988073-1">AshPagify</span><span class="p" data-group-id="2560988073-1">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2560988073-2">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="2560988073-2">}</span><span class="p" data-group-id="2560988073-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="2560988073-3">%</span><span class="nc" data-group-id="2560988073-3">Ash.Page.Offset</span><span class="p" data-group-id="2560988073-3">{</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="n">count</span><span class="p" data-group-id="2560988073-3">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">all</span><span class="p" data-group-id="2560988073-4">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="2560988073-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">count</span><span class="w">
</span><span class="mi">1</span></code></pre><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p>
  </section>
</section>
<section class="detail" id="coerce_order_by/1">

  <div class="detail-header">
    <a href="#coerce_order_by/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">coerce_order_by(order_by)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L2110" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> coerce_order_by(<a href="#t:order_by/0">order_by</a>()) :: <a href="#t:order_by/0">order_by</a>()</pre>

      </div>

<p>Transforms the given <code class="inline">order_by</code> parameter into a list of tuples with
the field and the default :asc direction.</p><h2 id="coerce_order_by/1-examples" class="section-heading">
  <a href="#coerce_order_by/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">coerce_order_by</span><span class="p" data-group-id="4245839352-1">(</span><span class="no">nil</span><span class="p" data-group-id="4245839352-1">)</span><span class="w">
</span><span class="p" data-group-id="4245839352-2">[</span><span class="p" data-group-id="4245839352-2">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">coerce_order_by</span><span class="p" data-group-id="4245839352-3">(</span><span class="p" data-group-id="4245839352-4">[</span><span class="p" data-group-id="4245839352-4">]</span><span class="p" data-group-id="4245839352-3">)</span><span class="w">
</span><span class="p" data-group-id="4245839352-5">[</span><span class="p" data-group-id="4245839352-5">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">coerce_order_by</span><span class="p" data-group-id="4245839352-6">(</span><span class="ss">:name</span><span class="p" data-group-id="4245839352-6">)</span><span class="w">
</span><span class="p" data-group-id="4245839352-7">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="4245839352-7">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">coerce_order_by</span><span class="p" data-group-id="4245839352-8">(</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="4245839352-8">)</span><span class="w">
</span><span class="p" data-group-id="4245839352-9">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="4245839352-9">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">coerce_order_by</span><span class="p" data-group-id="4245839352-10">(</span><span class="p" data-group-id="4245839352-11">{</span><span class="ss">:name</span><span class="p">,</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="4245839352-11">}</span><span class="p" data-group-id="4245839352-10">)</span><span class="w">
</span><span class="p" data-group-id="4245839352-12">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="4245839352-12">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">coerce_order_by</span><span class="p" data-group-id="4245839352-13">(</span><span class="p" data-group-id="4245839352-14">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc</span><span class="p" data-group-id="4245839352-14">]</span><span class="p" data-group-id="4245839352-13">)</span><span class="w">
</span><span class="p" data-group-id="4245839352-15">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc</span><span class="p" data-group-id="4245839352-15">]</span></code></pre>
  </section>
</section>
<section class="detail" id="concat_sort/2">

    <span id="concat_sort/1"></span>

  <div class="detail-header">
    <a href="#concat_sort/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">concat_sort(list, acc \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L618" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> concat_sort(<a href="#t:order_by/0">order_by</a>(), [<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()]) :: [<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()]</pre>

      </div>

<p>Transforms the given <code class="inline">order_by</code> parameter into a list of strings (user input domain).</p>
  </section>
</section>
<section class="detail" id="count/3">

    <span id="count/2"></span>

  <div class="detail-header">
    <a href="#count/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">count(query_or_resource, ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L362" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> count(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>()</pre>

      </div>

<p>Returns the total count of entries matching the full-text search, filters, filter_form,
and scopes conditions in the given <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a> or <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0"><code class="inline">Ash.Resource.t/0</code></a> with the
given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameters and <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0"><code class="inline">Keyword.t/0</code></a> options.</p><p>The pagination and ordering options are disregarded.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="8112295500-1">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8112295500-2">%</span><span class="nc" data-group-id="8112295500-2">AshPagify</span><span class="p" data-group-id="8112295500-2">{</span><span class="p" data-group-id="8112295500-2">}</span><span class="p" data-group-id="8112295500-1">)</span><span class="w">
</span><span class="mi">3</span></code></pre><p>You can override the default query by passing the <code class="inline">:count_query</code> option. This
doesn't make a lot of sense when you use <a href="#count/3"><code class="inline">count/3</code></a> directly, but allows you to
optimize the count query when you use one of the <a href="#run/4"><code class="inline">run/4</code></a>,
<a href="#validate_and_run/4"><code class="inline">validate_and_run/4</code></a> and <a href="#validate_and_run!/4"><code class="inline">validate_and_run!/4</code></a> functions.</p><pre><code class="makeup elixir" translate="no"><span class="n">query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">expensive</span><span class="w"> </span><span class="n">query</span><span class="w">
</span><span class="n">count_query</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="0450905425-1">(</span><span class="nc">Post</span><span class="p" data-group-id="0450905425-1">)</span><span class="w">
</span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="0450905425-2">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0450905425-3">%</span><span class="nc" data-group-id="0450905425-3">AshPagify</span><span class="p" data-group-id="0450905425-3">{</span><span class="p" data-group-id="0450905425-3">}</span><span class="p">,</span><span class="w"> </span><span class="ss">count_query</span><span class="p">:</span><span class="w"> </span><span class="n">count_query</span><span class="p" data-group-id="0450905425-2">)</span></code></pre><p>The full-text search and various filter parameters of the given AshPagify are applied
to the custom count query.</p><p>If for some reason you already have the count, you can pass it as the <code class="inline">:count</code>
option.</p><pre><code class="makeup elixir" translate="no"><span class="n">count</span><span class="p" data-group-id="5280231320-1">(</span><span class="n">query</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5280231320-2">%</span><span class="nc" data-group-id="5280231320-2">AshPagify</span><span class="p" data-group-id="5280231320-2">{</span><span class="p" data-group-id="5280231320-2">}</span><span class="p">,</span><span class="w"> </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="ss">for</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p" data-group-id="5280231320-1">)</span></code></pre><p>If you pass both the <code class="inline">:count</code> and the <code class="inline">:count_query</code> options, the <code class="inline">:count</code>
option will take precedence.</p><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine. Or you can use <a href="#validate_and_run/4"><code class="inline">AshPagify.validate_and_run/4</code></a> or
<a href="#validate_and_run!/4"><code class="inline">AshPagify.validate_and_run!/4</code></a> instead of this function.</p>
  </section>
</section>
<section class="detail" id="current_order/2">

  <div class="detail-header">
    <a href="#current_order/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">current_order(arg1, field)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1949" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> current_order(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: <a href="https://hexdocs.pm/ash/3.3.3/Ash.Sort.html#t:sort_order/0">Ash.Sort.sort_order</a>() | nil</pre>

      </div>

<p>Returns the current order direction for the given field.</p><h2 id="current_order/2-examples" class="section-heading">
  <a href="#current_order/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5828735908-1">%</span><span class="nc" data-group-id="5828735908-1">AshPagify</span><span class="p" data-group-id="5828735908-1">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5828735908-2">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="5828735908-2">]</span><span class="p" data-group-id="5828735908-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">current_order</span><span class="p" data-group-id="5828735908-3">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="5828735908-3">)</span><span class="w">
</span><span class="ss">:desc</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">current_order</span><span class="p" data-group-id="5828735908-4">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">:age</span><span class="p" data-group-id="5828735908-4">)</span><span class="w">
</span><span class="ss">:asc</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">current_order</span><span class="p" data-group-id="5828735908-5">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">:species</span><span class="p" data-group-id="5828735908-5">)</span><span class="w">
</span><span class="no">nil</span></code></pre><p>If the field is not an atom, the function will return <code class="inline">nil</code>.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="1267110649-1">%</span><span class="nc" data-group-id="1267110649-1">AshPagify</span><span class="p" data-group-id="1267110649-1">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1267110649-2">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc</span><span class="p" data-group-id="1267110649-2">]</span><span class="p" data-group-id="1267110649-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">current_order</span><span class="p" data-group-id="1267110649-3">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="1267110649-3">)</span><span class="w">
</span><span class="no">nil</span></code></pre><p>If <code class="inline">AshPagify.order_by</code> is nil, the function will return <code class="inline">nil</code>.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">current_order</span><span class="p" data-group-id="5969395034-1">(</span><span class="p" data-group-id="5969395034-2">%</span><span class="nc" data-group-id="5969395034-2">AshPagify</span><span class="p" data-group-id="5969395034-2">{</span><span class="p" data-group-id="5969395034-2">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="5969395034-1">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="extract_full_text_search/1">

  <div class="detail-header">
    <a href="#extract_full_text_search/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">extract_full_text_search(filters_map)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1838" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> extract_full_text_search(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()) :: {<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | nil}</pre>

      </div>

<p>Extracts the full-text search setting from the filters map and returns a tuple of the filters map
without the full-text search setting and the full-text search setting.</p><p>The full-text search setting is stored under the key <code class="inline">&quot;__full_text_search&quot;</code> in the
filters map (on in the <code class="inline">and</code> or <code class="inline">or</code> base of the filters_map). If the full-text
search setting is not found, the function will return the filters map as is.</p>
  </section>
</section>
<section class="detail" id="filter/2">

  <div class="detail-header">
    <a href="#filter/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">filter(q, ash_pagify)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L875" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> filter(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>(), <a href="#t:t/0">t</a>()) :: <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>()</pre>

      </div>

<p>Applies the <code class="inline">filter</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p><p>Used by <a href="#query/2"><code class="inline">AshPagify.query/2</code></a>. See <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#filter/2"><code class="inline">Ash.Query.filter/2</code></a> for more information.</p><p>For a completed list of filter operators, see <a href="https://hexdocs.pm/ash/3.3.3/Ash.Filter.html"><code class="inline">Ash.Filter</code></a>.</p><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p><h2 id="filter/2-examples" class="section-heading">
  <a href="#filter/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="5064899145-1">(</span><span class="nc">Post</span><span class="p" data-group-id="5064899145-1">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5064899145-2">%</span><span class="nc" data-group-id="5064899145-2">AshPagify</span><span class="p" data-group-id="5064899145-2">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5064899145-3">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="5064899145-3">}</span><span class="p" data-group-id="5064899145-2">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">filter</span><span class="p" data-group-id="5064899145-4">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="5064899145-4">)</span><span class="w">
  </span><span class="p" data-group-id="5064899145-5">#</span><span class="nc" data-group-id="5064899145-5">Ash.Query</span><span class="p" data-group-id="5064899145-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5064899145-6">#</span><span class="nc" data-group-id="5064899145-6">Ash.Filter</span><span class="p" data-group-id="5064899145-6">&lt;</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="5064899145-6">&gt;</span><span class="p" data-group-id="5064899145-5">&gt;</span></code></pre><p>Or multiple filters:</p><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="2054756113-1">(</span><span class="nc">Post</span><span class="p" data-group-id="2054756113-1">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2054756113-2">%</span><span class="nc" data-group-id="2054756113-2">AshPagify</span><span class="p" data-group-id="2054756113-2">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2054756113-3">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">id</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p" data-group-id="2054756113-3">}</span><span class="p" data-group-id="2054756113-2">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">filter</span><span class="p" data-group-id="2054756113-4">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="2054756113-4">)</span><span class="w">
  </span><span class="p" data-group-id="2054756113-5">#</span><span class="nc" data-group-id="2054756113-5">Ash.Query</span><span class="p" data-group-id="2054756113-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2054756113-6">#</span><span class="nc" data-group-id="2054756113-6">Ash.Filter</span><span class="p" data-group-id="2054756113-6">&lt;</span><span class="n">id</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="2054756113-6">&gt;</span><span class="p" data-group-id="2054756113-5">&gt;</span></code></pre><p>Or by relation:</p><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="3257328969-1">(</span><span class="nc">Post</span><span class="p" data-group-id="3257328969-1">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3257328969-2">%</span><span class="nc" data-group-id="3257328969-2">AshPagify</span><span class="p" data-group-id="3257328969-2">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3257328969-3">%{</span><span class="ss">comments</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3257328969-4">%{</span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="3257328969-4">}</span><span class="p" data-group-id="3257328969-3">}</span><span class="p" data-group-id="3257328969-2">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">filter</span><span class="p" data-group-id="3257328969-5">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="3257328969-5">)</span><span class="w">
  </span><span class="p" data-group-id="3257328969-6">#</span><span class="nc" data-group-id="3257328969-6">Ash.Query</span><span class="p" data-group-id="3257328969-6">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3257328969-7">#</span><span class="nc" data-group-id="3257328969-7">Ash.Filter</span><span class="p" data-group-id="3257328969-7">&lt;</span><span class="n">comments</span><span class="o">.</span><span class="n">body</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="3257328969-7">&gt;</span><span class="p" data-group-id="3257328969-6">&gt;</span></code></pre>
  </section>
</section>
<section class="detail" id="filter_form/2">

  <div class="detail-header">
    <a href="#filter_form/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">filter_form(q, ash_pagify)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L823" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> filter_form(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>(), <a href="#t:t/0">t</a>()) :: <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>()</pre>

      </div>

<p>Applies the <code class="inline">filter_form</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p><p>Used by <a href="#query/2"><code class="inline">AshPagify.query/2</code></a>. See <a href="https://hexdocs.pm/ash_phoenix/2.1.1/AshPhoenix.FilterForm.html"><code class="inline">AshPhoenix.FilterForm</code></a> for more information.</p><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p><h2 id="filter_form/2-examples" class="section-heading">
  <a href="#filter_form/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7779464303-1">(</span><span class="nc">Post</span><span class="p" data-group-id="7779464303-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7779464303-2">%</span><span class="nc" data-group-id="7779464303-2">AshPagify</span><span class="p" data-group-id="7779464303-2">{</span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7779464303-3">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="7779464303-3">}</span><span class="p" data-group-id="7779464303-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">filter_form</span><span class="p" data-group-id="7779464303-4">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="7779464303-4">)</span><span class="w">
</span><span class="p" data-group-id="7779464303-5">#</span><span class="nc" data-group-id="7779464303-5">Ash.Query</span><span class="p" data-group-id="7779464303-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7779464303-6">#</span><span class="nc" data-group-id="7779464303-6">Ash.Filter</span><span class="p" data-group-id="7779464303-6">&lt;</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="7779464303-6">&gt;</span><span class="p" data-group-id="7779464303-5">&gt;</span></code></pre>
  </section>
</section>
<section class="detail" id="filter_form_to_filter_map/2">

  <div class="detail-header">
    <a href="#filter_form_to_filter_map/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">filter_form_to_filter_map(resource, filter_form)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1617" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> filter_form_to_filter_map(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | nil) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>()</pre>

      </div>

<p>Transforms the <code class="inline">filter_form</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> into a filter map.</p><p>Used by <a href="#filter_form/2"><code class="inline">AshPagify.filter_form/2</code></a>. See <a href="https://hexdocs.pm/ash_phoenix/2.1.1/AshPhoenix.FilterForm.html"><code class="inline">AshPhoenix.FilterForm</code></a> for more information.</p><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p><h2 id="filter_form_to_filter_map/2-examples" class="section-heading">
  <a href="#filter_form_to_filter_map/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="1342598303-1">%</span><span class="nc" data-group-id="1342598303-1">AshPagify</span><span class="p" data-group-id="1342598303-1">{</span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1342598303-2">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="1342598303-2">}</span><span class="p" data-group-id="1342598303-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">filter_form_to_filter_map</span><span class="p" data-group-id="1342598303-3">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">filter_form</span><span class="p" data-group-id="1342598303-3">)</span><span class="w">
</span><span class="p" data-group-id="1342598303-4">%{</span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="1342598303-5">[</span><span class="p" data-group-id="1342598303-6">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="1342598303-7">%{</span><span class="s">&quot;eq&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="1342598303-7">}</span><span class="p" data-group-id="1342598303-6">}</span><span class="p" data-group-id="1342598303-5">]</span><span class="p" data-group-id="1342598303-4">}</span></code></pre>
  </section>
</section>
<section class="detail" id="get_index/2">

  <div class="detail-header">
    <a href="#get_index/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_index(order_by, field)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L2138" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_index(<a href="#t:order_by/0">order_by</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>() | nil</pre>

      </div>

<p>Finds the current index of a field in the <code class="inline">order_by</code> list.</p><p>Following rules are applied:</p><ul><li>if the <code class="inline">order_by</code> is <code class="inline">nil</code>, <code class="inline">nil</code> is returned</li><li>if the <code class="inline">order_by</code> is an atom or a binary, <code class="inline">nil</code> is returned</li><li>if the <code class="inline">order_by</code> is a tuple, <code class="inline">nil</code> is returned</li><li>if the <code class="inline">order_by</code> is a list, the index of the field is returned</li></ul>
  </section>
</section>
<section class="detail" id="get_option/3">

    <span id="get_option/1"></span>

    <span id="get_option/2"></span>

  <div class="detail-header">
    <a href="#get_option/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_option(key, opts \\ [], default \\ nil)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L2290" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_option(<a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()) :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()</pre>

      </div>

<p>Returns the option with the given key.</p><p>The look-up order is:</p><ol><li>the keyword list passed as the second argument</li><li>the Ash.Resource resource, if the passed list includes the <code class="inline">:for</code> option</li><li>the application environment</li><li>the AshPagify default value if defined</li><li>the default passed as the last argument</li></ol><p>For the <code class="inline">:ash_pagify_scopes</code> option, the function will deep merge the options
in reverse order (keyword overrides resource, resource overrides global, etc.)</p><h2 id="get_option/3-examples-for-ash_pagify_scopes" class="section-heading">
  <a href="#get_option/3-examples-for-ash_pagify_scopes" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples for <code class="inline">:ash_pagify_scopes</code></span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2711695704-1">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">ash_pagify_scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-2">%{</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-3">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="2711695704-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:user</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-5">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;changed&quot;</span><span class="p" data-group-id="2711695704-5">}</span><span class="p" data-group-id="2711695704-4">}</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="2711695704-6">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:other</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-7">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;other&quot;</span><span class="p" data-group-id="2711695704-7">}</span><span class="p" data-group-id="2711695704-6">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="2711695704-3">]</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-8">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="2711695704-9">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">default?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="2711695704-9">}</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="2711695704-10">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-11">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-12">%{</span><span class="ss">lt</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2711695704-12">}</span><span class="p" data-group-id="2711695704-11">}</span><span class="p" data-group-id="2711695704-10">}</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">      </span><span class="p" data-group-id="2711695704-13">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:inactive</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-14">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-15">%{</span><span class="ss">gte</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2711695704-15">}</span><span class="p" data-group-id="2711695704-14">}</span><span class="p" data-group-id="2711695704-13">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="2711695704-8">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2711695704-2">}</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">for</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="2711695704-1">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_option</span><span class="p" data-group-id="2711695704-16">(</span><span class="ss">:ash_pagify_scopes</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2711695704-17">%{</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-18">[</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="2711695704-19">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:default</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-20">%{</span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Default&quot;</span><span class="p" data-group-id="2711695704-20">}</span><span class="p" data-group-id="2711695704-19">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2711695704-18">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="2711695704-17">}</span><span class="p" data-group-id="2711695704-16">)</span><span class="w">
</span><span class="p" data-group-id="2711695704-21">%{</span><span class="w">
  </span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-22">[</span><span class="w">
    </span><span class="p" data-group-id="2711695704-23">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-24">%{</span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="2711695704-24">}</span><span class="p" data-group-id="2711695704-23">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2711695704-25">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:user</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-26">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;changed&quot;</span><span class="p" data-group-id="2711695704-26">}</span><span class="p" data-group-id="2711695704-25">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2711695704-27">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:other</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-28">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;other&quot;</span><span class="p" data-group-id="2711695704-28">}</span><span class="p" data-group-id="2711695704-27">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2711695704-29">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:default</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-30">%{</span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Default&quot;</span><span class="p" data-group-id="2711695704-30">}</span><span class="p" data-group-id="2711695704-29">}</span><span class="w">
  </span><span class="p" data-group-id="2711695704-22">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-31">[</span><span class="w">
    </span><span class="p" data-group-id="2711695704-32">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:inactive</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-33">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-34">%{</span><span class="ss">gte</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2711695704-34">}</span><span class="p" data-group-id="2711695704-33">}</span><span class="p" data-group-id="2711695704-32">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2711695704-35">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:all</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">default?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="2711695704-35">}</span><span class="p">,</span><span class="w">
    </span><span class="p" data-group-id="2711695704-36">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-37">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2711695704-38">%{</span><span class="ss">lt</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2711695704-38">}</span><span class="p" data-group-id="2711695704-37">}</span><span class="p" data-group-id="2711695704-36">}</span><span class="w">
  </span><span class="p" data-group-id="2711695704-31">]</span><span class="w">
</span><span class="p" data-group-id="2711695704-21">}</span></code></pre>
  </section>
</section>
<section class="detail" id="get_order_direction/2">

  <div class="detail-header">
    <a href="#get_order_direction/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_order_direction(order_by, index)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L2170" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> get_order_direction(<a href="#t:order_by/0">order_by</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>() | nil) ::
  <a href="https://hexdocs.pm/ash/3.3.3/Ash.Sort.html#t:sort_order/0">Ash.Sort.sort_order</a>() | nil</pre>

      </div>

<p>Returns the current order direction for the given index and <code class="inline">AshPagify.order_by</code>.</p><p>Following rules are applied:</p><ul><li>if the <code class="inline">order_by</code> is <code class="inline">nil</code>, <code class="inline">nil</code> is returned</li><li>if the <code class="inline">order_by</code> is an atom or a binary, <code class="inline">:asc</code> is returned</li><li>if the <code class="inline">order_by</code> is a tuple, the second element of the tuple is returned</li><li>if the index is out of bounds, <code class="inline">nil</code> is returned</li><li>if the <code class="inline">order_by</code> is a list, the direction of the element at the given index
is returned</li></ul>
  </section>
</section>
<section class="detail" id="merge_filters/2">

  <div class="detail-header">
    <a href="#merge_filters/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">merge_filters(ash_pagify, filters)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1565" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> merge_filters(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | true) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Merges the given filters with the filters of a AshPagify struct.</p><p>If the filter already exists, it will be replaced with the new value. If the
filter does not exist, it will be added to the filters map.</p><p>In order to merge the filters, the filters are first prepared by calling <code class="inline">prepare_filters/1</code>.
This function will ensure that the filters are in the correct format for merging
(e.g. keys are strings).</p><p>If the filters are in the correct format, the filters are merged using <code class="inline">Misc.deep_merge/2</code>.
After merging, the filters are cleaned up by removing empty lists.</p><h2 id="merge_filters/2-examples" class="section-heading">
  <a href="#merge_filters/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">merge_filters</span><span class="p" data-group-id="3810344141-1">(</span><span class="p" data-group-id="3810344141-2">%</span><span class="nc" data-group-id="3810344141-2">AshPagify</span><span class="p" data-group-id="3810344141-2">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3810344141-3">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="3810344141-3">}</span><span class="p" data-group-id="3810344141-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3810344141-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bar&quot;</span><span class="p" data-group-id="3810344141-4">}</span><span class="p" data-group-id="3810344141-1">)</span><span class="w">
</span><span class="p" data-group-id="3810344141-5">%</span><span class="nc" data-group-id="3810344141-5">AshPagify</span><span class="p" data-group-id="3810344141-5">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3810344141-6">%{</span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3810344141-7">[</span><span class="p" data-group-id="3810344141-8">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;bar&quot;</span><span class="p" data-group-id="3810344141-8">}</span><span class="p" data-group-id="3810344141-7">]</span><span class="p" data-group-id="3810344141-6">}</span><span class="p" data-group-id="3810344141-5">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">merge_filters</span><span class="p" data-group-id="3810344141-9">(</span><span class="p" data-group-id="3810344141-10">%</span><span class="nc" data-group-id="3810344141-10">AshPagify</span><span class="p" data-group-id="3810344141-10">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3810344141-11">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="3810344141-11">}</span><span class="p" data-group-id="3810344141-10">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3810344141-12">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="3810344141-12">}</span><span class="p" data-group-id="3810344141-9">)</span><span class="w">
</span><span class="p" data-group-id="3810344141-13">%</span><span class="nc" data-group-id="3810344141-13">AshPagify</span><span class="p" data-group-id="3810344141-13">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3810344141-14">%{</span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3810344141-15">[</span><span class="p" data-group-id="3810344141-16">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="3810344141-16">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3810344141-17">%{</span><span class="s">&quot;age&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="3810344141-17">}</span><span class="p" data-group-id="3810344141-15">]</span><span class="p" data-group-id="3810344141-14">}</span><span class="p" data-group-id="3810344141-13">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">merge_filters</span><span class="p" data-group-id="3810344141-18">(</span><span class="p" data-group-id="3810344141-19">%</span><span class="nc" data-group-id="3810344141-19">AshPagify</span><span class="p" data-group-id="3810344141-19">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3810344141-20">%{</span><span class="s">&quot;or&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3810344141-21">[</span><span class="p" data-group-id="3810344141-22">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="3810344141-22">}</span><span class="p" data-group-id="3810344141-21">]</span><span class="p" data-group-id="3810344141-20">}</span><span class="p" data-group-id="3810344141-19">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3810344141-23">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="3810344141-23">}</span><span class="p" data-group-id="3810344141-18">)</span><span class="w">
</span><span class="p" data-group-id="3810344141-24">%</span><span class="nc" data-group-id="3810344141-24">AshPagify</span><span class="p" data-group-id="3810344141-24">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3810344141-25">%{</span><span class="s">&quot;or&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3810344141-26">[</span><span class="p" data-group-id="3810344141-27">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="3810344141-27">}</span><span class="p" data-group-id="3810344141-26">]</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3810344141-28">[</span><span class="p" data-group-id="3810344141-29">%{</span><span class="s">&quot;age&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="3810344141-29">}</span><span class="p" data-group-id="3810344141-28">]</span><span class="p" data-group-id="3810344141-25">}</span><span class="p" data-group-id="3810344141-24">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">merge_filters</span><span class="p" data-group-id="3810344141-30">(</span><span class="p" data-group-id="3810344141-31">%</span><span class="nc" data-group-id="3810344141-31">AshPagify</span><span class="p" data-group-id="3810344141-31">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3810344141-32">%{</span><span class="s">&quot;or&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3810344141-33">[</span><span class="p" data-group-id="3810344141-34">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="3810344141-34">}</span><span class="p" data-group-id="3810344141-33">]</span><span class="p" data-group-id="3810344141-32">}</span><span class="p" data-group-id="3810344141-31">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3810344141-35">%{</span><span class="s">&quot;or&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3810344141-36">[</span><span class="p" data-group-id="3810344141-37">%{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="3810344141-37">}</span><span class="p" data-group-id="3810344141-36">]</span><span class="p" data-group-id="3810344141-35">}</span><span class="p" data-group-id="3810344141-30">)</span><span class="w">
</span><span class="p" data-group-id="3810344141-38">%</span><span class="nc" data-group-id="3810344141-38">AshPagify</span><span class="p" data-group-id="3810344141-38">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3810344141-39">%{</span><span class="s">&quot;or&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="3810344141-40">[</span><span class="p" data-group-id="3810344141-41">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="3810344141-41">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3810344141-42">%{</span><span class="s">&quot;age&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="3810344141-42">}</span><span class="p" data-group-id="3810344141-40">]</span><span class="p" data-group-id="3810344141-39">}</span><span class="p" data-group-id="3810344141-38">}</span></code></pre>
  </section>
</section>
<section class="detail" id="meta/3">

    <span id="meta/2"></span>

  <div class="detail-header">
    <a href="#meta/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">meta(page, ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L538" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> meta(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Page.Offset.html#t:t/0">Ash.Page.Offset.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="AshPagify.Meta.html#t:t/0">AshPagify.Meta.t</a>()</pre>

      </div>

<p>Returns meta information for the given query and ash_pagify that can be used for
building the pagination links.</p><h2 id="meta/3-examples" class="section-heading">
  <a href="#meta/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3796069571-1">%</span><span class="nc" data-group-id="3796069571-1">AshPagify</span><span class="p" data-group-id="3796069571-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3796069571-2">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">comments_count</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc_nils_last</span><span class="p" data-group-id="3796069571-2">]</span><span class="p" data-group-id="3796069571-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">page</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">all</span><span class="p" data-group-id="3796069571-3">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="3796069571-3">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">meta</span><span class="p" data-group-id="3796069571-4">(</span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="3796069571-4">)</span><span class="w">
</span><span class="p" data-group-id="3796069571-5">%</span><span class="nc" data-group-id="3796069571-5">AshPagify.Meta</span><span class="p" data-group-id="3796069571-5">{</span><span class="w">
  </span><span class="ss">current_limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">current_offset</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
  </span><span class="ss">current_page</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="ss">default_scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3796069571-6">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:all</span><span class="p" data-group-id="3796069571-6">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">has_next_page?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w">
  </span><span class="ss">has_previous_page?</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w">
  </span><span class="ss">next_offset</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w">
  </span><span class="ss">opts</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3796069571-7">[</span><span class="p" data-group-id="3796069571-7">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">ash_pagify</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3796069571-8">%</span><span class="nc" data-group-id="3796069571-8">AshPagify</span><span class="p" data-group-id="3796069571-8">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3796069571-9">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">comments_count</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc_nils_last</span><span class="p" data-group-id="3796069571-9">]</span><span class="p" data-group-id="3796069571-8">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">previous_offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">
  </span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">Post</span><span class="p">,</span><span class="w">
  </span><span class="ss">total_count</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
  </span><span class="ss">total_pages</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p" data-group-id="3796069571-5">}</span></code></pre><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p>
  </section>
</section>
<section class="detail" id="order_by/2">

  <div class="detail-header">
    <a href="#order_by/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">order_by(q, ash_pagify)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L928" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> order_by(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>(), <a href="#t:t/0">t</a>()) :: <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>()</pre>

      </div>

<p>Applies the <code class="inline">order_by</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p><p>Used by <a href="#query/2"><code class="inline">AshPagify.query/2</code></a>. See <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#sort/3"><code class="inline">Ash.Query.sort/3</code></a> for more information.</p><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p><h2 id="order_by/2-examples" class="section-heading">
  <a href="#order_by/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="7589453444-1">(</span><span class="nc">Post</span><span class="p" data-group-id="7589453444-1">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7589453444-2">%</span><span class="nc" data-group-id="7589453444-2">AshPagify</span><span class="p" data-group-id="7589453444-2">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7589453444-3">[</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="7589453444-3">]</span><span class="p" data-group-id="7589453444-2">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">order_by</span><span class="p" data-group-id="7589453444-4">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="7589453444-4">)</span><span class="w">
  </span><span class="p" data-group-id="7589453444-5">#</span><span class="nc" data-group-id="7589453444-5">Ash.Query</span><span class="p" data-group-id="7589453444-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7589453444-6">[</span><span class="p" data-group-id="7589453444-7">{</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="7589453444-7">}</span><span class="p" data-group-id="7589453444-6">]</span><span class="p" data-group-id="7589453444-5">&gt;</span></code></pre><p>Or descending order nulls last:</p><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="3324738654-1">(</span><span class="nc">Post</span><span class="p" data-group-id="3324738654-1">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3324738654-2">%</span><span class="nc" data-group-id="3324738654-2">AshPagify</span><span class="p" data-group-id="3324738654-2">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3324738654-3">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc_nils_last</span><span class="p" data-group-id="3324738654-3">]</span><span class="p" data-group-id="3324738654-2">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">order_by</span><span class="p" data-group-id="3324738654-4">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="3324738654-4">)</span><span class="w">
  </span><span class="p" data-group-id="3324738654-5">#</span><span class="nc" data-group-id="3324738654-5">Ash.Query</span><span class="p" data-group-id="3324738654-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3324738654-6">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc_nils_last</span><span class="p" data-group-id="3324738654-6">]</span><span class="p" data-group-id="3324738654-5">&gt;</span></code></pre><p>Or multiple fields:</p><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="6588658380-1">(</span><span class="nc">Post</span><span class="p" data-group-id="6588658380-1">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6588658380-2">%</span><span class="nc" data-group-id="6588658380-2">AshPagify</span><span class="p" data-group-id="6588658380-2">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6588658380-3">[</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;id&quot;</span><span class="p" data-group-id="6588658380-3">]</span><span class="p" data-group-id="6588658380-2">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">order_by</span><span class="p" data-group-id="6588658380-4">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="6588658380-4">)</span><span class="w">
  </span><span class="p" data-group-id="6588658380-5">#</span><span class="nc" data-group-id="6588658380-5">Ash.Query</span><span class="p" data-group-id="6588658380-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6588658380-6">[</span><span class="p" data-group-id="6588658380-7">{</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="6588658380-7">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6588658380-8">{</span><span class="s">&quot;id&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="6588658380-8">}</span><span class="p" data-group-id="6588658380-6">]</span><span class="p" data-group-id="6588658380-5">&gt;</span></code></pre><p>Or by calculation:</p><pre><code class="makeup elixir" translate="no"><span class="w">  </span><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="8000290305-1">(</span><span class="nc">Post</span><span class="p" data-group-id="8000290305-1">)</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8000290305-2">%</span><span class="nc" data-group-id="8000290305-2">AshPagify</span><span class="p" data-group-id="8000290305-2">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8000290305-3">[</span><span class="s">&quot;comments_count&quot;</span><span class="p" data-group-id="8000290305-3">]</span><span class="p" data-group-id="8000290305-2">}</span><span class="w">
  </span><span class="gp unselectable">iex&gt; </span><span class="n">order_by</span><span class="p" data-group-id="8000290305-4">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="8000290305-4">)</span><span class="w">
  </span><span class="p" data-group-id="8000290305-5">#</span><span class="nc" data-group-id="8000290305-5">Ash.Query</span><span class="p" data-group-id="8000290305-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8000290305-6">[</span><span class="ss">comments_count</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="8000290305-6">]</span><span class="p" data-group-id="8000290305-5">&gt;</span></code></pre>
  </section>
</section>
<section class="detail" id="page/2">

    <span id="page/1"></span>

  <div class="detail-header">
    <a href="#page/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">page(ash_pagify, page \\ [count: true])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1047" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> page(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()</pre>

      </div>

<p>Returns a keyword list with the <code class="inline">limit</code>, <code class="inline">offset</code> and <code class="inline">count</code> parameters
from the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameter.</p><p>The <code class="inline">count</code> parameter is set to <code class="inline">true</code> by default. To disable counting the
total number of records, set <code class="inline">count: false</code> in the optional page keyword list.</p><h2 id="page/2-examples" class="section-heading">
  <a href="#page/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7714082876-1">%</span><span class="nc" data-group-id="7714082876-1">AshPagify</span><span class="p" data-group-id="7714082876-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="7714082876-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">page</span><span class="p" data-group-id="7714082876-2">(</span><span class="n">ash_pagify</span><span class="p" data-group-id="7714082876-2">)</span><span class="w">
</span><span class="p" data-group-id="7714082876-3">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="7714082876-3">]</span></code></pre><p>Or disable counting:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4353952160-1">%</span><span class="nc" data-group-id="4353952160-1">AshPagify</span><span class="p" data-group-id="4353952160-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="4353952160-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">page</span><span class="p" data-group-id="4353952160-2">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="4353952160-2">)</span><span class="w">
</span><span class="p" data-group-id="4353952160-3">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4353952160-3">]</span></code></pre>
  </section>
</section>
<section class="detail" id="paginate/3">

    <span id="paginate/2"></span>

  <div class="detail-header">
    <a href="#paginate/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">paginate(query_or_resource, ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L997" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> paginate(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()</pre>

      </div>

<p>Adds clauses for pagination to the resulting keyword list from the given
<a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameter.</p><p>The <code class="inline">count</code> parameter is set to <code class="inline">true</code> by default. To disable counting the
total number of records, set <code class="inline">page: [:count, false]</code> in the opts keyword list.</p><p>If the <code class="inline">limit</code> or <code class="inline">offset</code> fields are <code class="inline">nil</code>, the default limit and offset
values will be used.</p><p>If the resource itself provides a default limit, it will be used instead of
the default limit provided by AshPagify.</p><h2 id="paginate/3-examples" class="section-heading">
  <a href="#paginate/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5593095670-1">%</span><span class="nc" data-group-id="5593095670-1">AshPagify</span><span class="p" data-group-id="5593095670-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="5593095670-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">paginate</span><span class="p" data-group-id="5593095670-2">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="5593095670-2">)</span><span class="w">
</span><span class="p" data-group-id="5593095670-3">[</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5593095670-4">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="5593095670-4">]</span><span class="p" data-group-id="5593095670-3">]</span></code></pre><p>Or disable counting:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="1207564027-1">%</span><span class="nc" data-group-id="1207564027-1">AshPagify</span><span class="p" data-group-id="1207564027-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="1207564027-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">paginate</span><span class="p" data-group-id="1207564027-2">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1207564027-3">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="1207564027-3">]</span><span class="p" data-group-id="1207564027-2">)</span><span class="w">
</span><span class="p" data-group-id="1207564027-4">[</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1207564027-5">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1207564027-5">]</span><span class="p" data-group-id="1207564027-4">]</span></code></pre><p>Or without the offset parameter:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="1696381337-1">%</span><span class="nc" data-group-id="1696381337-1">AshPagify</span><span class="p" data-group-id="1696381337-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="1696381337-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">paginate</span><span class="p" data-group-id="1696381337-2">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="1696381337-2">)</span><span class="w">
</span><span class="p" data-group-id="1696381337-3">[</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1696381337-4">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="1696381337-4">]</span><span class="p" data-group-id="1696381337-3">]</span></code></pre><p>Or without the limit parameter. The default limit from Post will be used:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3051926414-1">%</span><span class="nc" data-group-id="3051926414-1">AshPagify</span><span class="p" data-group-id="3051926414-1">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="3051926414-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">paginate</span><span class="p" data-group-id="3051926414-2">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="3051926414-2">)</span><span class="w">
</span><span class="p" data-group-id="3051926414-3">[</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3051926414-4">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="3051926414-4">]</span><span class="p" data-group-id="3051926414-3">]</span></code></pre><p>Or without the limit parameter. The default limit from AshPagify will be used if no
default limit is provided by the resource:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Comment</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5510650578-1">%</span><span class="nc" data-group-id="5510650578-1">AshPagify</span><span class="p" data-group-id="5510650578-1">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="5510650578-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">paginate</span><span class="p" data-group-id="5510650578-2">(</span><span class="nc">Comment</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="5510650578-2">)</span><span class="w">
</span><span class="p" data-group-id="5510650578-3">[</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5510650578-4">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p" data-group-id="5510650578-4">]</span><span class="p" data-group-id="5510650578-3">]</span></code></pre><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p>
  </section>
</section>
<section class="detail" id="parse/3">

    <span id="parse/2"></span>

  <div class="detail-header">
    <a href="#parse/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">parse(query_or_resource, ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L222" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> parse(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()</pre>

      </div>

<p>Adds clauses for full-text search, scoping, filtering, ordering and pagination to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>
or <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0"><code class="inline">Ash.Resource.t/0</code></a> from the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameters and <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0"><code class="inline">Keyword.t/0</code></a> options.</p><p>The keyword list <code class="inline">opts</code> is used to pass additional options to the query engine.
It shoud conform to the list of valid options at <a href="https://hexdocs.pm/ash/3.3.3/Ash.html#read/2"><code class="inline">Ash.read/2</code></a>. Furthermore
the <a href="#t:option/0"><code class="inline">AshPagify.option/0</code></a> library options are supported.</p><p>We take the keyword list <code class="inline">opts</code> and return a keyword list callback according to
<a href="https://hexdocs.pm/ash/3.3.3/Ash.html#read/2"><code class="inline">Ash.read/2</code></a> but with the <strong>:query</strong> keyword also within the list.</p><ul><li><code class="inline">AshPagify.search</code> is used to apply full-text search to the query.</li><li><code class="inline">Paigfy.scopes</code> are used to apply predefined filters to the query.</li><li><code class="inline">AshPagify.filter_form</code> is used to apply filters generated by the <a href="https://hexdocs.pm/ash_phoenix/2.1.1/AshPhoenix.FilterForm.html"><code class="inline">AshPhoenix.FilterForm</code></a> module.</li><li><code class="inline">AshPagify.filters</code> and <code class="inline">AshPagify.order_by</code> are used to filter and order the query.</li><li><code class="inline">AshPagify.limit</code> and <code class="inline">AshPagify.offset</code> are used to paginate the query.</li></ul><p>The user input parameters are represented by the <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> type. Any <code class="inline">nil</code> values
will be ignored.</p><h2 id="parse/3-examples" class="section-heading">
  <a href="#parse/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="1671587013-1">%</span><span class="nc" data-group-id="1671587013-1">AshPagify</span><span class="p" data-group-id="1671587013-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1671587013-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="1671587013-2">}</span><span class="p">,</span><span class="w"> </span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1671587013-3">[</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="1671587013-3">]</span><span class="p" data-group-id="1671587013-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="1671587013-4">[</span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1671587013-5">{</span><span class="ss">:query</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p" data-group-id="1671587013-5">}</span><span class="p" data-group-id="1671587013-4">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="1671587013-6">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="1671587013-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">page</span><span class="w">
</span><span class="p" data-group-id="1671587013-7">{</span><span class="ss">:page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1671587013-8">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1671587013-8">]</span><span class="p" data-group-id="1671587013-7">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">query</span><span class="w">
</span><span class="p" data-group-id="1671587013-9">#</span><span class="nc" data-group-id="1671587013-9">Ash.Query</span><span class="p" data-group-id="1671587013-9">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1671587013-10">#</span><span class="nc" data-group-id="1671587013-10">Ash.Filter</span><span class="p" data-group-id="1671587013-10">&lt;</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="1671587013-10">&gt;</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1671587013-11">[</span><span class="p" data-group-id="1671587013-12">{</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="1671587013-12">}</span><span class="p" data-group-id="1671587013-11">]</span><span class="p" data-group-id="1671587013-9">&gt;</span></code></pre><p>Or to disable counting:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9841491064-1">%</span><span class="nc" data-group-id="9841491064-1">AshPagify</span><span class="p" data-group-id="9841491064-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9841491064-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="9841491064-2">}</span><span class="p">,</span><span class="w"> </span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9841491064-3">[</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="9841491064-3">]</span><span class="p" data-group-id="9841491064-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="9841491064-4">[</span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9841491064-5">{</span><span class="ss">:query</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p" data-group-id="9841491064-5">}</span><span class="p" data-group-id="9841491064-4">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="9841491064-6">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9841491064-7">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9841491064-7">]</span><span class="p" data-group-id="9841491064-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">page</span><span class="w">
</span><span class="p" data-group-id="9841491064-8">{</span><span class="ss">:page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9841491064-9">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="9841491064-9">]</span><span class="p" data-group-id="9841491064-8">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">query</span><span class="w">
</span><span class="p" data-group-id="9841491064-10">#</span><span class="nc" data-group-id="9841491064-10">Ash.Query</span><span class="p" data-group-id="9841491064-10">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9841491064-11">#</span><span class="nc" data-group-id="9841491064-11">Ash.Filter</span><span class="p" data-group-id="9841491064-11">&lt;</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="9841491064-11">&gt;</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9841491064-12">[</span><span class="p" data-group-id="9841491064-13">{</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="9841491064-13">}</span><span class="p" data-group-id="9841491064-12">]</span><span class="p" data-group-id="9841491064-10">&gt;</span></code></pre><p>Sorting only:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3036060317-1">%</span><span class="nc" data-group-id="3036060317-1">AshPagify</span><span class="p" data-group-id="3036060317-1">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3036060317-2">[</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="3036060317-2">]</span><span class="p" data-group-id="3036060317-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="3036060317-3">[</span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3036060317-4">{</span><span class="ss">:query</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p" data-group-id="3036060317-4">}</span><span class="p" data-group-id="3036060317-3">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="3036060317-5">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="3036060317-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">page</span><span class="w">
</span><span class="p" data-group-id="3036060317-6">{</span><span class="ss">:page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3036060317-7">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="3036060317-7">]</span><span class="p" data-group-id="3036060317-6">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">query</span><span class="w">
</span><span class="p" data-group-id="3036060317-8">#</span><span class="nc" data-group-id="3036060317-8">Ash.Query</span><span class="p" data-group-id="3036060317-8">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3036060317-9">[</span><span class="p" data-group-id="3036060317-10">{</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="3036060317-10">}</span><span class="p" data-group-id="3036060317-9">]</span><span class="p" data-group-id="3036060317-8">&gt;</span></code></pre><p>Filtering only:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7172345521-1">%</span><span class="nc" data-group-id="7172345521-1">AshPagify</span><span class="p" data-group-id="7172345521-1">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7172345521-2">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="7172345521-2">}</span><span class="p" data-group-id="7172345521-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="7172345521-3">[</span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7172345521-4">{</span><span class="ss">:query</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p" data-group-id="7172345521-4">}</span><span class="p" data-group-id="7172345521-3">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="7172345521-5">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="7172345521-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">page</span><span class="w">
</span><span class="p" data-group-id="7172345521-6">{</span><span class="ss">:page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7172345521-7">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="7172345521-7">]</span><span class="p" data-group-id="7172345521-6">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">query</span><span class="w">
</span><span class="p" data-group-id="7172345521-8">#</span><span class="nc" data-group-id="7172345521-8">Ash.Query</span><span class="p" data-group-id="7172345521-8">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7172345521-9">#</span><span class="nc" data-group-id="7172345521-9">Ash.Filter</span><span class="p" data-group-id="7172345521-9">&lt;</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="7172345521-9">&gt;</span><span class="p" data-group-id="7172345521-8">&gt;</span></code></pre><p>Pagination only:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9348565175-1">%</span><span class="nc" data-group-id="9348565175-1">AshPagify</span><span class="p" data-group-id="9348565175-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="9348565175-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="9348565175-2">[</span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9348565175-3">{</span><span class="ss">:query</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p" data-group-id="9348565175-3">}</span><span class="p" data-group-id="9348565175-2">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="9348565175-4">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="9348565175-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">page</span><span class="w">
</span><span class="p" data-group-id="9348565175-5">{</span><span class="ss">:page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9348565175-6">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="9348565175-6">]</span><span class="p" data-group-id="9348565175-5">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">query</span><span class="w">
</span><span class="p" data-group-id="9348565175-7">#</span><span class="nc" data-group-id="9348565175-7">Ash.Query</span><span class="p" data-group-id="9348565175-7">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p" data-group-id="9348565175-7">&gt;</span></code></pre><p>Scoping only:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8049599386-1">%</span><span class="nc" data-group-id="8049599386-1">AshPagify</span><span class="p" data-group-id="8049599386-1">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8049599386-2">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="8049599386-2">}</span><span class="p" data-group-id="8049599386-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8049599386-3">[</span><span class="n">page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8049599386-4">{</span><span class="ss">:query</span><span class="p">,</span><span class="w"> </span><span class="n">query</span><span class="p" data-group-id="8049599386-4">}</span><span class="p" data-group-id="8049599386-3">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">parse</span><span class="p" data-group-id="8049599386-5">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="8049599386-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">page</span><span class="w">
</span><span class="p" data-group-id="8049599386-6">{</span><span class="ss">:page</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8049599386-7">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="8049599386-7">]</span><span class="p" data-group-id="8049599386-6">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">query</span><span class="w">
</span><span class="p" data-group-id="8049599386-8">#</span><span class="nc" data-group-id="8049599386-8">Ash.Query</span><span class="p" data-group-id="8049599386-8">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8049599386-9">#</span><span class="nc" data-group-id="8049599386-9">Ash.Filter</span><span class="p" data-group-id="8049599386-9">&lt;</span><span class="n">author</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="8049599386-9">&gt;</span><span class="p" data-group-id="8049599386-8">&gt;</span></code></pre><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p>
  </section>
</section>
<section class="detail" id="prefix_to_order/1">

  <div class="detail-header">
    <a href="#prefix_to_order/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">prefix_to_order(arg1)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L661" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> prefix_to_order(<a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>()) :: <a href="https://hexdocs.pm/ash/3.3.3/Ash.Sort.html#t:sort_order/0">Ash.Sort.sort_order</a>()</pre>

      </div>

<p>Transforms the given field with order prefix into an <code class="inline">t:Ash.Sort.sort_order/t</code>.</p><h2 id="prefix_to_order/1-examples" class="section-heading">
  <a href="#prefix_to_order/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">prefix_to_order</span><span class="p" data-group-id="8560156886-1">(</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="8560156886-1">)</span><span class="w">
</span><span class="ss">:asc</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">prefix_to_order</span><span class="p" data-group-id="8560156886-2">(</span><span class="s">&quot;-name&quot;</span><span class="p" data-group-id="8560156886-2">)</span><span class="w">
</span><span class="ss">:desc</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">prefix_to_order</span><span class="p" data-group-id="8560156886-3">(</span><span class="s">&quot;++name&quot;</span><span class="p" data-group-id="8560156886-3">)</span><span class="w">
</span><span class="ss">:asc_nils_first</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">prefix_to_order</span><span class="p" data-group-id="8560156886-4">(</span><span class="s">&quot;--name&quot;</span><span class="p" data-group-id="8560156886-4">)</span><span class="w">
</span><span class="ss">:desc_nils_last</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">prefix_to_order</span><span class="p" data-group-id="8560156886-5">(</span><span class="s">&quot;+name&quot;</span><span class="p" data-group-id="8560156886-5">)</span><span class="w">
</span><span class="ss">:asc</span></code></pre>
  </section>
</section>
<section class="detail" id="push_order/3">

    <span id="push_order/2"></span>

  <div class="detail-header">
    <a href="#push_order/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">push_order(ash_pagify, field, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L2053" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> push_order(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>() | <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Updates the <code class="inline">order_by</code> value of a <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p><ul><li>If the field is not in the current <code class="inline">order_by</code> value, it will be prepended to
the list. By default, the order direction for the field will be set to
<code class="inline">:asc</code>.</li><li>If the field is already at the front of the <code class="inline">order_by</code> list, the order
direction will be reversed.</li><li>If the field is already in the list, but not at the front, it will be moved
to the front and the order direction will be set to <code class="inline">:asc</code> (or the custom
asc direction supplied in the <code class="inline">:directions</code> option).</li><li>If the <code class="inline">:directions</code> option --a 2-element tuple-- is passed, the first and
second elements will be used as custom sort declarations for ascending and
descending, respectively.</li></ul><h2 id="push_order/3-examples" class="section-heading">
  <a href="#push_order/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="5348643219-1">(</span><span class="p" data-group-id="5348643219-2">%</span><span class="nc" data-group-id="5348643219-2">AshPagify</span><span class="p" data-group-id="5348643219-2">{</span><span class="p" data-group-id="5348643219-2">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="5348643219-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="5348643219-3">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="5348643219-3">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="5348643219-4">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">:age</span><span class="p" data-group-id="5348643219-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="5348643219-5">[</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="5348643219-5">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="5348643219-6">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">:age</span><span class="p" data-group-id="5348643219-6">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="5348643219-7">[</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="5348643219-7">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="5348643219-8">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">:species</span><span class="p" data-group-id="5348643219-8">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="5348643219-9">[</span><span class="ss">species</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="5348643219-9">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="5348643219-10">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">:age</span><span class="p" data-group-id="5348643219-10">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="5348643219-11">[</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">species</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="5348643219-11">]</span></code></pre><p>By default, the function toggles between <code class="inline">:asc</code> and <code class="inline">:desc</code>. You can override
this with the <code class="inline">:directions</code> option.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">directions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3130572357-1">{</span><span class="ss">:asc_nils_first</span><span class="p">,</span><span class="w"> </span><span class="ss">:desc_nils_last</span><span class="p" data-group-id="3130572357-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="3130572357-2">(</span><span class="p" data-group-id="3130572357-3">%</span><span class="nc" data-group-id="3130572357-3">AshPagify</span><span class="p" data-group-id="3130572357-3">{</span><span class="p" data-group-id="3130572357-3">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:ttfb</span><span class="p">,</span><span class="w"> </span><span class="ss">directions</span><span class="p">:</span><span class="w"> </span><span class="n">directions</span><span class="p" data-group-id="3130572357-2">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="3130572357-4">[</span><span class="ss">ttfb</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc_nils_first</span><span class="p" data-group-id="3130572357-4">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="3130572357-5">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">:ttfb</span><span class="p">,</span><span class="w"> </span><span class="ss">directions</span><span class="p">:</span><span class="w"> </span><span class="n">directions</span><span class="p" data-group-id="3130572357-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="3130572357-6">[</span><span class="ss">ttfb</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc_nils_last</span><span class="p" data-group-id="3130572357-6">]</span></code></pre><p>This also allows you to sort in descending order initially.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">directions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4824584508-1">{</span><span class="ss">:desc</span><span class="p">,</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="4824584508-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="4824584508-2">(</span><span class="p" data-group-id="4824584508-3">%</span><span class="nc" data-group-id="4824584508-3">AshPagify</span><span class="p" data-group-id="4824584508-3">{</span><span class="p" data-group-id="4824584508-3">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:ttfb</span><span class="p">,</span><span class="w"> </span><span class="ss">directions</span><span class="p">:</span><span class="w"> </span><span class="n">directions</span><span class="p" data-group-id="4824584508-2">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="4824584508-4">[</span><span class="ss">ttfb</span><span class="p">:</span><span class="w"> </span><span class="ss">:desc</span><span class="p" data-group-id="4824584508-4">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="4824584508-5">(</span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="ss">:ttfb</span><span class="p">,</span><span class="w"> </span><span class="ss">directions</span><span class="p">:</span><span class="w"> </span><span class="n">directions</span><span class="p" data-group-id="4824584508-5">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="4824584508-6">[</span><span class="ss">ttfb</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="4824584508-6">]</span></code></pre><p>If a string is passed as the second argument, it will be converted to an atom
using <a href="https://hexdocs.pm/elixir/String.html#to_existing_atom/1"><code class="inline">String.to_existing_atom/1</code></a>. If the atom does not exist, the <a href="AshPagify.html"><code class="inline">AshPagify</code></a>
struct will be returned unchanged.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="7325109925-1">(</span><span class="p" data-group-id="7325109925-2">%</span><span class="nc" data-group-id="7325109925-2">AshPagify</span><span class="p" data-group-id="7325109925-2">{</span><span class="p" data-group-id="7325109925-2">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="7325109925-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="7325109925-3">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="7325109925-3">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="7325109925-4">(</span><span class="p" data-group-id="7325109925-5">%</span><span class="nc" data-group-id="7325109925-5">AshPagify</span><span class="p" data-group-id="7325109925-5">{</span><span class="p" data-group-id="7325109925-5">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;this_atom_does_not_exist&quot;</span><span class="p" data-group-id="7325109925-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="no">nil</span></code></pre><p>If the <code class="inline">order_by</code> is either an atom or a binary, the function will return the coerced <code class="inline">order_by</code> value.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="2411361591-1">(</span><span class="p" data-group-id="2411361591-2">%</span><span class="nc" data-group-id="2411361591-2">AshPagify</span><span class="p" data-group-id="2411361591-2">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;author&quot;</span><span class="p" data-group-id="2411361591-2">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:name</span><span class="p" data-group-id="2411361591-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="2411361591-3">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="2411361591-3">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="2411361591-4">(</span><span class="p" data-group-id="2411361591-5">%</span><span class="nc" data-group-id="2411361591-5">AshPagify</span><span class="p" data-group-id="2411361591-5">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="ss">:author</span><span class="p" data-group-id="2411361591-5">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="2411361591-4">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="2411361591-6">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="2411361591-6">]</span></code></pre><p>If the <code class="inline">:limit_order_by</code> option is passed, the <code class="inline">order_by</code> will be limited to the given number of fields.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">push_order</span><span class="p" data-group-id="6082573345-1">(</span><span class="p" data-group-id="6082573345-2">%</span><span class="nc" data-group-id="6082573345-2">AshPagify</span><span class="p" data-group-id="6082573345-2">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6082573345-3">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="6082573345-3">]</span><span class="p" data-group-id="6082573345-2">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:species</span><span class="p">,</span><span class="w"> </span><span class="ss">limit_order_by</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="6082573345-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="o">.</span><span class="n">order_by</span><span class="w">
</span><span class="p" data-group-id="6082573345-4">[</span><span class="ss">species</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="6082573345-4">]</span></code></pre>
  </section>
</section>
<section class="detail" id="query/3">

    <span id="query/2"></span>

  <div class="detail-header">
    <a href="#query/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">query(q, ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L688" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> query(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>()</pre>

      </div>

<p>Adds clauses for full-text search, scoping, filtering and ordering to an
<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a> from the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> parameter.</p><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p><h2 id="query/3-examples" class="section-heading">
  <a href="#query/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="6042083475-1">(</span><span class="nc">Post</span><span class="p" data-group-id="6042083475-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6042083475-2">%</span><span class="nc" data-group-id="6042083475-2">AshPagify</span><span class="p" data-group-id="6042083475-2">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6042083475-3">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="6042083475-3">}</span><span class="p">,</span><span class="w"> </span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6042083475-4">[</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="6042083475-4">]</span><span class="p" data-group-id="6042083475-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">query</span><span class="p" data-group-id="6042083475-5">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="6042083475-5">)</span><span class="w">
</span><span class="p" data-group-id="6042083475-6">#</span><span class="nc" data-group-id="6042083475-6">Ash.Query</span><span class="p" data-group-id="6042083475-6">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6042083475-7">#</span><span class="nc" data-group-id="6042083475-7">Ash.Filter</span><span class="p" data-group-id="6042083475-7">&lt;</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="6042083475-7">&gt;</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="6042083475-8">[</span><span class="p" data-group-id="6042083475-9">{</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="6042083475-9">}</span><span class="p" data-group-id="6042083475-8">]</span><span class="p" data-group-id="6042083475-6">&gt;</span></code></pre>
  </section>
</section>
<section class="detail" id="query_for_filters_map/3">

    <span id="query_for_filters_map/2"></span>

  <div class="detail-header">
    <a href="#query_for_filters_map/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">query_for_filters_map(query_or_resource, filters_map, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1819" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> query_for_filters_map(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) ::
  <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>()</pre>

      </div>

<p>Creates an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html"><code class="inline">Ash.Query</code></a> from a filter map. Ideally, the filter map was previously
compiled with <a href="#query_to_filters_map/2"><code class="inline">AshPagify.query_to_filters_map/2</code></a>.</p><p>Optionally, you can pass the <code class="inline">include_full_text_search?: false</code> option to disable
the full-text search term inclusion in the query.</p><p>If the full-text search term is included in the compiled filters map, it will be
removed from the filters map before the query is created. Further, the full-text
search is validated before beeing applied to the query. If the full-text search
is invalid and the <code class="inline">raise_on_invalid_search?</code> option is not set to <code class="inline">false</code>, the
function will raise an error.</p><h2 id="query_for_filters_map/3-examples" class="section-heading">
  <a href="#query_for_filters_map/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">filters_map</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9681701774-1">%{</span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="9681701774-2">[</span><span class="p" data-group-id="9681701774-3">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="9681701774-3">}</span><span class="p" data-group-id="9681701774-2">]</span><span class="p" data-group-id="9681701774-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">query_for_filters_map</span><span class="p" data-group-id="9681701774-4">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">filters_map</span><span class="p" data-group-id="9681701774-4">)</span><span class="w">
</span><span class="p" data-group-id="9681701774-5">#</span><span class="nc" data-group-id="9681701774-5">Ash.Query</span><span class="p" data-group-id="9681701774-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9681701774-6">#</span><span class="nc" data-group-id="9681701774-6">Ash.Filter</span><span class="p" data-group-id="9681701774-6">&lt;</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="9681701774-6">&gt;</span><span class="p" data-group-id="9681701774-5">&gt;</span></code></pre>
  </section>
</section>
<section class="detail" id="query_to_filters_map/3">

    <span id="query_to_filters_map/2"></span>

  <div class="detail-header">
    <a href="#query_to_filters_map/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">query_to_filters_map(query_or_resource, ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1699" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> query_to_filters_map(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Takes the AshPagify.scopes and AshPagify.form_filter and compiles them into a
map of filters. The filters are merged with the base filters of the AshPagify struct.</p><p>At this stage we assume that the filters, filter_form, and scopes have been validated
and are valid.</p><blockquote><h4 class="info">Full-text search</h4><p>Per default we do store the full-text search term along with the user
provided full-text search options  in the compiled filters map. If
you do not need to include the full-text search setting in the compiled filters
map, you can set the <code class="inline">include_full_text_search?</code> option to <code class="inline">false</code>.
The full-text search setting is stored under the key <code class="inline">&quot;__full_text_search&quot;</code> in the
resulting filters map. This can be handy if you want to store the current filter
state including the full-text search setting and retrieve it later. See
<a href="#query_for_filters_map/2"><code class="inline">AshPagify.query_for_filters_map/2</code></a> for an example.</p></blockquote><p>Precedence:</p><ul><li>scopes (will overwrite filter_form and filters)</li><li>filter_form (will overwrite filters)</li><li>filters</li></ul><h2 id="query_to_filters_map/3-examples" class="section-heading">
  <a href="#query_to_filters_map/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">query_to_filters_map</span><span class="p" data-group-id="2301012237-1">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2301012237-2">%</span><span class="nc" data-group-id="2301012237-2">AshPagify</span><span class="p" data-group-id="2301012237-2">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-3">[</span><span class="p" data-group-id="2301012237-4">{</span><span class="ss">:role</span><span class="p">,</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="2301012237-4">}</span><span class="p" data-group-id="2301012237-3">]</span><span class="p" data-group-id="2301012237-2">}</span><span class="p" data-group-id="2301012237-1">)</span><span class="w">
</span><span class="p" data-group-id="2301012237-5">%</span><span class="nc" data-group-id="2301012237-5">AshPagify</span><span class="p" data-group-id="2301012237-5">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-6">%{</span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2301012237-7">[</span><span class="p" data-group-id="2301012237-8">%{</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="2301012237-8">}</span><span class="p" data-group-id="2301012237-7">]</span><span class="p" data-group-id="2301012237-6">}</span><span class="p">,</span><span class="w"> </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-9">[</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="2301012237-9">]</span><span class="p" data-group-id="2301012237-5">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">query_to_filters_map</span><span class="p" data-group-id="2301012237-10">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2301012237-11">%</span><span class="nc" data-group-id="2301012237-11">AshPagify</span><span class="p" data-group-id="2301012237-11">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-12">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="2301012237-12">}</span><span class="p" data-group-id="2301012237-11">}</span><span class="p" data-group-id="2301012237-10">)</span><span class="w">
</span><span class="p" data-group-id="2301012237-13">%</span><span class="nc" data-group-id="2301012237-13">AshPagify</span><span class="p" data-group-id="2301012237-13">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-14">%{</span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2301012237-15">[</span><span class="p" data-group-id="2301012237-16">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="2301012237-16">}</span><span class="p" data-group-id="2301012237-15">]</span><span class="p" data-group-id="2301012237-14">}</span><span class="p" data-group-id="2301012237-13">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">query_to_filters_map</span><span class="p" data-group-id="2301012237-17">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Post</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2301012237-18">%</span><span class="nc" data-group-id="2301012237-18">AshPagify</span><span class="p" data-group-id="2301012237-18">{</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-19">%{</span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Author 1&quot;</span><span class="p" data-group-id="2301012237-19">}</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-20">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="2301012237-20">}</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-21">[</span><span class="p" data-group-id="2301012237-22">{</span><span class="ss">:role</span><span class="p">,</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="2301012237-22">}</span><span class="p" data-group-id="2301012237-21">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2301012237-18">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="2301012237-17">)</span><span class="w">
</span><span class="p" data-group-id="2301012237-23">%</span><span class="nc" data-group-id="2301012237-23">AshPagify</span><span class="p" data-group-id="2301012237-23">{</span><span class="w">
  </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-24">[</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="2301012237-24">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-25">%{</span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2301012237-26">[</span><span class="p" data-group-id="2301012237-27">%{</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="2301012237-27">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2301012237-28">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2301012237-29">%{</span><span class="s">&quot;eq&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="2301012237-29">}</span><span class="p" data-group-id="2301012237-28">}</span><span class="p" data-group-id="2301012237-26">]</span><span class="p" data-group-id="2301012237-25">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-30">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="2301012237-30">}</span><span class="w">
</span><span class="p" data-group-id="2301012237-23">}</span><span class="w">

</span><span class="c1"># Or with a full-text search term</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">query_to_filters_map</span><span class="p" data-group-id="2301012237-31">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Post</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2301012237-32">%</span><span class="nc" data-group-id="2301012237-32">AshPagify</span><span class="p" data-group-id="2301012237-32">{</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;search term&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-33">%{</span><span class="ss">author</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Author 1&quot;</span><span class="p" data-group-id="2301012237-33">}</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-34">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="2301012237-34">}</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-35">[</span><span class="p" data-group-id="2301012237-36">{</span><span class="ss">:role</span><span class="p">,</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="2301012237-36">}</span><span class="p" data-group-id="2301012237-35">]</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="2301012237-32">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="2301012237-31">)</span><span class="w">
</span><span class="p" data-group-id="2301012237-37">%</span><span class="nc" data-group-id="2301012237-37">AshPagify</span><span class="p" data-group-id="2301012237-37">{</span><span class="w">
  </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-38">[</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="2301012237-38">]</span><span class="p">,</span><span class="w">
  </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-39">%{</span><span class="w">
    </span><span class="s">&quot;and&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2301012237-40">[</span><span class="w">
      </span><span class="p" data-group-id="2301012237-41">%{</span><span class="s">&quot;author&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;John&quot;</span><span class="p" data-group-id="2301012237-41">}</span><span class="p">,</span><span class="w">
      </span><span class="p" data-group-id="2301012237-42">%{</span><span class="s">&quot;name&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2301012237-43">%{</span><span class="s">&quot;eq&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="2301012237-43">}</span><span class="p" data-group-id="2301012237-42">}</span><span class="w">
    </span><span class="p" data-group-id="2301012237-40">]</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;__full_text_search&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="p" data-group-id="2301012237-44">%{</span><span class="w">
      </span><span class="s">&quot;search&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;search term&quot;</span><span class="w">
    </span><span class="p" data-group-id="2301012237-44">}</span><span class="w">
  </span><span class="p" data-group-id="2301012237-39">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2301012237-45">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="2301012237-45">}</span><span class="p">,</span><span class="w">
  </span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;search term&quot;</span><span class="w">
</span><span class="p" data-group-id="2301012237-37">}</span></code></pre>
  </section>
</section>
<section class="detail" id="reset_filter_form/1">

  <div class="detail-header">
    <a href="#reset_filter_form/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">reset_filter_form(ash_pagify)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1493" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> reset_filter_form(<a href="#t:t/0">t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Removes all filter_form from a AshPagify struct.</p><h2 id="reset_filter_form/1-example" class="section-heading">
  <a href="#reset_filter_form/1-example" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Example</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">reset_filter_form</span><span class="p" data-group-id="8778646269-1">(</span><span class="p" data-group-id="8778646269-2">%</span><span class="nc" data-group-id="8778646269-2">AshPagify</span><span class="p" data-group-id="8778646269-2">{</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8778646269-3">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="8778646269-3">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="8778646269-2">}</span><span class="p" data-group-id="8778646269-1">)</span><span class="w">

</span><span class="p" data-group-id="8778646269-4">%</span><span class="nc" data-group-id="8778646269-4">AshPagify</span><span class="p" data-group-id="8778646269-4">{</span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8778646269-5">%{</span><span class="p" data-group-id="8778646269-5">}</span><span class="p" data-group-id="8778646269-4">}</span></code></pre>
  </section>
</section>
<section class="detail" id="reset_filters/1">

  <div class="detail-header">
    <a href="#reset_filters/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">reset_filters(ash_pagify)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1479" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> reset_filters(<a href="#t:t/0">t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Removes all filters from a AshPagify struct.</p><h2 id="reset_filters/1-example" class="section-heading">
  <a href="#reset_filters/1-example" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Example</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">reset_filters</span><span class="p" data-group-id="2531052480-1">(</span><span class="p" data-group-id="2531052480-2">%</span><span class="nc" data-group-id="2531052480-2">AshPagify</span><span class="p" data-group-id="2531052480-2">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2531052480-3">%{</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="2531052480-3">}</span><span class="p" data-group-id="2531052480-2">}</span><span class="p" data-group-id="2531052480-1">)</span><span class="w">
</span><span class="p" data-group-id="2531052480-4">%</span><span class="nc" data-group-id="2531052480-4">AshPagify</span><span class="p" data-group-id="2531052480-4">{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2531052480-5">%{</span><span class="p" data-group-id="2531052480-5">}</span><span class="p" data-group-id="2531052480-4">}</span></code></pre>
  </section>
</section>
<section class="detail" id="reset_order/1">

  <div class="detail-header">
    <a href="#reset_order/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">reset_order(ash_pagify)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1970" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> reset_order(<a href="#t:t/0">t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Resets the order of a AshPagify struct.</p><h2 id="reset_order/1-example" class="section-heading">
  <a href="#reset_order/1-example" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Example</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">reset_order</span><span class="p" data-group-id="8215127310-1">(</span><span class="p" data-group-id="8215127310-2">%</span><span class="nc" data-group-id="8215127310-2">AshPagify</span><span class="p" data-group-id="8215127310-2">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8215127310-3">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="8215127310-3">]</span><span class="p" data-group-id="8215127310-2">}</span><span class="p" data-group-id="8215127310-1">)</span><span class="w">
</span><span class="p" data-group-id="8215127310-4">%</span><span class="nc" data-group-id="8215127310-4">AshPagify</span><span class="p" data-group-id="8215127310-4">{</span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="8215127310-4">}</span></code></pre>
  </section>
</section>
<section class="detail" id="run/4">

    <span id="run/2"></span>

    <span id="run/3"></span>

  <div class="detail-header">
    <a href="#run/4" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">run(query_or_resource, ash_pagify, opts \\ [], args \\ nil)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L413" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> run(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()) ::
  {[<a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:record/0">Ash.Resource.record</a>()], <a href="AshPagify.Meta.html#t:t/0">AshPagify.Meta.t</a>()}</pre>

      </div>

<p>Applies the given <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to the given <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a> or <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0"><code class="inline">Ash.Resource.t/0</code></a>,
retrieves the data and the <a href="AshPagify.Meta.html#t:t/0"><code class="inline">AshPagify.Meta.t/0</code></a> data.</p><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine. Or you can use <a href="#validate_and_run/4"><code class="inline">AshPagify.validate_and_run/4</code></a> or
<a href="#validate_and_run!/4"><code class="inline">AshPagify.validate_and_run!/4</code></a> instead of this function.</p><h2 id="run/4-examples" class="section-heading">
  <a href="#run/4-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3641417561-1">[</span><span class="ss">page</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3641417561-2">[</span><span class="ss">count</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="3641417561-2">]</span><span class="p" data-group-id="3641417561-1">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate!</span><span class="p" data-group-id="3641417561-3">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3641417561-4">%{</span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3641417561-5">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;inexistent&quot;</span><span class="p" data-group-id="3641417561-5">}</span><span class="p" data-group-id="3641417561-4">}</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="3641417561-3">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="3641417561-6">{</span><span class="n">data</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="3641417561-6">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">run</span><span class="p" data-group-id="3641417561-7">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p">,</span><span class="w"> </span><span class="n">opts</span><span class="p" data-group-id="3641417561-7">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">data</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p" data-group-id="3641417561-8">[</span><span class="p" data-group-id="3641417561-8">]</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">match?</span><span class="p" data-group-id="3641417561-9">(</span><span class="p" data-group-id="3641417561-10">%</span><span class="nc" data-group-id="3641417561-10">AshPagify.Meta</span><span class="p" data-group-id="3641417561-10">{</span><span class="p" data-group-id="3641417561-10">}</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="3641417561-9">)</span><span class="w">
</span><span class="no">true</span></code></pre><p>See the documentation for <a href="#validate_and_run/4"><code class="inline">AshPagify.validate_and_run/4</code></a> for supported options.</p>
  </section>
</section>
<section class="detail" id="scope/3">

    <span id="scope/2"></span>

  <div class="detail-header">
    <a href="#scope/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">scope(q, ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L765" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> scope(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>()</pre>

      </div>

<p>Applies the <code class="inline">scopes</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p><p>Used by <a href="#query/2"><code class="inline">AshPagify.query/2</code></a>. At this stage we assume that the scopes are already
compiled and validated. Further, default scopes are loaded into the AshPagify struct.</p><p>For a completed list of filter operators, see <a href="https://hexdocs.pm/ash/3.3.3/Ash.Filter.html"><code class="inline">Ash.Filter</code></a>.</p><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p><h2 id="scope/3-examples" class="section-heading">
  <a href="#scope/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">q</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Ash.Query</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="3632055770-1">(</span><span class="nc">Post</span><span class="p" data-group-id="3632055770-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3632055770-2">%</span><span class="nc" data-group-id="3632055770-2">AshPagify</span><span class="p" data-group-id="3632055770-2">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3632055770-3">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="3632055770-3">}</span><span class="p" data-group-id="3632055770-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">scope</span><span class="p" data-group-id="3632055770-4">(</span><span class="n">q</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="3632055770-4">)</span><span class="w">
</span><span class="p" data-group-id="3632055770-5">#</span><span class="nc" data-group-id="3632055770-5">Ash.Query</span><span class="p" data-group-id="3632055770-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3632055770-6">#</span><span class="nc" data-group-id="3632055770-6">Ash.Filter</span><span class="p" data-group-id="3632055770-6">&lt;</span><span class="n">age</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="err"></span><span class="p" data-group-id="3632055770-7">[</span><span class="mi">36</span><span class="n">m10</span><span class="err"></span><span class="p" data-group-id="3632055770-8">[</span><span class="mi">0</span><span class="n">m</span><span class="p">&gt;</span><span class="p">&gt;</span></code></pre>
  </section>
</section>
<section class="detail" id="search/3">

    <span id="search/2"></span>

  <div class="detail-header">
    <a href="#search/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">search(q, ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L716" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> search(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>(), <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>()</pre>

      </div>

<p>Applies the <code class="inline">search</code> parameter of a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a> to an <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0"><code class="inline">Ash.Query.t/0</code></a>.</p><p>Used by <a href="#query/2"><code class="inline">AshPagify.query/2</code></a>. AshPagify allows you to perform full-text searches on resources. It uses the
built-in <a href="https://www.postgresql.org/docs/current/textsearch.html">PostgreSQL full-text search functionality</a>.</p><p>Have a look at the <a href="AshPagify.Tsearch.html#t:tsearch_option/0"><code class="inline">AshPagify.Tsearch.tsearch_option/0</code></a> type for a list of available options.</p><p>If search is provided and there is no order_by, the query will be sorted by the rank of the search.</p><p>This function does <em>not</em> validate or apply default parameters to the given
AshPagify struct. Be sure to validate any user-generated parameters with
<a href="#validate/2"><code class="inline">validate/2</code></a> or <a href="#validate!/2"><code class="inline">validate!/2</code></a> before passing them to this function. Doing so
will automatically parse user provided input into the correct format for the
query engine.</p>
  </section>
</section>
<section class="detail" id="set_filter_form/3">

    <span id="set_filter_form/2"></span>

  <div class="detail-header">
    <a href="#set_filter_form/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_filter_form(meta, filter_form, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1514" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set_filter_form(<a href="AshPagify.Meta.html#t:t/0">AshPagify.Meta.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="AshPagify.Meta.html#t:t/0">AshPagify.Meta.t</a>()</pre>

      </div>

<p>Updates the filter form of a AshPagify.Meta struct.</p><p>If the filter already exists, it will be replaced with the new value. If the
filter does not exist, it will be added to the filter form map.</p><p>If the reset option is set to false, the offset will not be reset to 0.</p><h2 id="set_filter_form/3-examples" class="section-heading">
  <a href="#set_filter_form/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="w"> </span><span class="n">set_filter_form</span><span class="p" data-group-id="1476748761-1">(</span><span class="p" data-group-id="1476748761-2">%</span><span class="nc" data-group-id="1476748761-2">AshPagify.Meta</span><span class="p" data-group-id="1476748761-2">{</span><span class="p" data-group-id="1476748761-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1476748761-3">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 2&quot;</span><span class="p" data-group-id="1476748761-3">}</span><span class="p" data-group-id="1476748761-1">)</span><span class="w">
</span><span class="p" data-group-id="1476748761-4">%</span><span class="nc" data-group-id="1476748761-4">AshPagify.Meta</span><span class="p" data-group-id="1476748761-4">{</span><span class="ss">ash_pagify</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1476748761-5">%</span><span class="nc" data-group-id="1476748761-5">AshPagify</span><span class="p" data-group-id="1476748761-5">{</span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1476748761-6">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 2&quot;</span><span class="p" data-group-id="1476748761-6">}</span><span class="p" data-group-id="1476748761-5">}</span><span class="p" data-group-id="1476748761-4">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_filter_form</span><span class="p" data-group-id="1476748761-7">(</span><span class="p" data-group-id="1476748761-8">%</span><span class="nc" data-group-id="1476748761-8">AshPagify.Meta</span><span class="p" data-group-id="1476748761-8">{</span><span class="ss">ash_pagify</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1476748761-9">%</span><span class="nc" data-group-id="1476748761-9">AshPagify</span><span class="p" data-group-id="1476748761-9">{</span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1476748761-10">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="1476748761-10">}</span><span class="p" data-group-id="1476748761-9">}</span><span class="p" data-group-id="1476748761-8">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1476748761-11">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 2&quot;</span><span class="p" data-group-id="1476748761-11">}</span><span class="p" data-group-id="1476748761-7">)</span><span class="w">
</span><span class="p" data-group-id="1476748761-12">%</span><span class="nc" data-group-id="1476748761-12">AshPagify.Meta</span><span class="p" data-group-id="1476748761-12">{</span><span class="ss">ash_pagify</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1476748761-13">%</span><span class="nc" data-group-id="1476748761-13">AshPagify</span><span class="p" data-group-id="1476748761-13">{</span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1476748761-14">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 2&quot;</span><span class="p" data-group-id="1476748761-14">}</span><span class="p" data-group-id="1476748761-13">}</span><span class="p" data-group-id="1476748761-12">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_filter_form</span><span class="p" data-group-id="1476748761-15">(</span><span class="p" data-group-id="1476748761-16">%</span><span class="nc" data-group-id="1476748761-16">AshPagify.Meta</span><span class="p" data-group-id="1476748761-16">{</span><span class="ss">ash_pagify</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1476748761-17">%</span><span class="nc" data-group-id="1476748761-17">AshPagify</span><span class="p" data-group-id="1476748761-17">{</span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1476748761-18">%{</span><span class="s">&quot;field&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;eq&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="1476748761-18">}</span><span class="p" data-group-id="1476748761-17">}</span><span class="p" data-group-id="1476748761-16">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1476748761-19">%{</span><span class="s">&quot;negated&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="no">false</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;operator&quot;</span><span class="w"> </span><span class="p">=&gt;</span><span class="w"> </span><span class="s">&quot;and&quot;</span><span class="p" data-group-id="1476748761-19">}</span><span class="p" data-group-id="1476748761-15">)</span><span class="w">
</span><span class="p" data-group-id="1476748761-20">%</span><span class="nc" data-group-id="1476748761-20">AshPagify.Meta</span><span class="p" data-group-id="1476748761-20">{</span><span class="ss">ash_pagify</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1476748761-21">%</span><span class="nc" data-group-id="1476748761-21">AshPagify</span><span class="p" data-group-id="1476748761-21">{</span><span class="ss">filter_form</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="1476748761-21">}</span><span class="p" data-group-id="1476748761-20">}</span></code></pre>
  </section>
</section>
<section class="detail" id="set_limit/3">

    <span id="set_limit/2"></span>

  <div class="detail-header">
    <a href="#set_limit/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_limit(ash_pagify, limit, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1240" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set_limit(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">pos_integer</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Sets the limit value of a <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_limit</span><span class="p" data-group-id="4362492366-1">(</span><span class="p" data-group-id="4362492366-2">%</span><span class="nc" data-group-id="4362492366-2">AshPagify</span><span class="p" data-group-id="4362492366-2">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4362492366-2">}</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="4362492366-1">)</span><span class="w">
</span><span class="p" data-group-id="4362492366-3">%</span><span class="nc" data-group-id="4362492366-3">AshPagify</span><span class="p" data-group-id="4362492366-3">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4362492366-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_limit</span><span class="p" data-group-id="4362492366-4">(</span><span class="p" data-group-id="4362492366-5">%</span><span class="nc" data-group-id="4362492366-5">AshPagify</span><span class="p" data-group-id="4362492366-5">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4362492366-5">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;20&quot;</span><span class="p" data-group-id="4362492366-4">)</span><span class="w">
</span><span class="p" data-group-id="4362492366-6">%</span><span class="nc" data-group-id="4362492366-6">AshPagify</span><span class="p" data-group-id="4362492366-6">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4362492366-6">}</span></code></pre><p>The limit will not be allowed to go below 1.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_limit</span><span class="p" data-group-id="7761373373-1">(</span><span class="p" data-group-id="7761373373-2">%</span><span class="nc" data-group-id="7761373373-2">AshPagify</span><span class="p" data-group-id="7761373373-2">{</span><span class="p" data-group-id="7761373373-2">}</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">5</span><span class="p" data-group-id="7761373373-1">)</span><span class="w">
</span><span class="p" data-group-id="7761373373-3">%</span><span class="nc" data-group-id="7761373373-3">AshPagify</span><span class="p" data-group-id="7761373373-3">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p" data-group-id="7761373373-3">}</span></code></pre><p>If the limit is higher than the max_limit option, the limit will be set to the max_limit.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_limit</span><span class="p" data-group-id="8639635099-1">(</span><span class="p" data-group-id="8639635099-2">%</span><span class="nc" data-group-id="8639635099-2">AshPagify</span><span class="p" data-group-id="8639635099-2">{</span><span class="p" data-group-id="8639635099-2">}</span><span class="p">,</span><span class="w"> </span><span class="mi">102</span><span class="p" data-group-id="8639635099-1">)</span><span class="w">
</span><span class="p" data-group-id="8639635099-3">%</span><span class="nc" data-group-id="8639635099-3">AshPagify</span><span class="p" data-group-id="8639635099-3">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">100</span><span class="p" data-group-id="8639635099-3">}</span></code></pre>
  </section>
</section>
<section class="detail" id="set_offset/2">

  <div class="detail-header">
    <a href="#set_offset/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_offset(ash_pagify, offset)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1273" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set_offset(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>() | <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Sets the offset value of a <a href="AshPagify.html"><code class="inline">AshPagify</code></a> struct.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_offset</span><span class="p" data-group-id="4249768667-1">(</span><span class="p" data-group-id="4249768667-2">%</span><span class="nc" data-group-id="4249768667-2">AshPagify</span><span class="p" data-group-id="4249768667-2">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4249768667-2">}</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="4249768667-1">)</span><span class="w">
</span><span class="p" data-group-id="4249768667-3">%</span><span class="nc" data-group-id="4249768667-3">AshPagify</span><span class="p" data-group-id="4249768667-3">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4249768667-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_offset</span><span class="p" data-group-id="4249768667-4">(</span><span class="p" data-group-id="4249768667-5">%</span><span class="nc" data-group-id="4249768667-5">AshPagify</span><span class="p" data-group-id="4249768667-5">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4249768667-5">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;20&quot;</span><span class="p" data-group-id="4249768667-4">)</span><span class="w">
</span><span class="p" data-group-id="4249768667-6">%</span><span class="nc" data-group-id="4249768667-6">AshPagify</span><span class="p" data-group-id="4249768667-6">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4249768667-6">}</span></code></pre><p>The offset will not be allowed to go below 0.</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_offset</span><span class="p" data-group-id="0913181456-1">(</span><span class="p" data-group-id="0913181456-2">%</span><span class="nc" data-group-id="0913181456-2">AshPagify</span><span class="p" data-group-id="0913181456-2">{</span><span class="p" data-group-id="0913181456-2">}</span><span class="p">,</span><span class="w"> </span><span class="o">-</span><span class="mi">5</span><span class="p" data-group-id="0913181456-1">)</span><span class="w">
</span><span class="p" data-group-id="0913181456-3">%</span><span class="nc" data-group-id="0913181456-3">AshPagify</span><span class="p" data-group-id="0913181456-3">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="0913181456-3">}</span></code></pre>
  </section>
</section>
<section class="detail" id="set_scope/3">

    <span id="set_scope/2"></span>

  <div class="detail-header">
    <a href="#set_scope/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_scope(ash_pagify, scope, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1423" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set_scope(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Sets the scope of a AshPagify struct.</p><p>If the scope already exists, it will be replaced with the new value. If the
scope does not exist, it will be added to the scopes map.</p><p>If the reset option is set to false, the offset will not be reset to 0.</p><h2 id="set_scope/3-examples" class="section-heading">
  <a href="#set_scope/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_scope</span><span class="p" data-group-id="5024899815-1">(</span><span class="p" data-group-id="5024899815-2">%</span><span class="nc" data-group-id="5024899815-2">AshPagify</span><span class="p" data-group-id="5024899815-2">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5024899815-3">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="5024899815-3">}</span><span class="p" data-group-id="5024899815-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5024899815-4">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:inactive</span><span class="p" data-group-id="5024899815-4">}</span><span class="p" data-group-id="5024899815-1">)</span><span class="w">
</span><span class="p" data-group-id="5024899815-5">%</span><span class="nc" data-group-id="5024899815-5">AshPagify</span><span class="p" data-group-id="5024899815-5">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5024899815-6">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:inactive</span><span class="p" data-group-id="5024899815-6">}</span><span class="p" data-group-id="5024899815-5">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_scope</span><span class="p" data-group-id="5024899815-7">(</span><span class="p" data-group-id="5024899815-8">%</span><span class="nc" data-group-id="5024899815-8">AshPagify</span><span class="p" data-group-id="5024899815-8">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5024899815-9">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="5024899815-9">}</span><span class="p" data-group-id="5024899815-8">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5024899815-10">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="5024899815-10">}</span><span class="p" data-group-id="5024899815-7">)</span><span class="w">
</span><span class="p" data-group-id="5024899815-11">%</span><span class="nc" data-group-id="5024899815-11">AshPagify</span><span class="p" data-group-id="5024899815-11">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5024899815-12">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="5024899815-12">}</span><span class="p" data-group-id="5024899815-11">}</span></code></pre><p>Or add a new scope:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_scope</span><span class="p" data-group-id="4813101466-1">(</span><span class="p" data-group-id="4813101466-2">%</span><span class="nc" data-group-id="4813101466-2">AshPagify</span><span class="p" data-group-id="4813101466-2">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4813101466-3">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="4813101466-3">}</span><span class="p" data-group-id="4813101466-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4813101466-4">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="4813101466-4">}</span><span class="p" data-group-id="4813101466-1">)</span><span class="w">
</span><span class="p" data-group-id="4813101466-5">%</span><span class="nc" data-group-id="4813101466-5">AshPagify</span><span class="p" data-group-id="4813101466-5">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4813101466-6">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p">,</span><span class="w"> </span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="4813101466-6">}</span><span class="p" data-group-id="4813101466-5">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_scope</span><span class="p" data-group-id="4813101466-7">(</span><span class="p" data-group-id="4813101466-8">%</span><span class="nc" data-group-id="4813101466-8">AshPagify</span><span class="p" data-group-id="4813101466-8">{</span><span class="p" data-group-id="4813101466-8">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4813101466-9">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="4813101466-9">}</span><span class="p" data-group-id="4813101466-7">)</span><span class="w">
</span><span class="p" data-group-id="4813101466-10">%</span><span class="nc" data-group-id="4813101466-10">AshPagify</span><span class="p" data-group-id="4813101466-10">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4813101466-11">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="4813101466-11">}</span><span class="p" data-group-id="4813101466-10">}</span></code></pre><p>Or without reset offset:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_scope</span><span class="p" data-group-id="2502525344-1">(</span><span class="p" data-group-id="2502525344-2">%</span><span class="nc" data-group-id="2502525344-2">AshPagify</span><span class="p" data-group-id="2502525344-2">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2502525344-2">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2502525344-3">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="2502525344-3">}</span><span class="p">,</span><span class="w"> </span><span class="ss">reset_on_filter?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="2502525344-1">)</span><span class="w">
</span><span class="p" data-group-id="2502525344-4">%</span><span class="nc" data-group-id="2502525344-4">AshPagify</span><span class="p" data-group-id="2502525344-4">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="2502525344-5">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:active</span><span class="p" data-group-id="2502525344-5">}</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2502525344-4">}</span></code></pre>
  </section>
</section>
<section class="detail" id="set_search/3">

    <span id="set_search/2"></span>

  <div class="detail-header">
    <a href="#set_search/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_search(ash_pagify, search, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1379" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> set_search(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/String.html#t:t/0">String.t</a>() | nil, <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Sets the search of a AshPagify struct.</p><p>If the reset option is set to false, the offset will not be reset to 0.</p><h2 id="set_search/3-examples" class="section-heading">
  <a href="#set_search/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_search</span><span class="p" data-group-id="2388359996-1">(</span><span class="p" data-group-id="2388359996-2">%</span><span class="nc" data-group-id="2388359996-2">AshPagify</span><span class="p" data-group-id="2388359996-2">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="2388359996-2">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;term&quot;</span><span class="p" data-group-id="2388359996-1">)</span><span class="w">
</span><span class="p" data-group-id="2388359996-3">%</span><span class="nc" data-group-id="2388359996-3">AshPagify</span><span class="p" data-group-id="2388359996-3">{</span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;term&quot;</span><span class="p" data-group-id="2388359996-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_search</span><span class="p" data-group-id="2388359996-4">(</span><span class="p" data-group-id="2388359996-5">%</span><span class="nc" data-group-id="2388359996-5">AshPagify</span><span class="p" data-group-id="2388359996-5">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;old&quot;</span><span class="p" data-group-id="2388359996-5">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;new&quot;</span><span class="p" data-group-id="2388359996-4">)</span><span class="w">
</span><span class="p" data-group-id="2388359996-6">%</span><span class="nc" data-group-id="2388359996-6">AshPagify</span><span class="p" data-group-id="2388359996-6">{</span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;new&quot;</span><span class="p" data-group-id="2388359996-6">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_search</span><span class="p" data-group-id="2388359996-7">(</span><span class="p" data-group-id="2388359996-8">%</span><span class="nc" data-group-id="2388359996-8">AshPagify</span><span class="p" data-group-id="2388359996-8">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;old&quot;</span><span class="p" data-group-id="2388359996-8">}</span><span class="p">,</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="2388359996-7">)</span><span class="w">
</span><span class="p" data-group-id="2388359996-9">%</span><span class="nc" data-group-id="2388359996-9">AshPagify</span><span class="p" data-group-id="2388359996-9">{</span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="2388359996-9">}</span></code></pre><p>Or without reset offset:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_search</span><span class="p" data-group-id="9323594720-1">(</span><span class="p" data-group-id="9323594720-2">%</span><span class="nc" data-group-id="9323594720-2">AshPagify</span><span class="p" data-group-id="9323594720-2">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="9323594720-2">}</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;term&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">reset_on_filter?</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9323594720-1">)</span><span class="w">
</span><span class="p" data-group-id="9323594720-3">%</span><span class="nc" data-group-id="9323594720-3">AshPagify</span><span class="p" data-group-id="9323594720-3">{</span><span class="ss">search</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;term&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="9323594720-3">}</span></code></pre>
  </section>
</section>
<section class="detail" id="set_tsvector/2">

    <span id="set_tsvector/1"></span>

  <div class="detail-header">
    <a href="#set_tsvector/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">set_tsvector(tsvector, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1209" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Sets the tsvector value in the full_text_search clause of the <code class="inline">Keyword.t</code> opts parameter.</p><p>If the full_text_search clause does not exist, it will be created. If the tsvector
value already exists, it will be updated.</p><h2 id="set_tsvector/2-examples" class="section-heading">
  <a href="#set_tsvector/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">set_tsvector</span><span class="p" data-group-id="9779894417-1">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9779894417-2">[</span><span class="ss">full_text_search</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9779894417-3">[</span><span class="ss">tsvector</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="9779894417-3">]</span><span class="p" data-group-id="9779894417-2">]</span><span class="p" data-group-id="9779894417-1">)</span><span class="w">
</span><span class="p" data-group-id="9779894417-4">[</span><span class="ss">full_text_search</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9779894417-5">[</span><span class="ss">tsvector</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bar&quot;</span><span class="p" data-group-id="9779894417-5">]</span><span class="p" data-group-id="9779894417-4">]</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_tsvector</span><span class="p" data-group-id="9779894417-6">(</span><span class="s">&quot;bar&quot;</span><span class="p" data-group-id="9779894417-6">)</span><span class="w">
</span><span class="p" data-group-id="9779894417-7">[</span><span class="ss">full_text_search</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9779894417-8">[</span><span class="ss">tsvector</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;bar&quot;</span><span class="p" data-group-id="9779894417-8">]</span><span class="p" data-group-id="9779894417-7">]</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">set_tsvector</span><span class="p" data-group-id="9779894417-9">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9779894417-10">[</span><span class="ss">full_text_search</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9779894417-11">[</span><span class="ss">tsvector</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="9779894417-11">]</span><span class="p" data-group-id="9779894417-10">]</span><span class="p" data-group-id="9779894417-9">)</span><span class="w">
</span><span class="p" data-group-id="9779894417-12">[</span><span class="ss">full_text_search</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9779894417-13">[</span><span class="ss">tsvector</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="9779894417-13">]</span><span class="p" data-group-id="9779894417-12">]</span></code></pre>
  </section>
</section>
<section class="detail" id="to_next_offset/2">

    <span id="to_next_offset/1"></span>

  <div class="detail-header">
    <a href="#to_next_offset/2" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">to_next_offset(ash_pagify, total_count \\ nil)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1334" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> to_next_offset(<a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">non_neg_integer</a>() | nil) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Sets the offset of a AshPagify struct to the next page depending on the limit.</p><p>If the total count is given as the second argument, the offset will not be
increased if the last page has already been reached. You can get the total
count from the <a href="AshPagify.Meta.html"><code class="inline">AshPagify.Meta</code></a> struct. If the AshPagify has an offset beyond the total
count, the offset will be set to the last page.</p><h2 id="to_next_offset/2-examples" class="section-heading">
  <a href="#to_next_offset/2-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">to_next_offset</span><span class="p" data-group-id="2202902321-1">(</span><span class="p" data-group-id="2202902321-2">%</span><span class="nc" data-group-id="2202902321-2">AshPagify</span><span class="p" data-group-id="2202902321-2">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="2202902321-2">}</span><span class="p" data-group-id="2202902321-1">)</span><span class="w">
</span><span class="p" data-group-id="2202902321-3">%</span><span class="nc" data-group-id="2202902321-3">AshPagify</span><span class="p" data-group-id="2202902321-3">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="2202902321-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_next_offset</span><span class="p" data-group-id="2202902321-4">(</span><span class="p" data-group-id="2202902321-5">%</span><span class="nc" data-group-id="2202902321-5">AshPagify</span><span class="p" data-group-id="2202902321-5">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="2202902321-5">}</span><span class="p">,</span><span class="w"> </span><span class="mi">21</span><span class="p" data-group-id="2202902321-4">)</span><span class="w">
</span><span class="p" data-group-id="2202902321-6">%</span><span class="nc" data-group-id="2202902321-6">AshPagify</span><span class="p" data-group-id="2202902321-6">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="2202902321-6">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_next_offset</span><span class="p" data-group-id="2202902321-7">(</span><span class="p" data-group-id="2202902321-8">%</span><span class="nc" data-group-id="2202902321-8">AshPagify</span><span class="p" data-group-id="2202902321-8">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="2202902321-8">}</span><span class="p">,</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="2202902321-7">)</span><span class="w">
</span><span class="p" data-group-id="2202902321-9">%</span><span class="nc" data-group-id="2202902321-9">AshPagify</span><span class="p" data-group-id="2202902321-9">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="2202902321-9">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_next_offset</span><span class="p" data-group-id="2202902321-10">(</span><span class="p" data-group-id="2202902321-11">%</span><span class="nc" data-group-id="2202902321-11">AshPagify</span><span class="p" data-group-id="2202902321-11">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="2202902321-11">}</span><span class="p">,</span><span class="w"> </span><span class="mi">22</span><span class="p" data-group-id="2202902321-10">)</span><span class="w">
</span><span class="p" data-group-id="2202902321-12">%</span><span class="nc" data-group-id="2202902321-12">AshPagify</span><span class="p" data-group-id="2202902321-12">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="2202902321-12">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_next_offset</span><span class="p" data-group-id="2202902321-13">(</span><span class="p" data-group-id="2202902321-14">%</span><span class="nc" data-group-id="2202902321-14">AshPagify</span><span class="p" data-group-id="2202902321-14">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="2202902321-14">}</span><span class="p" data-group-id="2202902321-13">)</span><span class="w">
</span><span class="p" data-group-id="2202902321-15">%</span><span class="nc" data-group-id="2202902321-15">AshPagify</span><span class="p" data-group-id="2202902321-15">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p" data-group-id="2202902321-15">}</span></code></pre>
  </section>
</section>
<section class="detail" id="to_previous_offset/1">

  <div class="detail-header">
    <a href="#to_previous_offset/1" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">to_previous_offset(ash_pagify)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1302" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> to_previous_offset(<a href="#t:t/0">t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Sets the offset of a AshPagify struct to the page depending on the limit.</p><h2 id="to_previous_offset/1-examples" class="section-heading">
  <a href="#to_previous_offset/1-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="n">to_previous_offset</span><span class="p" data-group-id="1782295773-1">(</span><span class="p" data-group-id="1782295773-2">%</span><span class="nc" data-group-id="1782295773-2">AshPagify</span><span class="p" data-group-id="1782295773-2">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1782295773-2">}</span><span class="p" data-group-id="1782295773-1">)</span><span class="w">
</span><span class="p" data-group-id="1782295773-3">%</span><span class="nc" data-group-id="1782295773-3">AshPagify</span><span class="p" data-group-id="1782295773-3">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1782295773-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_previous_offset</span><span class="p" data-group-id="1782295773-4">(</span><span class="p" data-group-id="1782295773-5">%</span><span class="nc" data-group-id="1782295773-5">AshPagify</span><span class="p" data-group-id="1782295773-5">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1782295773-5">}</span><span class="p" data-group-id="1782295773-4">)</span><span class="w">
</span><span class="p" data-group-id="1782295773-6">%</span><span class="nc" data-group-id="1782295773-6">AshPagify</span><span class="p" data-group-id="1782295773-6">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1782295773-6">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_previous_offset</span><span class="p" data-group-id="1782295773-7">(</span><span class="p" data-group-id="1782295773-8">%</span><span class="nc" data-group-id="1782295773-8">AshPagify</span><span class="p" data-group-id="1782295773-8">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1782295773-8">}</span><span class="p" data-group-id="1782295773-7">)</span><span class="w">
</span><span class="p" data-group-id="1782295773-9">%</span><span class="nc" data-group-id="1782295773-9">AshPagify</span><span class="p" data-group-id="1782295773-9">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1782295773-9">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">to_previous_offset</span><span class="p" data-group-id="1782295773-10">(</span><span class="p" data-group-id="1782295773-11">%</span><span class="nc" data-group-id="1782295773-11">AshPagify</span><span class="p" data-group-id="1782295773-11">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1782295773-11">}</span><span class="p" data-group-id="1782295773-10">)</span><span class="w">
</span><span class="p" data-group-id="1782295773-12">%</span><span class="nc" data-group-id="1782295773-12">AshPagify</span><span class="p" data-group-id="1782295773-12">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="1782295773-12">}</span></code></pre>
  </section>
</section>
<section class="detail" id="validate/3">

    <span id="validate/2"></span>

  <div class="detail-header">
    <a href="#validate/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">validate(query_or_resource, map_or_ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1123" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> validate(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) ::
  {:ok, <a href="#t:t/0">t</a>()} | {:error, <a href="AshPagify.Meta.html#t:t/0">AshPagify.Meta.t</a>()}</pre>

      </div>

<p>Validates a <a href="#t:t/0"><code class="inline">AshPagify.t/0</code></a>.</p><h2 id="validate/3-examples" class="section-heading">
  <a href="#validate/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">params</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5867389518-1">%{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">other_param</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="5867389518-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="5867389518-2">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">params</span><span class="p" data-group-id="5867389518-2">)</span><span class="w">
</span><span class="p" data-group-id="5867389518-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5867389518-4">%</span><span class="nc" data-group-id="5867389518-4">AshPagify</span><span class="p" data-group-id="5867389518-4">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5867389518-5">%{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="ss">:all</span><span class="p" data-group-id="5867389518-5">}</span><span class="p" data-group-id="5867389518-4">}</span><span class="p" data-group-id="5867389518-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5867389518-6">%</span><span class="nc" data-group-id="5867389518-6">AshPagify</span><span class="p" data-group-id="5867389518-6">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="5867389518-6">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="5867389518-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5867389518-8">%</span><span class="nc" data-group-id="5867389518-8">AshPagify.Meta</span><span class="p" data-group-id="5867389518-8">{</span><span class="p" data-group-id="5867389518-8">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="5867389518-7">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate</span><span class="p" data-group-id="5867389518-9">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="5867389518-9">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify.Error</span><span class="o">.</span><span class="n">clear_stacktrace</span><span class="p" data-group-id="5867389518-10">(</span><span class="n">meta</span><span class="o">.</span><span class="n">errors</span><span class="p" data-group-id="5867389518-10">)</span><span class="w">
</span><span class="p" data-group-id="5867389518-11">[</span><span class="w">
  </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5867389518-12">[</span><span class="w">
    </span><span class="p" data-group-id="5867389518-13">%</span><span class="nc" data-group-id="5867389518-13">Ash.Error.Query.InvalidOffset</span><span class="p" data-group-id="5867389518-13">{</span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="5867389518-13">}</span><span class="w">
  </span><span class="p" data-group-id="5867389518-12">]</span><span class="w">
</span><span class="p" data-group-id="5867389518-11">]</span></code></pre><p>The function is aware of the <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html"><code class="inline">Ash.Resource</code></a> type passed either as query or as
resource. Thus the function is able to validate that only allowed fields are
used for scoping, ordering and filtering. The function will also apply the
default_limit and scoping if the resource provides one.</p>
  </section>
</section>
<section class="detail" id="validate!/3">

    <span id="validate!/2"></span>

  <div class="detail-header">
    <a href="#validate!/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">validate!(query_or_resource, map_or_ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1157" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> validate!(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) :: <a href="#t:t/0">t</a>()</pre>

      </div>

<p>Same as <a href="#validate/2"><code class="inline">AshPagify.validate/2</code></a>, but raises a <a href="AshPagify.Error.Query.InvalidParamsError.html"><code class="inline">AshPagify.Error.Query.InvalidParamsError</code></a> if the
parameters are invalid.</p>
  </section>
</section>
<section class="detail" id="validate_and_run/4">

    <span id="validate_and_run/2"></span>

    <span id="validate_and_run/3"></span>

  <div class="detail-header">
    <a href="#validate_and_run/4" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">validate_and_run(query_or_resource, map_or_ash_pagify, opts \\ [], args \\ nil)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L474" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> validate_and_run(
  <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | <a href="#t:t/0">t</a>(),
  <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()
) ::
  {:ok, {[<a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:record/0">Ash.Resource.record</a>()], <a href="AshPagify.Meta.html#t:t/0">AshPagify.Meta.t</a>()}}
  | {:error, <a href="AshPagify.Meta.html#t:t/0">AshPagify.Meta.t</a>()}</pre>

      </div>

<p>Validates the given ash_pagify parameters and retrieves the data and meta data on
success.</p><h2 id="validate_and_run/4-examples" class="section-heading">
  <a href="#validate_and_run/4-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="7086533762-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7086533762-2">{</span><span class="p" data-group-id="7086533762-3">[</span><span class="p" data-group-id="7086533762-4">%</span><span class="nc" data-group-id="7086533762-4">Post</span><span class="p" data-group-id="7086533762-4">{</span><span class="p" data-group-id="7086533762-4">}</span><span class="p">,</span><span class="p" data-group-id="7086533762-5">%</span><span class="nc" data-group-id="7086533762-5">Post</span><span class="p" data-group-id="7086533762-5">{</span><span class="p" data-group-id="7086533762-5">}</span><span class="p">,</span><span class="p" data-group-id="7086533762-6">%</span><span class="nc" data-group-id="7086533762-6">Post</span><span class="p" data-group-id="7086533762-6">{</span><span class="p" data-group-id="7086533762-6">}</span><span class="p" data-group-id="7086533762-3">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7086533762-7">%</span><span class="nc" data-group-id="7086533762-7">AshPagify.Meta</span><span class="p" data-group-id="7086533762-7">{</span><span class="p" data-group-id="7086533762-7">}</span><span class="p" data-group-id="7086533762-2">}</span><span class="p" data-group-id="7086533762-1">}</span><span class="w"> </span><span class="o">=</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate_and_run</span><span class="p" data-group-id="7086533762-8">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7086533762-9">%</span><span class="nc" data-group-id="7086533762-9">AshPagify</span><span class="p" data-group-id="7086533762-9">{</span><span class="p" data-group-id="7086533762-9">}</span><span class="p" data-group-id="7086533762-8">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="7086533762-10">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7086533762-11">%</span><span class="nc" data-group-id="7086533762-11">AshPagify.Meta</span><span class="p" data-group-id="7086533762-11">{</span><span class="p" data-group-id="7086533762-11">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="7086533762-10">}</span><span class="w"> </span><span class="o">=</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate_and_run</span><span class="p" data-group-id="7086533762-12">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7086533762-13">%{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="7086533762-13">}</span><span class="p" data-group-id="7086533762-12">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">AshPagify.Error</span><span class="o">.</span><span class="n">clear_stacktrace</span><span class="p" data-group-id="7086533762-14">(</span><span class="n">meta</span><span class="o">.</span><span class="n">errors</span><span class="p" data-group-id="7086533762-14">)</span><span class="w">
</span><span class="p" data-group-id="7086533762-15">[</span><span class="w">
  </span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7086533762-16">[</span><span class="w">
    </span><span class="p" data-group-id="7086533762-17">%</span><span class="nc" data-group-id="7086533762-17">Ash.Error.Query.InvalidLimit</span><span class="p" data-group-id="7086533762-17">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p" data-group-id="7086533762-17">}</span><span class="w">
  </span><span class="p" data-group-id="7086533762-16">]</span><span class="w">
</span><span class="p" data-group-id="7086533762-15">]</span></code></pre><p>Or with a custom read action:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Comment</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Comment</span><span class="o">.</span><span class="n">read!</span><span class="p" data-group-id="4613584029-1">(</span><span class="p" data-group-id="4613584029-1">)</span><span class="w"> </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Enum</span><span class="o">.</span><span class="n">count</span><span class="p" data-group-id="4613584029-2">(</span><span class="p" data-group-id="4613584029-2">)</span><span class="w">
</span><span class="mi">9</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4613584029-3">%</span><span class="nc" data-group-id="4613584029-3">AshPagify</span><span class="p" data-group-id="4613584029-3">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4613584029-4">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;Post 1&quot;</span><span class="p" data-group-id="4613584029-4">}</span><span class="p" data-group-id="4613584029-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4613584029-5">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4613584029-6">{</span><span class="n">posts</span><span class="p">,</span><span class="w"> </span><span class="c">_meta</span><span class="p" data-group-id="4613584029-6">}</span><span class="p" data-group-id="4613584029-5">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate_and_run</span><span class="p" data-group-id="4613584029-7">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="4613584029-7">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">post</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">hd</span><span class="p" data-group-id="4613584029-8">(</span><span class="n">posts</span><span class="p" data-group-id="4613584029-8">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4613584029-9">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4613584029-10">{</span><span class="c">_comments</span><span class="p">,</span><span class="w"> </span><span class="n">meta</span><span class="p" data-group-id="4613584029-10">}</span><span class="p" data-group-id="4613584029-9">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate_and_run</span><span class="p" data-group-id="4613584029-11">(</span><span class="nc">Comment</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4613584029-12">%</span><span class="nc" data-group-id="4613584029-12">AshPagify</span><span class="p" data-group-id="4613584029-12">{</span><span class="p" data-group-id="4613584029-12">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4613584029-13">[</span><span class="ss">action</span><span class="p">:</span><span class="w"> </span><span class="ss">:by_post</span><span class="p" data-group-id="4613584029-13">]</span><span class="p">,</span><span class="w"> </span><span class="n">post</span><span class="o">.</span><span class="n">id</span><span class="p" data-group-id="4613584029-11">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">meta</span><span class="o">.</span><span class="n">total_count</span><span class="w">
</span><span class="mi">2</span></code></pre><p>Or with scopes:</p><pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="5646856455-1">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5646856455-2">{</span><span class="p" data-group-id="5646856455-3">[</span><span class="p" data-group-id="5646856455-4">%</span><span class="nc" data-group-id="5646856455-4">Post</span><span class="p" data-group-id="5646856455-4">{</span><span class="p" data-group-id="5646856455-4">}</span><span class="p" data-group-id="5646856455-3">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5646856455-5">%</span><span class="nc" data-group-id="5646856455-5">AshPagify.Meta</span><span class="p" data-group-id="5646856455-5">{</span><span class="p" data-group-id="5646856455-5">}</span><span class="p" data-group-id="5646856455-2">}</span><span class="p" data-group-id="5646856455-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">AshPagify</span><span class="o">.</span><span class="n">validate_and_run</span><span class="p" data-group-id="5646856455-6">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5646856455-7">%</span><span class="nc" data-group-id="5646856455-7">AshPagify</span><span class="p" data-group-id="5646856455-7">{</span><span class="ss">scopes</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5646856455-8">%{</span><span class="ss">role</span><span class="p">:</span><span class="w"> </span><span class="ss">:user</span><span class="p" data-group-id="5646856455-8">}</span><span class="p" data-group-id="5646856455-7">}</span><span class="p" data-group-id="5646856455-6">)</span></code></pre><h2 id="validate_and_run/4-options" class="section-heading">
  <a href="#validate_and_run/4-options" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Options</span>
</h2>
<p>The keyword list <code class="inline">opts</code> is used to pass additional options to the query engine.
It shoud conform to the list of valid options at <a href="https://hexdocs.pm/ash/3.3.3/Ash.html#read/2"><code class="inline">Ash.read/2</code></a>. Furthermore
the <a href="#t:option/0"><code class="inline">AshPagify.option/0</code></a> library options are supported.</p>
  </section>
</section>
<section class="detail" id="validate_and_run!/4">

    <span id="validate_and_run!/2"></span>

    <span id="validate_and_run!/3"></span>

  <div class="detail-header">
    <a href="#validate_and_run!/4" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">validate_and_run!(query_or_resource, map_or_ash_pagify, opts \\ [], args \\ nil)</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L495" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> validate_and_run!(
  <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | <a href="#t:t/0">t</a>(),
  <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>(),
  <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">any</a>()
) :: {[<a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:record/0">Ash.Resource.record</a>()], <a href="AshPagify.Meta.html#t:t/0">AshPagify.Meta.t</a>()}</pre>

      </div>

<p>Same as <a href="#validate_and_run/4"><code class="inline">AshPagify.validate_and_run/4</code></a>, but raises on error.</p>
  </section>
</section>
<section class="detail" id="validated_query/3">

    <span id="validated_query/2"></span>

  <div class="detail-header">
    <a href="#validated_query/3" class="detail-link" data-no-tooltip title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">validated_query(query_or_resource, map_or_ash_pagify, opts \\ [])</h1>

      <a href="https://github.com/zebbra/ash_pagify/blob/v1.0.2/lib/ash_pagify.ex#L1180" class="icon-action" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@spec</span> validated_query(<a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>() | <a href="https://hexdocs.pm/ash/3.3.3/Ash.Resource.html#t:t/0">Ash.Resource.t</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>() | <a href="#t:t/0">t</a>(), <a href="https://hexdocs.pm/elixir/Keyword.html#t:t/0">Keyword.t</a>()) ::
  <a href="https://hexdocs.pm/ash/3.3.3/Ash.Query.html#t:t/0">Ash.Query.t</a>()</pre>

      </div>

<p>Validates the given query or resource and ash_pagify parameters and returns a
validated query.</p><h2 id="validated_query/3-examples" class="section-heading">
  <a href="#validated_query/3-examples" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Examples</span>
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="kn">alias</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">ash_pagify</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="1650898279-1">%</span><span class="nc" data-group-id="1650898279-1">AshPagify</span><span class="p" data-group-id="1650898279-1">{</span><span class="ss">limit</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">offset</span><span class="p">:</span><span class="w"> </span><span class="mi">20</span><span class="p">,</span><span class="w"> </span><span class="ss">order_by</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1650898279-2">[</span><span class="s">&quot;name&quot;</span><span class="p" data-group-id="1650898279-2">]</span><span class="p">,</span><span class="w"> </span><span class="ss">filters</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1650898279-3">%{</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="1650898279-3">}</span><span class="p" data-group-id="1650898279-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">validated_query</span><span class="p" data-group-id="1650898279-4">(</span><span class="nc">Post</span><span class="p">,</span><span class="w"> </span><span class="n">ash_pagify</span><span class="p" data-group-id="1650898279-4">)</span><span class="w">
</span><span class="p" data-group-id="1650898279-5">#</span><span class="nc" data-group-id="1650898279-5">Ash.Query</span><span class="p" data-group-id="1650898279-5">&lt;</span><span class="ss">resource</span><span class="p">:</span><span class="w"> </span><span class="nc">AshPagify.Factory.Post</span><span class="p">,</span><span class="w"> </span><span class="ss">filter</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1650898279-6">#</span><span class="nc" data-group-id="1650898279-6">Ash.Filter</span><span class="p" data-group-id="1650898279-6">&lt;</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="1650898279-6">&gt;</span><span class="p">,</span><span class="w"> </span><span class="ss">sort</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1650898279-7">[</span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="ss">:asc</span><span class="p" data-group-id="1650898279-7">]</span><span class="p" data-group-id="1650898279-5">&gt;</span></code></pre>
  </section>
</section>

    </div>
  </section>

    <footer class="footer">
      <p>

          <span class="line">
            <a href="https://hex.pm/packages/ash_pagify/1.0.2" class="footer-hex-package">Hex Package</a>

            <a href="https://preview.hex.pm/preview/ash_pagify/1.0.2">Hex Preview</a>

          </span>

        <span class="line">
          <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
            Search HexDocs
          </button>

            <a href="ash_pagify.epub" title="ePub version">
              Download ePub version
            </a>

        </span>
      </p>

      <p class="built-using">
        Built using
        <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.34.2) for the

          <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

      </p>

    </footer>
  </div>
</main>
</div>

  </body>
</html>
